!function(){"use strict";!function(){var e,n,t,o,r,a={},i=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function l(e,n){for(var t in n)e[t]=n[t];return e}function c(e){var n=e.parentNode;n&&n.removeChild(e)}function u(n,t,o){var r,a,i,s={};for(i in t)"key"==i?r=t[i]:"ref"==i?a=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?e.call(arguments,2):o),"function"==typeof n&&null!=n.defaultProps)for(i in n.defaultProps)void 0===s[i]&&(s[i]=n.defaultProps[i]);return d(n,s,r,a,null)}function d(e,o,r,a,i){var s={type:e,props:o,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++t:i};return null==i&&null!=n.vnode&&n.vnode(s),s}function m(e){return e.children}function p(e,n){this.props=e,this.context=n}function f(e,n){if(null==n)return e.__?f(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?f(e):null}function v(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return v(e)}}function g(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!h.__r++||r!==n.debounceRendering)&&((r=n.debounceRendering)||setTimeout)(h)}function h(){for(var e;h.__r=o.length;)e=o.sort((function(e,n){return e.__v.__b-n.__v.__b})),o=[],e.some((function(e){var n,t,o,r,a,i;e.__d&&(a=(r=(n=e).__v).__e,(i=n.__P)&&(t=[],(o=l({},r)).__v=r.__v+1,C(i,r,o,n.__n,void 0!==i.ownerSVGElement,null!=r.__h?[a]:null,t,null==a?f(r):a,r.__h),T(t,r),r.__e!=a&&v(r)))}))}function _(e,n,t,o,r,s,l,c,u,p){var v,g,h,_,w,k,x,N=o&&o.__k||i,T=N.length;for(t.__k=[],v=0;v<n.length;v++)if(null!=(_=t.__k[v]=null==(_=n[v])||"boolean"==typeof _?null:"string"==typeof _||"number"==typeof _||"bigint"==typeof _?d(null,_,null,null,_):Array.isArray(_)?d(m,{children:_},null,null,null):_.__b>0?d(_.type,_.props,_.key,null,_.__v):_)){if(_.__=t,_.__b=t.__b+1,null===(h=N[v])||h&&_.key==h.key&&_.type===h.type)N[v]=void 0;else for(g=0;g<T;g++){if((h=N[g])&&_.key==h.key&&_.type===h.type){N[g]=void 0;break}h=null}C(e,_,h=h||a,r,s,l,c,u,p),w=_.__e,(g=_.ref)&&h.ref!=g&&(x||(x=[]),h.ref&&x.push(h.ref,null,_),x.push(g,_.__c||w,_)),null!=w?(null==k&&(k=w),"function"==typeof _.type&&_.__k===h.__k?_.__d=u=b(_,u,e):u=y(e,_,h,N,w,u),"function"==typeof t.type&&(t.__d=u)):u&&h.__e==u&&u.parentNode!=e&&(u=f(h))}for(t.__e=k,v=T;v--;)null!=N[v]&&("function"==typeof t.type&&null!=N[v].__e&&N[v].__e==t.__d&&(t.__d=f(o,v+1)),E(N[v],N[v]));if(x)for(v=0;v<x.length;v++)M(x[v],x[++v],x[++v])}function b(e,n,t){for(var o,r=e.__k,a=0;r&&a<r.length;a++)(o=r[a])&&(o.__=e,n="function"==typeof o.type?b(o,n,t):y(t,o,o,r,o.__e,n));return n}function y(e,n,t,o,r,a){var i,s,l;if(void 0!==n.__d)i=n.__d,n.__d=void 0;else if(null==t||r!=a||null==r.parentNode)e:if(null==a||a.parentNode!==e)e.appendChild(r),i=null;else{for(s=a,l=0;(s=s.nextSibling)&&l<o.length;l+=2)if(s==r)break e;e.insertBefore(r,a),i=a}return void 0!==i?i:r.nextSibling}function w(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||s.test(n)?t:t+"px"}function k(e,n,t,o,r){var a;e:if("style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(n in o)t&&n in t||w(e.style,n,"");if(t)for(n in t)o&&t[n]===o[n]||w(e.style,n,t[n])}else if("o"===n[0]&&"n"===n[1])a=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in e?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=t,t?o||e.addEventListener(n,a?N:x,a):e.removeEventListener(n,a?N:x,a);else if("dangerouslySetInnerHTML"!==n){if(r)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==n&&"list"!==n&&"form"!==n&&"tabIndex"!==n&&"download"!==n&&n in e)try{e[n]=null==t?"":t;break e}catch(e){}"function"==typeof t||(null!=t&&(!1!==t||"a"===n[0]&&"r"===n[1])?e.setAttribute(n,t):e.removeAttribute(n))}}function x(e){this.l[e.type+!1](n.event?n.event(e):e)}function N(e){this.l[e.type+!0](n.event?n.event(e):e)}function C(e,t,o,r,a,i,s,c,u){var d,f,v,g,h,b,y,w,k,x,N,C,T,M=t.type;if(void 0!==t.constructor)return null;null!=o.__h&&(u=o.__h,c=t.__e=o.__e,t.__h=null,i=[c]),(d=n.__b)&&d(t);try{e:if("function"==typeof M){if(w=t.props,k=(d=M.contextType)&&r[d.__c],x=d?k?k.props.value:d.__:r,o.__c?y=(f=t.__c=o.__c).__=f.__E:("prototype"in M&&M.prototype.render?t.__c=f=new M(w,x):(t.__c=f=new p(w,x),f.constructor=M,f.render=I),k&&k.sub(f),f.props=w,f.state||(f.state={}),f.context=x,f.__n=r,v=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=M.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=l({},f.__s)),l(f.__s,M.getDerivedStateFromProps(w,f.__s))),g=f.props,h=f.state,v)null==M.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==M.getDerivedStateFromProps&&w!==g&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(w,x),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(w,f.__s,x)||t.__v===o.__v){f.props=w,f.state=f.__s,t.__v!==o.__v&&(f.__d=!1),f.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach((function(e){e&&(e.__=t)})),f.__h.length&&s.push(f);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(w,f.__s,x),null!=f.componentDidUpdate&&f.__h.push((function(){f.componentDidUpdate(g,h,b)}))}if(f.context=x,f.props=w,f.__v=t,f.__P=e,N=n.__r,C=0,"prototype"in M&&M.prototype.render)f.state=f.__s,f.__d=!1,N&&N(t),d=f.render(f.props,f.state,f.context);else do{f.__d=!1,N&&N(t),d=f.render(f.props,f.state,f.context),f.state=f.__s}while(f.__d&&++C<25);f.state=f.__s,null!=f.getChildContext&&(r=l(l({},r),f.getChildContext())),v||null==f.getSnapshotBeforeUpdate||(b=f.getSnapshotBeforeUpdate(g,h)),T=null!=d&&d.type===m&&null==d.key?d.props.children:d,_(e,Array.isArray(T)?T:[T],t,o,r,a,i,s,c,u),f.base=t.__e,t.__h=null,f.__h.length&&s.push(f),y&&(f.__E=f.__=null),f.__e=!1}else null==i&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=S(o.__e,t,o,r,a,i,s,u);(d=n.diffed)&&d(t)}catch(e){t.__v=null,(u||null!=i)&&(t.__e=c,t.__h=!!u,i[i.indexOf(c)]=null),n.__e(e,t,o)}}function T(e,t){n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function S(n,t,o,r,i,s,l,u){var d,m,p,v=o.props,g=t.props,h=t.type,b=0;if("svg"===h&&(i=!0),null!=s)for(;b<s.length;b++)if((d=s[b])&&"setAttribute"in d==!!h&&(h?d.localName===h:3===d.nodeType)){n=d,s[b]=null;break}if(null==n){if(null===h)return document.createTextNode(g);n=i?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h,g.is&&g),s=null,u=!1}if(null===h)v===g||u&&n.data===g||(n.data=g);else{if(s=s&&e.call(n.childNodes),m=(v=o.props||a).dangerouslySetInnerHTML,p=g.dangerouslySetInnerHTML,!u){if(null!=s)for(v={},b=0;b<n.attributes.length;b++)v[n.attributes[b].name]=n.attributes[b].value;(p||m)&&(p&&(m&&p.__html==m.__html||p.__html===n.innerHTML)||(n.innerHTML=p&&p.__html||""))}if(function(e,n,t,o,r){var a;for(a in t)"children"===a||"key"===a||a in n||k(e,a,null,t[a],o);for(a in n)r&&"function"!=typeof n[a]||"children"===a||"key"===a||"value"===a||"checked"===a||t[a]===n[a]||k(e,a,n[a],t[a],o)}(n,g,v,i,u),p)t.__k=[];else if(b=t.props.children,_(n,Array.isArray(b)?b:[b],t,o,r,i&&"foreignObject"!==h,s,l,s?s[0]:o.__k&&f(o,0),u),null!=s)for(b=s.length;b--;)null!=s[b]&&c(s[b]);u||("value"in g&&void 0!==(b=g.value)&&(b!==n.value||"progress"===h&&!b||"option"===h&&b!==v.value)&&k(n,"value",b,v.value,!1),"checked"in g&&void 0!==(b=g.checked)&&b!==n.checked&&k(n,"checked",b,v.checked,!1))}return n}function M(e,t,o){try{"function"==typeof e?e(t):e.current=t}catch(e){n.__e(e,o)}}function E(e,t,o){var r,a;if(n.unmount&&n.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||M(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){n.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&E(r[a],t,"function"!=typeof e.type);o||null==e.__e||c(e.__e),e.__e=e.__d=void 0}function I(e,n,t){return this.constructor(e,t)}function L(t,o,r){var i,s,l;n.__&&n.__(t,o),s=(i="function"==typeof r)?null:r&&r.__k||o.__k,l=[],C(o,t=(!i&&r||o).__k=u(m,null,[t]),s||a,a,void 0!==o.ownerSVGElement,!i&&r?[r]:s?null:o.firstChild?e.call(o.childNodes):null,l,!i&&r?r:s?s.__e:o.firstChild,i),T(l,t)}e=i.slice,n={__e:function(e,n,t,o){for(var r,a,i;n=n.__;)if((r=n.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),i=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),i=r.__d),i)return r.__E=r}catch(n){e=n}throw e}},t=0,p.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=l({},this.state),"function"==typeof e&&(e=e(l({},t),this.props)),e&&l(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),g(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},p.prototype.render=m,o=[],h.__r=0;var O,R,z,H,B=0,P=[],U=[],A=n.__b,D=n.__r,F=n.diffed,j=n.__c,V=n.unmount;function q(e,t){n.__h&&n.__h(R,e,B||t),B=0;var o=R.__H||(R.__H={__:[],__h:[]});return e>=o.__.length&&o.__.push({__V:U}),o.__[e]}function $(e){return B=1,function(e,n,t){var o=q(O++,2);return o.t=e,o.__c||(o.__=[t?t(n):ee(void 0,n),function(e){var n=o.t(o.__[0],e);o.__[0]!==n&&(o.__=[n,o.__[1]],o.__c.setState({}))}],o.__c=R),o.__}(ee,e)}function G(e,t){var o=q(O++,3);!n.__s&&Z(o.__H,t)&&(o.__=e,o.u=t,R.__H.__h.push(o))}function K(e){return B=5,W((function(){return{current:e}}),[])}function W(e,n){var t=q(O++,7);return Z(t.__H,n)?(t.__V=e(),t.u=n,t.__h=e,t.__V):t.__}function J(){for(var e;e=P.shift();)if(e.__P)try{e.__H.__h.forEach(Y),e.__H.__h.forEach(Q),e.__H.__h=[]}catch(t){e.__H.__h=[],n.__e(t,e.__v)}}n.__b=function(e){R=null,A&&A(e)},n.__r=function(e){D&&D(e),O=0;var n=(R=e.__c).__H;n&&(z===R?(n.__h=[],R.__h=[],n.__.forEach((function(e){e.__V=U,e.u=void 0}))):(n.__h.forEach(Y),n.__h.forEach(Q),n.__h=[])),z=R},n.diffed=function(e){F&&F(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==P.push(t)&&H===n.requestAnimationFrame||((H=n.requestAnimationFrame)||function(e){var n,t=function(){clearTimeout(o),X&&cancelAnimationFrame(n),setTimeout(e)},o=setTimeout(t,100);X&&(n=requestAnimationFrame(t))})(J)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.__V!==U&&(e.__=e.__V),e.u=void 0,e.__V=U}))),z=R=null},n.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Y),e.__h=e.__h.filter((function(e){return!e.__||Q(e)}))}catch(o){t.some((function(e){e.__h&&(e.__h=[])})),t=[],n.__e(o,e.__v)}})),j&&j(e,t)},n.unmount=function(e){V&&V(e);var t,o=e.__c;o&&o.__H&&(o.__H.__.forEach((function(e){try{Y(e)}catch(e){t=e}})),t&&n.__e(t,o.__v))};var X="function"==typeof requestAnimationFrame;function Y(e){var n=R,t=e.__c;"function"==typeof t&&(e.__c=void 0,t()),R=n}function Q(e){var n=R;e.__c=e.__(),R=n}function Z(e,n){return!e||e.length!==n.length||n.some((function(n,t){return n!==e[t]}))}function ee(e,n){return"function"==typeof n?n(e):n}function ne(e,n){var t="";for(var o in n)t+=(""!==t?"&":"")+o+"="+encodeURIComponent(n[o]);var r=e.match(/\?/)?"&":"?";return e+r+t}var te=function(){function e(){}return e.request=function(e){var n=e.method.toUpperCase(),t=e.data||{};!1!==e.cache&&(t._=(new Date).getTime());var o=e.url;"GET"===n&&e.data&&(o=ne(e.url,e.data));var r="function"==typeof e.success?e.success:function(){},a="function"==typeof e.error?e.error:function(){},i="function"==typeof e.complete?e.complete:function(){},s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===this.readyState)if(i(),200===this.status)if(e.bare)r(this.responseText);else{var n;try{n=JSON.parse(this.responseText)}catch(e){}n&&!0===n.status?r(n):a(n&&n.error?n.error:null)}else a()},s.open(n,o,!0),"POST"!==n||e.formData||s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var l=ae("token"),c=o.match(new RegExp("^"+ae("domains.talk")));l&&c&&s.setRequestHeader("X-Embed-Token",l);var u=window.socketId;return u&&c&&s.setRequestHeader("X-Socket-ID",u),s.send("POST"===n?e.formData?t:function(e){var n="";for(var t in e)""!=n&&(n+="&"),n+=t+"="+encodeURIComponent(e[t]);return n}(t):null),s},e.get=function(n){return n.method="GET",e.request(n)},e.post=function(n){return n.method="POST",e.request(n)},e}();function oe(e){return ae("domains.talk")+"/api/embed/"+ae("website.id")+"/page/"+ae("page.id")+"/"+e}function re(e){return ae("domains.talk")+"/api/embed/"+ae("website.id")+"/"+e}function ae(e){var n=e.split("."),t=window.config;return n.forEach((function(e){void 0!==t[e]&&(t=t[e])})),t}function ie(e){return ae("website.settings."+e)}function se(e,n){var t="";if(t="object"==typeof e?1==e.count?se(e.single,n):se(e.multi,n):ae("lang.words."+e),n)for(var o in n)t=t.replace(o,n[o]);return t}function le(e){switch(ae("lang.name")){case"fa":var n=["&#1776;","&#1777;","&#1778;","&#1779;","&#1780;","&#1781;","&#1782;","&#1783;","&#1784;","&#1785;"];return e.toString().replace(/\d/g,(function(e){return n[e]}))}return e}function ce(e){return"user"===ie("display_name_type")&&e.username?e.username:e.name}function ue(e,n){if(e&&("object"==typeof e&&(n=e.type,e=e.id),"hyvor"===n)){for(var t=ae("mods"),o=0,r=t.length;o<r;o++)if(t[o].user_id==e)return!0;return!1}}function de(e,n){if(e&&("object"==typeof e&&(n=e.type,e=e.id),"hyvor"===n)){for(var t=ae("mods"),o=0,r=t.length;o<r;o++)if(t[o].user_id==e&&!0===t[o].is_alias_used)return!0;return!1}}function me(e,n,t,o){void 0===t&&(t=!1),void 0===o&&(o=!1);var r=0;return n||(n="PARENT_COMMENTS"),e[n]&&Array.isArray(e[n])&&e[n].forEach((function(n){o&&n.realtimeLoaded||(r+=1,t&&(r+=me(e,n,!0)))})),r}function pe(e,n,t,o){return e.new||t&&t.pageLastVisit&&new Date(t.pageLastVisit)<new Date(e.time)&&-1===o.indexOf(e.id)&&!(n&&e.userId&&n.id===e.userId&&n.type===e.userType)}var fe=null;function ve(e,n,t){t(n),e.update(n,{new:!1}),fe&&clearTimeout(fe),fe=setTimeout((function(){te.post({url:oe("misc/set-page-visit-time")})}),2500)}function ge(e){return JSON.parse(JSON.stringify(e))}function he(e,n){if(e)for(var t=0,o=e.length;t<o;t++)n(e[t])}function _e(e,n){return n.getElementsByClassName(e)}function be(e,n){void 0===n&&(n=[]);var t=K(n);G((function(){t.current?t.current=!1:e()}),n)}function ye(e){this.value=e,this.subscribers=[],this.getValue=function(){return this.value},this.setValue=function(e){this.getValue()!==e&&(this.value=e,this.subscribers.forEach((e=>{e(this.value)})))},this.subscribe=function(e){this.subscribers.indexOf(e)>-1||this.subscribers.push(e)},this.unsubscribe=function(e){this.subscribers=this.subscribers.filter((n=>n!==e))}}function we(e,n=null){const[,t]=$();var o=ke.getState(e,n),r=o.getValue();function a(){t({})}return G((()=>(o.subscribe(a),()=>{o.unsubscribe(a)}))),[r,e=>o.setValue(e)]}const ke=new function(){this.value={},this.init=function(e){for(var n in e)this.setState(n,e[n])},this.getState=function(e,n){return void 0===this.value[e]&&this.setState(e,n),this.value[e]},this.setState=function(e,n){this.value[e]=new ye(n)}};var xe=function(){function e(){}return e.add=function(n){n.forEach((function(n){e.DB[e.getKey(n.user_id,n.type)]=config.badges[n.badge_id]}))},e.addOne=function(e,n,t){this.DB[this.getKey(e,n)]=config.badges[t]},e.get=function(n,t){return e.DB[e.getKey(n,t)]},e.getKey=function(e,n){return e+"_"+n},e}();xe.DB={};var Ne=function(){function e(){}return e.addUsers=function(n){"object"==typeof n&&(n.hyvor&&e.addUsersOfType("hyvor",n.hyvor),n.sso&&e.addUsersOfType("sso",n.sso),n.badges&&xe.add(n.badges))},e.addUsersOfType=function(n,t){for(var o in t)e.DB[n+"_"+o]=t[o]},e.getUser=function(n,t,o){void 0===o&&(o=!0);var r=t+"_"+n;return e.DB[r]?e.DB[r]:o?e.defaultUser:null},e}();function Ce(e){void 0===e&&(e=!1);var n=we("comments"),t=n[0],o=n[1],r=we("commentsList",[]),a=r[0],i=r[1],s=we("userCommentsList",[]),l=s[0],c=s[1],u=we("userComments"),d=u[0],m=u[1],p={set:function(e,n){o(e),i(n)},add:function(e,n){void 0===n&&(n=!1);var r=a,s=ge(t);e.length||(e=[e]),e.forEach((function(e){e.replyTo?r[e.replyTo]?r[e.replyTo]=n?[].concat(r[e.replyTo],[e.id]):[e.id].concat(r[e.replyTo]):r[e.replyTo]=[e.id]:r.PARENT_COMMENTS?r.PARENT_COMMENTS=function(e){for(var n=[],t=0;t<e.length;t++)e[t].isFeatured?n.unshift(e[t]):n.push(e[t]);return n}(n?[].concat(r.PARENT_COMMENTS,[e.id]):[e.id].concat(r.PARENT_COMMENTS)):r.PARENT_COMMENTS=[e.id],s[e.id]=e})),o(s),i(r)},remove:function(e){if(me(a,e)>0)p.update(e,{hasRemoved:!0});else{var n=a,t=ge(l);e:for(var o in n)for(var r=0,s=n[o].length;r<s;r++)if(n[o][r]===e){n[o].splice(r,1);break e}e:for(r=0;r<t.length;r++)if(t[r]===e){t.splice(r,1);break e}i(n),c(t)}},update:function(e,n){var r=a,s=ge(l),u=!1;e:for(var p in r)for(var f=0,v=r[p].length;f<v;f++)if(r[p][f]==e||null===e){for(var g in"function"==typeof n&&(n=n(t[e])),n)t[e][g]!==n[g]&&(t[e][g]=n[g],u=!0);if(null!==e)break e}e:for(f=0;f<s.length;f++){for(var g in"function"==typeof n&&(n=n(d[e])),n)d[e][g]!==n[g]&&(d[e][g]=n[g],u=!0);if(null!==e)break e}return o(t),m(d),i(r),c(s),u},isFound:function(e){for(var n in a)for(var t=0,o=a[n].length;t<o;t++)if(a[n][t]===e)return!0;return!1}};return e?p:[t,a,p]}function Te(){return(Te=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}Ne.defaultUser={id:0,name:"Anonymous User",username:"",picture:null},Ne.DB={};var Se={emoji:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.5 8a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0zM8 0a8 8 0 100 16A8 8 0 008 0zM5 8a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zM5.32 9.636a.75.75 0 011.038.175l.007.009c.103.118.22.222.35.31.264.178.683.37 1.285.37.602 0 1.02-.192 1.285-.371.13-.088.247-.192.35-.31l.007-.008a.75.75 0 111.222.87l-.614-.431c.614.43.614.431.613.431v.001l-.001.002-.002.003-.005.007-.014.019a1.984 1.984 0 01-.184.213c-.16.166-.338.316-.53.445-.63.418-1.37.638-2.127.629-.946 0-1.652-.308-2.126-.63a3.32 3.32 0 01-.715-.657l-.014-.02-.005-.006-.002-.003v-.002h-.001l.613-.432-.614.43a.75.75 0 01.183-1.044h.001z"></path></svg>',preview:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.679 7.932c.412-.621 1.242-1.75 2.366-2.717C5.175 4.242 6.527 3.5 8 3.5c1.473 0 2.824.742 3.955 1.715 1.124.967 1.954 2.096 2.366 2.717a.119.119 0 010 .136c-.412.621-1.242 1.75-2.366 2.717C10.825 11.758 9.473 12.5 8 12.5c-1.473 0-2.824-.742-3.955-1.715C2.92 9.818 2.09 8.69 1.679 8.068a.119.119 0 010-.136zM8 2c-1.981 0-3.67.992-4.933 2.078C1.797 5.169.88 6.423.43 7.1a1.619 1.619 0 000 1.798c.45.678 1.367 1.932 2.637 3.024C4.329 13.008 6.019 14 8 14c1.981 0 3.67-.992 4.933-2.078 1.27-1.091 2.187-2.345 2.637-3.023a1.619 1.619 0 000-1.798c-.45-.678-1.367-1.932-2.637-3.023C11.671 2.992 9.981 2 8 2zm0 8a2 2 0 100-4 2 2 0 000 4z"></path></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.75 2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h.94a.76.76 0 01.03-.03l6.077-6.078a1.75 1.75 0 012.412-.06L14.5 10.31V2.75a.25.25 0 00-.25-.25H1.75zm12.5 11H4.81l5.048-5.047a.25.25 0 01.344-.009l4.298 3.889v.917a.25.25 0 01-.25.25zm1.75-.25V2.75A1.75 1.75 0 0014.25 1H1.75A1.75 1.75 0 000 2.75v10.5C0 14.216.784 15 1.75 15h12.5A1.75 1.75 0 0016 13.25zM5.5 6a.5.5 0 11-1 0 .5.5 0 011 0zM7 6a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>',gif:'<svg version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m1.1426 1c-0.63314 0-1.1426 0.446-1.1426 1v12c0 0.554 0.50942 1 1.1426 1h13.715c0.63314 0 1.1426-0.446 1.1426-1v-12c0-0.554-0.50942-1-1.1426-1h-13.715zm0.64258 1.3125h12.43c0.15829 0 0.28516 0.1115 0.28516 0.25v10.875c0 0.1385-0.12687 0.25-0.28516 0.25h-12.43c-0.15829 0-0.28516-0.1115-0.28516-0.25v-10.875c0-0.1385 0.12687-0.25 0.28516-0.25z"/><path d="m5.0742 5.3145c-0.48419 0-0.90166 0.084406-1.2441 0.26172-0.43632 0.22436-0.77418 0.55423-1.002 0.97656-0.2268 0.42052-0.33984 0.90137-0.33984 1.4316 0 0.4898 0.10137 0.94769 0.30273 1.3691 0.20408 0.42477 0.51524 0.75957 0.92188 0.99023 0.4066 0.22827 0.88168 0.3418 1.4141 0.3418 0.42164 0 0.83853-0.08081 1.2461-0.23828 0.40542-0.15804 0.72429-0.34104 0.95312-0.5625l0.050781-0.050781v-2.1797h-2.457v1.1602h0.16992 0.95508v0.34961c-0.12229 0.086475-0.25678 0.16785-0.42578 0.23438v-0.0019531c-0.1879 0.072736-0.37093 0.10938-0.55469 0.10938-0.37662 0-0.65663-0.12152-0.88281-0.375-0.21941-0.24778-0.3418-0.63541-0.3418-1.1875-1e-7 -0.50772 0.1203-0.86245 0.33398-1.0938v-0.0019532c0.22153-0.23596 0.50827-0.35352 0.90039-0.35352 0.25521 0 0.45028 0.060755 0.60547 0.17578l0.0019531 0.0019531c0.16008 0.1154 0.26478 0.26557 0.32422 0.47266l0.041016 0.14844 1.3008-0.24219-0.037109-0.17188c-0.10469-0.4806-0.34965-0.87232-0.72266-1.1484-0.37711-0.28285-0.88672-0.41602-1.5137-0.41602zm2.8379 0.083984v5.2031h0.16992 1.1523v-5.2031h-1.3223zm1.9258 0v5.2031h0.16992 1.1523v-2.0664h2.0293v-1.1621h-2.0293v-0.8125h2.3516v-1.1621h-3.6738z" /></svg>',bold:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 2a1 1 0 00-1 1v10a1 1 0 001 1h5.5a3.5 3.5 0 001.852-6.47A3.5 3.5 0 008.5 2H4zm4.5 5a1.5 1.5 0 100-3H5v3h3.5zM5 9v3h4.5a1.5 1.5 0 000-3H5z"></path></svg>',italic:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M6 2.75A.75.75 0 016.75 2h6.5a.75.75 0 010 1.5h-2.505l-3.858 9H9.25a.75.75 0 010 1.5h-6.5a.75.75 0 010-1.5h2.505l3.858-9H6.75A.75.75 0 016 2.75z"></path></svg>',underline:'<svg version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m5.25 1.5847c-0.4155 0-0.75 0.3345-0.75 0.75l0.00448 6.4107c0.00448 0.6334 0.67038 1.7772 1.7455 2.3978 1.0829 0.62522 2.4171 0.62522 3.5 0 1.0732-0.62048 1.7381-1.7623 1.7441-2.3968 7.07e-4 -0.00976 6e-3 -6.4118 6e-3 -6.4118 0-0.4155-0.3345-0.75-0.75-0.75s-0.74972 0.3345-0.75 0.75l-0.00409 6.1422c-0.00409 0.36486-0.38419 1.0144-0.99591 1.3676-0.6188 0.35727-1.3812 0.35727-2 0-0.61174-0.35311-0.99185-1.0027-0.99594-1.3676-4.58e-5 -0.00781-0.00409-6.1422-0.00409-6.1422 0-0.4155-0.3345-0.75-0.75-0.75z" style="paint-order:stroke fill markers"/><path d="m5.25 12.915h5.5c0.4155 0 0.75 0.3345 0.75 0.75s-0.3345 0.75-0.75 0.75h-5.5c-0.4155 0-0.75-0.3345-0.75-0.75s0.3345-0.75 0.75-0.75z" style="paint-order:stroke fill markers"/></svg>',code:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.72 3.22a.75.75 0 011.06 1.06L2.06 8l3.72 3.72a.75.75 0 11-1.06 1.06L.47 8.53a.75.75 0 010-1.06l4.25-4.25zm6.56 0a.75.75 0 10-1.06 1.06L13.94 8l-3.72 3.72a.75.75 0 101.06 1.06l4.25-4.25a.75.75 0 000-1.06l-4.25-4.25z"></path></svg>',quote:'<svg version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g><path d="m7.3792 5.8233q0.38363 2.0672-0.94531 4.5398-1.3258 2.4896-3.5444 4.0406l-0.9688-1.0647q0.7485-0.59463 1.3828-1.2382 0.6512-0.64668 1.1015-1.4314 0.46097-0.82171 0.66149-1.6301 0.22061-0.79463 0.10723-1.8778l-0.94887 0.17609q-1.7283 0.32074-2.754-0.29517-1.0257-0.61591-1.2804-1.9884-0.20125-1.0844 0.48558-2.1058 0.68369-1.0383 1.9206-1.2679 1.8977-0.35218 3.1226 0.77013 1.2387 1.1022 1.66 3.3727z"/><path d="m15.769 5.8233q0.38363 2.0672-0.94531 4.5398-1.3258 2.4896-3.5444 4.0406l-0.9688-1.0647q0.7485-0.59463 1.3828-1.2382 0.6512-0.64668 1.1015-1.4314 0.46097-0.82171 0.66149-1.6301 0.22061-0.79463 0.10723-1.8778l-0.94887 0.17609q-1.7283 0.32074-2.754-0.29517-1.0257-0.61591-1.2804-1.9884-0.20125-1.0844 0.48558-2.1058 0.68369-1.0383 1.9206-1.2679 1.8977-0.35218 3.1226 0.77013 1.2387 1.1022 1.66 3.3727z"/></g></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>',search:'<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -244.08)"><path d="m21.354 244.61a11.536 11.536 0 0 0-11.536 11.536 11.536 11.536 0 0 0 2.0382 6.5449l-10.553 11.201c-0.45492 0.48287-0.43212 1.2376 0.05055 1.6928l1.5971 1.5064c0.48267 0.45512 1.2372 0.43299 1.6921-0.0498l10.518-11.164a11.536 11.536 0 0 0 6.1928 1.8057 11.536 11.536 0 0 0 11.536-11.537 11.536 11.536 0 0 0-11.536-11.536zm-0.0035 4.0508a7.4854 7.4854 0 0 1 0.0035 0 7.4854 7.4854 0 0 1 7.4855 7.4852 7.4854 7.4854 0 0 1-7.4855 7.4855 7.4854 7.4854 0 0 1-7.4852-7.4855 7.4854 7.4854 0 0 1 7.4818-7.4852z" style="paint-order:stroke fill markers"/></g></svg>',facebook:'<svg viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><path d="m18.101 0.84917c-1.3574 0.2677-1.9767 0.81396-2.4237 1.2107-0.44701 0.39675-0.75171 0.66695-1.0551 1.0709-0.30343 0.40397-0.6088 0.94884-0.75979 1.8871-0.15099 0.93823-0.15105 2.2631-0.15105 3.7178v4.543h-4.1867v5.5416h4.1867v14.305h5.5327v-14.305h4.1732l0.92437-5.5416h-5.0976v-4.676c0-0.52899 0.0023-1.0385 0.28858-1.5466 0.28624-0.50817 0.8689-1.0255 1.594-1.2829 0.72508-0.25738 2.5882-0.34495 2.5882-0.34495v-3.3572l-8.08e-4 -1.1756s-4.2557-0.31388-5.6131-0.046183z"/></svg>',twitter:'<svg width="128" height="128" version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><path d="m3.0087 5.0927c0.52295 0.5634 1.0459 1.1268 1.4966 1.5775 0.45073 0.45073 0.82921 0.78876 1.238 1.1196 0.40883 0.33082 0.84798 0.6544 1.3565 0.98956 0.50851 0.33515 1.0863 0.68185 1.7364 1.0199 0.65008 0.33804 1.3724 0.6674 2.1351 0.95633 0.76277 0.28893 1.566 0.5374 2.3071 0.71942 0.74109 0.18202 1.42 0.29758 1.969 0.35248 0.54896 0.0549 0.96787 0.04912 1.3868 0.04334-0.0809-0.36404-0.16179-0.72806-0.20225-1.0372-0.04045-0.30915-0.04045-0.5634-0.04045-0.79454 0-0.23114 0-0.43916 0.04623-0.70498 0.04623-0.26582 0.13868-0.5894 0.27737-0.97078 0.13868-0.38138 0.32359-0.82054 0.55473-1.225 0.23114-0.4045 0.5085-0.77431 0.87544-1.1557s0.82342-0.7743 1.2973-1.0936c0.47385-0.31927 0.96499-0.56484 1.4995-0.74976 0.53452-0.18491 1.1124-0.30915 1.6324-0.35971 0.52007-0.050558 0.98234-0.027444 1.5255 0.067905 0.54318 0.095349 1.1672 0.26292 1.7566 0.56341s1.1441 0.73387 1.4793 0.99679c0.33515 0.26292 0.45072 0.35537 0.62407 0.39003 0.17335 0.034659 0.40449 0.011546 0.61251-0.027459 0.20802-0.039005 0.39293-0.093899 0.6703-0.19791 0.27737-0.10401 0.64718-0.25714 1.0632-0.42616 0.41605-0.16902 0.87832-0.35393 1.1672-0.50417s0.40449-0.26581 0.52006-0.38138c0.04623 0.092456 0.09247 0.18495-0.0029 0.47963-0.09535 0.29469-0.33227 0.79163-0.58074 1.1961-0.24848 0.4045-0.5085 0.71652-0.81765 1.0228-0.30915 0.30626-0.66741 0.60674-1.0257 0.90722 0.26292-0.01445 0.52586-0.0289 0.93324-0.11703 0.40738-0.088126 0.95921-0.24992 1.4157-0.40738 0.4565-0.15746 0.81764-0.31058 1.1788-0.46371-0.19936 0.35248-0.39872 0.70497-0.65442 1.0546-0.2557 0.3496-0.56772 0.69629-0.85954 0.99678s-0.5634 0.55473-0.89566 0.80899-0.72518 0.5085-0.92166 0.63563l-0.19648 0.12713c-0.02311 0.25425-0.04623 0.50852-0.01589 0.90291s0.11412 0.92888 0.04478 1.9228c-0.06935 0.99389-0.29181 2.4471-0.63852 3.639s-0.81764 2.1221-1.2221 2.8618-0.74253 1.2886-1.1933 1.9488c-0.45072 0.6602-1.0141 1.4316-1.5009 2.0196-0.48684 0.58797-0.8971 0.99244-1.5486 1.5833-0.65153 0.59086-1.5443 1.368-2.6783 2.0542-1.134 0.6862-2.5093 1.2814-3.5292 1.6469-1.0199 0.36549-1.6844 0.50128-2.3634 0.63708s-1.3724 0.27159-2.0542 0.33948c-0.68186 0.0679-1.3521 0.0679-2.1843 0.03323-0.83209-0.034672-1.826-0.10401-2.7159-0.21958-0.88989-0.11557-1.6757-0.27736-2.3128-0.46054-0.63708-0.18318-1.1253-0.38772-1.5992-0.57264-0.47384-0.18492-0.93322-0.35018-1.3825-0.55993-0.44928-0.20976-0.88843-0.464-1.2034-0.6807-0.31493-0.21669-0.50564-0.39584-0.69633-0.57498 0.46805 0.01734 0.93613 0.03467 1.3551 0.04334 0.41894 0.0087 0.78875 0.0087 1.3464-0.03323 0.55763-0.0419 1.303-0.12568 1.8664-0.23114s0.94477-0.23258 1.4388-0.42183c0.49407-0.18925 1.1008-0.4406 1.7364-0.78587 0.63563-0.34527 1.3001-0.78442 1.9647-1.2236-0.17624-0.01155-0.35246-0.02311-0.64283-0.05344-0.29037-0.03033-0.69486-0.079446-1.1932-0.24268s-1.0907-0.4406-1.5371-0.69918c-0.4464-0.25859-0.74687-0.49839-1.0242-0.76853-0.27737-0.27014-0.53162-0.57062-0.73964-0.85954-0.20803-0.28892-0.36982-0.56629-0.53971-0.90866-0.16989-0.34237-0.34788-0.74978-0.52585-1.1572 0.31261 0.06356 0.62525 0.12713 0.98727 0.1459 0.36202 0.01878 0.77343-0.0072 1.0846-0.02889 0.31118-0.02167 0.52206-0.039 0.73298-0.05633-0.19358-0.092465-0.38712-0.18491-0.73962-0.35104-0.35249-0.16614-0.86387-0.40593-1.2496-0.6284-0.38572-0.22247-0.64574-0.4276-0.93756-0.70352-0.29182-0.27592-0.6154-0.62262-0.87255-0.95489s-0.44783-0.65006-0.62032-0.99533c-0.17249-0.34527-0.32677-0.71797-0.42154-1.2323-0.094772-0.51428-0.13002-1.1702-0.16527-1.826 0.36578 0.15313 0.73158 0.30627 1.0673 0.42609 0.33572 0.11982 0.64257 0.20666 0.9416 0.27744 0.29903 0.07078 0.59084 0.12568 0.63273 0.07801 0.041895-0.04767-0.16612-0.1979-0.41171-0.43482-0.24559-0.23691-0.52873-0.5605-0.75409-0.81909s-0.39293-0.45216-0.57785-0.71797c-0.18492-0.26581-0.38716-0.60384-0.53451-0.89999s-0.23981-0.5504-0.33227-0.97801c-0.09246-0.42761-0.18491-1.0286-0.17336-1.6411 0.011555-0.61253 0.12712-1.2366 0.32359-1.7798s0.47383-1.0055 0.7512-1.4677v-5.1e-6z"/></svg>',linkedin:'<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><path d="m4.1681 0.96819c-1.7925 0-3.2455 1.455-3.2455 3.2475 1.1e-7 1.7925 1.453 3.2455 3.2455 3.2455 1.7925-1e-7 3.2475-1.453 3.2475-3.2455 0-1.7925-1.455-3.2475-3.2475-3.2475zm20.81 7.5134c-3.071 0-5.624 1.3375-7.6751 3.8739v-3.3384h-6.0484v23.883h6.495v-10.827c0-2.6375 0.15838-4.4453 0.46075-5.3956 0.31894-0.95681 0.8943-1.7193 1.7359-2.2997 0.84176-0.58053 1.7875-0.86895 2.8494-0.86895 0.82664 0 1.5195 0.20178 2.0916 0.60221h2e-3c0.58755 0.40125 1.007 0.96476 1.2671 1.7015h2e-3c0.25249 0.70135 0.39204 2.3535 0.39204 4.9025v12.186h6.495v-14.813c0-1.8309-0.11824-3.2396-0.35971-4.2356-0.22621-0.99535-0.64267-1.8861-1.2469-2.6716-0.59387-0.79129-1.4715-1.4344-2.627-1.9299h-2e-3c-1.1585-0.5113-2.4372-0.76792-3.8314-0.76792zm-24.157 0.53552v23.883h6.4929v-23.883z"/></svg>',star:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .587l3.668 7.568 8.332 1.151-6.064 5.828 1.48 8.279-7.416-3.967-7.417 3.967 1.481-8.279-6.064-5.828 8.332-1.151z"/></svg>',thumbs_up:'<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -244.08)"><path d="m20.457 275.96c-1.5247-0.26113-2.7181-0.57778-5.1853-1.3758-1.8822-0.60878-2.4846-0.78039-3.6956-1.0529-0.8605-0.19365-0.8797-0.35787-0.8797-7.5208 0-7.4101-0.07864-6.9469 1.2894-7.594 0.97126-0.45949 1.2861-0.80315 5.5285-6.0338 0.50421-0.62168 0.74363-1.2792 1.266-3.4771 0.34479-1.4507 0.80203-2.3677 1.4017-2.8111 0.38162-0.28217 0.49151-0.29102 1.5251-0.12275 1.4897 0.24254 2.315 0.76367 2.9278 1.8487 0.4627 0.8193 0.47371 0.88492 0.47371 2.8236 0.17821 1.5156-0.09467 2.1806-0.72442 3.4832-0.39843 0.82413-0.72443 1.5781-0.72444 1.6755-1.6e-5 0.12841 0.82739 0.17704 3.0121 0.17704 3.5985 0 4.0594 0.11866 5.143 1.3238 0.3798 0.42244 0.69054 0.86358 0.69054 0.98033s0.30502 0.71575 0.30502 1.4177c0 1.0956-0.04852 1.2913-0.53275 2.148-0.50516 0.89371-0.52388 0.97777-0.36147 1.6228 0.20918 0.83073 0.08061 1.886-0.33419 2.7428-0.2218 0.45818-0.32146 1.006-0.34818 1.9137-0.03815 1.2963-0.36164 2.2408-0.92867 2.7114-0.16963 0.14078-0.24089 0.47287-0.24326 1.1336-0.0074 2.069-1.3088 3.5833-3.4738 4.0422-1.0616 0.22502-4.6837 0.19202-6.131-0.0558zm-17.504-16.975c-0.62703 0-1.0101 6.1e-4 -1.2602 0.0176-0.25007 0.0169-0.38206 0.0533-0.4715 0.13814-0.044719 0.0424-0.080509 0.10302-0.10245 0.19083-0.021937 0.0878-0.034387 0.20722-0.0432 0.391-0.017627 0.36759-0.018515 0.99443-0.018515 2.1178v8.7227c0 1.1233 8.847e-4 1.7502 0.018515 2.1178 0.00881 0.18378 0.021262 0.30322 0.0432 0.39101 0.021938 0.0878 0.057711 0.14844 0.10245 0.19082 0.089447 0.0847 0.22143 0.1212 0.4715 0.13814 0.25006 0.0169 0.63319 0.0164 1.2602 0.0164h4.7372c0.62703 0 1.0102 5.4e-4 1.2602-0.0164 0.25005-0.0169 0.38212-0.0546 0.4715-0.13931 0.044687-0.0424 0.080536-0.10187 0.10245-0.18965 0.02191-0.0878 0.034402-0.20723 0.043203-0.39101 0.017603-0.36756 0.018515-0.99442 0.018515-2.1178v-8.7227c0-1.1234-8.846e-4 -1.7502-0.018515-2.1178-0.00885-0.18378-0.021293-0.3032-0.043203-0.391s-0.057777-0.14841-0.10245-0.19083c-0.089363-0.0849-0.22145-0.12118-0.4715-0.13814-0.25005-0.017-0.63319-0.0176-1.2602-0.0176z"/></g></svg>',thumbs_down:'<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><path d="m20.457 1.987c-1.5247 0.26113-2.7181 0.57778-5.1853 1.3758-1.8822 0.60878-2.4846 0.78039-3.6956 1.0529-0.8605 0.19365-0.87971 0.35787-0.87971 7.5208 0 7.4101-0.0786 6.9469 1.2894 7.594 0.97126 0.45949 1.2861 0.80315 5.5285 6.0338 0.50421 0.62168 0.74363 1.2792 1.266 3.4771 0.34479 1.4507 0.80203 2.3677 1.4017 2.8111 0.38162 0.28217 0.49151 0.29102 1.5251 0.12275 1.4897-0.24254 2.315-0.76367 2.9278-1.8487 0.4627-0.8193 0.47371-0.88492 0.47371-2.8236 0.17821-1.5156-0.0947-2.1806-0.72442-3.4832-0.39843-0.82413-0.72443-1.5781-0.72445-1.6755-1e-5 -0.12841 0.8274-0.17704 3.0121-0.17704 3.5984 0 4.0594-0.11866 5.143-1.3238 0.3798-0.42244 0.69054-0.86358 0.69054-0.98033s0.30502-0.71575 0.30502-1.4177c0-1.0956-0.0485-1.2913-0.53275-2.148-0.50515-0.89371-0.52388-0.97777-0.36147-1.6228 0.20918-0.83073 0.0806-1.886-0.33419-2.7428-0.2218-0.45818-0.32146-1.006-0.34818-1.9137-0.0382-1.2963-0.36164-2.2408-0.92867-2.7114-0.16963-0.14078-0.24089-0.47287-0.24326-1.1336-7e-3 -2.069-1.3088-3.5833-3.4738-4.0422-1.0616-0.22502-4.6837-0.19202-6.131 0.0558zm-17.504 16.975c-0.62703 0-1.0101-6.1e-4 -1.2602-0.0176-0.25008-0.0169-0.38207-0.0533-0.4715-0.13814-0.0447-0.0424-0.0805-0.10302-0.10245-0.19083-0.0219-0.0878-0.0344-0.20722-0.0432-0.391-0.0176-0.36759-0.0185-0.99443-0.0185-2.1178v-8.7227c0-1.1233 8.8e-4 -1.7502 0.0185-2.1178 9e-3 -0.18378 0.0213-0.30322 0.0432-0.39101 0.0219-0.0878 0.0577-0.14844 0.10245-0.19082 0.0894-0.0847 0.22143-0.1212 0.4715-0.13814 0.25006-0.0169 0.63319-0.0164 1.2602-0.0164h4.7372c0.62703 0 1.0102-5.3e-4 1.2602 0.0164 0.25004 0.0169 0.38212 0.0546 0.4715 0.13931 0.0447 0.0424 0.0805 0.10187 0.10244 0.18965 0.0219 0.0878 0.0344 0.20723 0.0432 0.39101 0.0176 0.36756 0.0185 0.99442 0.0185 2.1178v8.7227c0 1.1234-8.7e-4 1.7502-0.0185 2.1178-9e-3 0.18378-0.0213 0.3032-0.0432 0.391s-0.0578 0.14841-0.10244 0.19083c-0.0894 0.0849-0.22145 0.12118-0.4715 0.13814-0.25005 0.017-0.63319 0.0176-1.2602 0.0176z"/></svg>',flag:'<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -263.13)"><path transform="matrix(.26458 0 0 .26458 0 263.13)" d="m19.73 0.85156c-2.6026 0.010149-5.1413 1.5828-6.2891 4.0898-0.94198 2.0576-0.84397 3.7648 0.41602 7.3066 1.1961 3.3623 1.1211-0.45338 1.1211 57.354 0 43.293 0.04982 53.213 0.26758 54.053 0.35827 1.3812 1.0117 2.1539 2.4395 2.8867 0.82586 0.42406 1.4777 0.61006 2.1191 0.60742 1.7309-0.00828 3.6006-1.2213 4.3379-2.8145l0.42188-0.91406 0.10547-54.09 0.10547-54.088 0.44531-1.5684c0.24428-0.86166 0.54324-1.753 0.66602-1.9824 0.6911-1.2914 1.0423-3.4345 0.80273-4.8984-0.46518-2.8431-2.2915-4.8563-5.1641-5.6914-0.59125-0.17187-1.1943-0.25234-1.7949-0.25zm33.09 7.1973c-5.9403-0.01372-12.721 1.9223-17.947 5.125-1.8658 1.1433-2.4721 1.7787-3.3242 3.4863-1.2926 2.5905-1.2317 1.1739-1.2305 28.242 7.37e-4 16.259 0.071905 24.883 0.20898 25.377 0.11421 0.41118 0.45443 0.94391 0.75586 1.1816 0.84531 0.66705 1.7966 0.41822 4.998-1.3066 7.0886-3.8192 14.035-5.6115 19.346-4.9902 4.0124 0.46934 7.2601 1.8227 16.219 6.7617 7.6678 4.2274 12.362 6.2285 15.891 6.7734 0.88803 0.13682 1.7515 0.27848 1.918 0.3125 0.95556 0.1937 3.4331 0.05525 5.3828-0.30078 4.7794-0.87303 9.4358-3.1011 14.447-6.9102 2.7261-2.072 3.4768-2.8749 4.3281-4.6367 1.4932-3.0901 1.373-0.58066 1.373-28.748v-25.264l-0.42383-0.57031c-0.30726-0.41318-0.62971-0.5867-1.1719-0.63281-0.85518-0.072378-1.4031 0.21265-4.9648 2.5879-5.3758 3.585-9.6034 5.5326-14.299 6.5859-2.069 0.46382-2.6422 0.51403-4.8711 0.41992-2.983-0.12586-5.0835-0.62042-7.9023-1.8574-2.0668-0.90701-3.2142-1.5313-9.457-5.1523-8.5897-4.9824-13.012-6.473-19.275-6.4844z"/></g></svg>',heart:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 4.435c-1.989-5.399-12-4.597-12 3.568 0 4.068 3.06 9.481 12 14.997 8.94-5.516 12-10.929 12-14.997 0-8.118-10-8.999-12-3.568z"/></svg>',arrow:'<svg version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path transform="matrix(.94168 0 0 .55283 9.308 15.671)" d="m6.0446-7.4513-7.4335 0.025536-7.4335-0.025536 3.6947-6.4504 3.7389-6.4249 3.7389 6.4249z"/></svg>',shield:'<svg version="1.1" viewBox="0 0 33.867 33.867" xmlns="http://www.w3.org/2000/svg"><g transform="translate(0 -164.71)"><g><path d="m16.933 165.76c-0.1797 0-0.13703 0.0137-0.17283 0.0218-0.0358 8e-3 -0.07591 0.0185-0.12371 0.0309-0.09561 0.0247-0.22348 0.0597-0.38205 0.10371-0.31715 0.088-0.75679 0.21269-1.2862 0.36568-1.0589 0.30596-2.4732 0.72157-3.9552 1.1607-2.9639 0.87828-6.1868 1.8493-7.3845 2.2359l-0.61856 0.20012c-0.23069 0.0743-0.38718 0.28887-0.38751 0.53124v1.0133c0 0.6171 0.090013 1.9563 0.20012 3.0746 1.1681 11.864 5.4411 19.527 12.791 22.536 0.06697 0.0275 0.13865 0.0417 0.21104 0.0418h-0.10916l0.98424 0.40206c0.13062 0.0541 0.27688 0.0567 0.40934 7e-3l0.79321-0.30018c2.2647-0.85244 4.1433-2.0861 5.9491-3.9024 3.3688-3.3885 5.5235-8.2832 6.6695-14.978 0.28941-1.6907 0.71823-5.7798 0.72044-7.0243l0.0019-0.86962c-3.31e-4 -0.24238-0.15682-0.45691-0.38751-0.53125l-0.61856-0.20011c-1.1977-0.38662-4.4207-1.3576-7.3845-2.2359-1.4819-0.43914-2.8962-0.85474-3.9551-1.1607-0.52946-0.15298-0.97091-0.27761-1.2881-0.36568-0.15858-0.0441-0.28462-0.079-0.38023-0.1037-0.0478-0.0123-0.08791-0.0228-0.12371-0.0309-0.0358-8e-3 0.0069-0.0218-0.17283-0.0218z"/></g></g></svg>'};function Me(e){var n=e.otherProps||{};return u("span",Te({style:{verticalAlign:"middle"},className:"icon "+(e.className||""),dangerouslySetInnerHTML:{__html:Se[e.name]}},n))}function Ee(e){return u("div",{className:"popup-wrap"},e.button,e.isOpened?u("div",{className:"popup background-box styled-box"},e.popup):null)}function Ie(e){return u("div",{className:"popup-body background-box"},e.children)}function Le(e){return u("div",{className:"popup-footer background-box-outline"},e.children)}function Oe(e){var n=e.size||40,t={borderRadius:"50%",width:n,height:n},o=$(!1),r=o[0],a=o[1],i=$(e.src),s=i[0],l=i[1];return r?u("span",{className:"pp-custom background-accent",style:t},e.name.substring(0,1)):u("img",{src:s,alt:"PP",loading:"lazy",onError:function(e){var n=ie("default_avatar");n&&s!==n?l(n):a(!0)},style:t})}function Re(e){var n=e.time.split(/[- :]/),t=new Date(Date.UTC(n[0],n[1]-1,n[2],n[3],n[4],n[5])),o=t.toLocaleString(),r=$(s()),a=r[0],i=r[1];function s(){return function(e){var n=Math.floor((new Date-e)/1e3),t=Math.floor(n/31536e3);function o(e){return se("ago"+e+(1!==t?"s":""),{"*":t})}if(t>=1)return o("year");if((t=Math.floor(n/2592e3))>=1)return o("month");if((t=Math.floor(n/86400))>=1)return o("day");if((t=Math.floor(n/3600))>=1)return o("hour");if((t=Math.floor(n/60))>=1)return o("minute");return(t=Math.floor(n))>=5?o("second"):se("justNow")}(t)}var l=null;return G((function(){var e=new Date((new Date).getTime()-864e5);if(t>e)return l=setInterval((function(){i(s())}),1e4),function(){if(l)return clearInterval(l)}}),[]),u("span",{title:o},a)}function ze(e){var n=e.badge;return n?u("span",{className:"user-badge",style:{backgroundColor:"#"+n.background_color,color:"#"+n.color}},n.text):null}function He(e){e.length&&(e=e[0]);var n,t,o,r,a,i=0,s=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(i=e.selectionStart,s=e.selectionEnd):(t=document.selection.createRange())&&t.parentElement()==e&&(r=e.value.length,n=e.value.replace(/\r\n/g,"\n"),(o=e.createTextRange()).moveToBookmark(t.getBookmark()),(a=e.createTextRange()).collapse(!1),o.compareEndPoints("StartToEnd",a)>-1?i=s=r:(i=-o.moveStart("character",-r),i+=n.slice(0,i).split("\n").length-1,o.compareEndPoints("EndToEnd",a)>-1?s=r:(s=-o.moveEnd("character",-r),s+=n.slice(0,s).split("\n").length-1))),{start:i,end:s}}function Be(e,n,t){if(e.length&&(e=e[0]),arguments.length<3&&(t=n),"selectionStart"in e)setTimeout((function(){e.selectionStart=n,e.selectionEnd=t}),1);else if(e.createTextRange){var o=e.createTextRange();o.moveStart("character",n),o.collapse(),o.moveEnd("character",t-n),o.select()}}var Pe={insertInline:function(e,n,t){var o=He(e),r=o.start,a=o.end,i=e.value,s=i.substring(0,r),l=i.substring(r,a),c=s.length+n.length;return[n+(l=l||t)+n,c,c+l.length]},insertQuote:function(e){var n=He(e),t=n.start,o=n.end,r=e.value,a=r.substring(0,t),i=r.substring(t,o),s=!a.match(/(\n\s*$|^$)/),l=(s?"\n":"")+"> "+(i=i||"Quoted Text")+"\n\n",c=a.length+2+(s?1:0);return[l,c,c+i.length]},insertCode:function(e){var n="Language",t=He(e),o=t.start,r=t.end,a=e.value,i=a.substring(0,o),s=a.substring(o,r),l=!i.match(/(\n\s*$|^$)/),c=(l?"\n":"")+"```"+n+"\n"+(s=s||"Code")+"\n```\n",u=3+(l?1:0),d=i.length+u;return[c,d,d+n.length]},insertLink:function(e){var n="Description",t="Link",o=He(e),r=o.start,a=o.end,i=e.value,s=i.substring(0,r),l=i.substring(r,a),c="["+(l||n)+"](Link)",u=l?s.length+3+l.length:s.length+1;return[c,u,l?u+t.length:u+n.length]}};function Ue(e,n,t){"string"==typeof n&&(n=[n]),n.forEach((function(n){e.addEventListener(n,t)}))}function Ae(e){return e.getBoundingClientRect()}var De=null,Fe=function(){function e(){}return e.lst=function(e){IFRAME_CROSS_MESSENGER.post("lst",{token:e})},e.callback=function(e,n){IFRAME_CROSS_MESSENGER.post("callback",{type:e,id:n})},e.resizeIframe=function(){var e=document.body.scrollHeight+60;De!==e&&(De=e,IFRAME_CROSS_MESSENGER.post("iframeResize",{height:e}))},e.scrollToElement=function(e,n){void 0===n&&(n=!1);var t=Ae(e);IFRAME_CROSS_MESSENGER.post("scrollToElement",{left:t.left,top:t.top,height:t.height,setToTop:n?1:0})},e.fixScrollForNewComments=function(e,n,t){IFRAME_CROSS_MESSENGER.post("fixScrollForNewComments",{id:e,height:n,top:t})},e.openImageModal=function(e){IFRAME_CROSS_MESSENGER.post("openImageModal",{src:e})},e.openPopupMessage=function(e){IFRAME_CROSS_MESSENGER.post("openPopupMessage",{text:e,style:window.customUiHandler.getCSS(customUiHandler.popupCSS)+"   \n                padding:12px;\n                color: #"+window.colors.colorObj.textOnBox+";\n                background: #"+window.colors.colorObj.box+";\n            ",buttonStyle:window.customUiHandler.getCSS(customUiHandler.popupButtonCSS)+"\n                color: #"+window.colors.colorObj.textOnAccent+";\n                background: #"+window.colors.colorObj.accent+";\n            ",close:se("close")})},e}();function je(){return(je=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function Ve(){var e=ae("authData"),n=we("user"),t=n[0],o=n[1],r=we("userState"),a=r[0],i=r[1];function s(){var e=this;"function"==typeof document.requestStorageAccess&&document.requestStorageAccess().then((function(){e.checkLogin()}))}function l(n,t){void 0===n&&(n=!1),void 0===t&&(t=!1),s(),function(e){window.open(e,"_blank","menubar=no,toolbar=no,location=no,scrollbars=yes,resizable=yes,width=600,height=600")}(ne("hyvor"===e.type?"/api/embed/login":"/web-api/openid-login",{websiteId:ae("website.id"),pageId:ae("page.id"),isSignup:n,isLogout:t}))}return window.user=t,window.setUser=function(e){o(e.user),i(e.userState),config.token=e.token,Fe.lst(e.lst)},[t,a,{login:l,signup:function(){s(),l(!0)},logout:function(){o(null),i(null),config.token=null,l(!1,!0)},setUserState:i,updateUserState:function(e){return i(je({},a,e))}}]}function qe(){return Ve()[2]}function $e(e){var n,t={width:(e.size||15)+"px",height:(e.size||15)+"px"};return u("div",{className:"loader",style:{padding:(null!=(n=e.spacing)?n:0)+"px"}},[1,2,3].map((function(e){return u("div",{className:"bounce background-accent bounce"+e,style:t})})))}var Ge={emoji:/:([a-zA-Z0-9-_+]*)(:?)$/i,mention:null};function Ke(e,n){return(Ke=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var We=null;function Je(e){var n=$(null===We),t=n[0],o=n[1];return G((function(){null===We&&te.get({url:"/res/emoji/emoji.json",bare:!0,success:function(e){We=JSON.parse(e),o(!1)}})}),[]),t?u($e,{size:"15",spacing:"20"}):u(Xe,e)}function Xe(e){var n=$(9),t=n[0],o=n[1],r=$(null),a=r[0],i=r[1],s=K(null),l=K({}),c=e.emojiSearch;We.sort((function(e,n){return e[4]-n[4]}));for(var d,m=[{id:0,name:"Symbols",nodes:[],sort:7},{id:1,name:"Activities",nodes:[],sort:5},{id:2,name:"Flags",nodes:[],sort:9},{id:3,name:"Travel & Places",nodes:[],sort:6},{id:4,name:"Food & Drink",nodes:[],sort:4},{id:5,name:"Animals & Nature",nodes:[],sort:3},{id:6,name:"People & Body",nodes:[],sort:2},{id:7,name:"Objects",nodes:[],sort:8},{id:8,name:"Skin Tones",nodes:[],sort:10},{id:9,name:"Smileys & Emotion",nodes:[],sort:1}],p=[],f=0,v=We.length;f<v;f++){var g=We[f],h={sheetX:(d=g)[0],sheetY:d[1],shortName:d[2],categoryId:d[3],sortOrder:d[4],unicode:d[5]},_=m[h.categoryId];(!c||h.shortName.includes(c))&&(_.nodes.push(h),void 0===_.icon&&(_.icon=!0,p.push(h)))}return p.sort((function(e,n){return m[e.categoryId].sort-m[n.categoryId].sort})),m.sort((function(e,n){return e.sort-n.sort})),u("div",{className:"emoji-panel"},c?null:u("div",{className:"ep-header"},p.map((function(e){return u("span",{className:"eph-icon"+(t==e.categoryId?" active":""),onClick:function(){return function(e){o(e);var n=l.current[e];n&&s&&(s.current.scrollTop=0,s.current.scrollTop=Ae(n).top-Ae(s.current).top,i(null))}(e.categoryId)}},u(Qe,{dataObj:e}))}))),u("div",{className:"ep-body",ref:s,onScroll:function(){var e,n=Ae(s.current).top;if((e=s.current).scrollTop>=e.scrollHeight-e.clientHeight)return o(8);for(var t=null,r=0,a=m.length;r<a;r++){var i=m[r].id,c=l.current[i];c&&Ae(c).top-5<=n&&(t=i)}null!==t&&o(t)}},u(Ye,{data:m,onTextAddition:e.onTextAddition,onMouseEnter:function(e){return i(e)},onCataRef:function(e,n){return l.current[n]=e}})),u("div",{className:"ep-footer"},a?u("span",{className:"eph-active"},u(Qe,{dataObj:a}),u("span",{className:"epha-name"},":",a.shortName,":")):null))}var Ye=function(e){var n,t;function o(){return e.apply(this,arguments)||this}return t=e,(n=o).prototype=Object.create(t.prototype),n.prototype.constructor=n,Ke(n,t),o.prototype.render=function(){var e=this,n=this.props.data.map((function(n){return n.nodes.length?u("div",{ref:function(t){return e.props.onCataRef(t,n.id)},key:n.id,className:"ep-cat"},u("div",{className:"epc-title"},n.name),u("div",null,n.nodes.map((function(n){return u(Qe,{key:n.shortName,dataObj:n,onClick:function(){e.props.onTextAddition(" :"+n.shortName+": ",Ge.emoji)},onMouseEnter:function(){e.props.onMouseEnter(n)}})})))):null}));return u("div",null,n)},o}(p);function Qe(e){for(var n=e.dataObj.unicode.split("-"),t=[],o=0;o<n.length;o++)t.push("0x"+n[o]);var r=String.fromCodePoint.apply(String,t);return u("span",{className:"emoji-inline",onClick:e.onClick||null,onMouseEnter:e.onMouseEnter||null},r)}var Ze="button-filled rounded-button background-accent",en={button:Ze,buttonSmall:Ze+" small",input:"background-box rounded-box"};function nn(e){return Fe.openPopupMessage(e)}function tn(e){var n=$(!1),t=n[0],o=n[1],r=$(""),a=r[0],i=r[1],s=K(null),l=""===a.trim();function c(n,t){void 0===t&&(t=""),e.onTextAddition("\n!["+t+"]("+n+")\n\n"),e.onPanelChange(null)}function d(e){nn(e),o(!1)}return u("div",{className:"image-panel"},t?u($e,{size:"15"}):u(m,null,u("div",{className:"ip-left"},u("button",{className:en.buttonSmall,onClick:function(){return s.current.click()}},se("uploadImage")),u("input",{ref:s,type:"file",onChange:function(){o(!0);var n=s.current.files[0]||null;if(n){if("image/jpeg"!==n.type&&"image/png"!==n.type&&"image/gif"!==n.type&&"image/webp"!==n.type)return d("Only PNG , GIF and JPEG images are allowed");var t=ae("meta.maxUploadSize");if(n.size>1e6*t)return d("Image is too large (Max "+t+"MB)");var r=new FormData;r.append("image",n),te.post({url:oe("misc/upload"),data:r,formData:!0,complete:function(){o(!1),e.onPanelChange(null)},success:function(e){if(!e.url)return d("Something went wrong in uploading the image. Please try again  later.");c(e.url,n.name)},error:function(){return d("Unable to upload. Please check your network connection.")}})}},style:{display:"none"}})),u("span",{className:"ip-or"},se("or")),u("div",{className:"ip-right"},u("input",{type:"text",placeholder:se("pasteURL"),className:"background-box rounded-box",value:a,onInput:function(e){return i(e.target.value)}}),u("button",{className:en.buttonSmall+(l?" disabled":""),onClick:function(){return l?null:c(a)}},se("add")))))}function on(e){var n=$(""),t=n[0],o=n[1],r=$(!1),a=r[0],i=r[1],s=$(null),l=s[0],c=s[1],d=K(null),p=K(null);return G((function(){if(""===t.trim())return c(null);var e;void 0===e&&(e=0),d.current&&d.current.abort(),i(!0),d.current=te.get({url:"https://api.tenor.com/v1/search",bare:!0,data:{key:"B78YRG1PAJIN",q:t,limit:20,media_filter:"basic"},success:function(e){i(!1);var n=JSON.parse(e);c(n.results)}})}),[t]),G((function(){p.current.focus()}),[]),u("div",{className:"gif-panel"},u("input",{className:en.input,type:"text",ref:p,placeholder:se("search")+" GIF...",value:t,onInput:function(e){return o(e.target.value)}}),null!==l||a?u(m,null,u("div",{className:"gif-view"},a?u($e,{size:"15",spacing:"20"}):l.length?l.map((function(n){return u("img",{src:n.media[0].nanogif.url,title:n.title,onClick:function(){return t=n.media[0].gif.url,void 0===(o=n.title)&&(o=""),e.onTextAddition("\n!["+o+"]("+t+")\n\n"),void e.onPanelChange(null);var t,o}})})):u("div",{className:"no-results"},se("noResults"))),u("div",{className:"gif-footer"},se("poweredBy")," ",u("a",{href:"https://tenor.com/",target:"_blank",rel:"nofollow"},"Tenor"))):null)}function rn(e,n){return e.length>n?e.substr(0,n)+"...":e}function an(e){return(e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]}function sn(e){var n=K(null),t=$(null),o=t[0],r=t[1];return G((function(){var e=n.current;e.scrollHeight>800&&r(!0),he(_e("spoiler",e),(function(e){e.dataset.text=se("spoiler"),e.classList.add("hidden"),e.addEventListener("click",(function(){return e.classList.remove("hidden")}))})),he(_e("inline-spoiler",e),(function(e){var n,t=["hidden","background-accent","color-accent"];(n=e.classList).add.apply(n,t),e.addEventListener("click",(function(){var n;return(n=e.classList).remove.apply(n,t)}))})),he(_e("math",e),(function(e){var n=e.innerHTML;if(window.katex){var t=window.katex.renderToString(n,{throwOnError:!1});e.outerHTML=t}})),he(_e("parser-link-preview",e),(function(e){var n=e.innerHTML;e.href=n,e.target="_blank",te.get({url:re("misc/link-preview"),data:{url:n},success:function(t){if(!t.image||!t.title)return;e.innerHTML="",e.className="link-preview",e.rel="ugc";var o=document.createElement("div"),r=document.createElement("img");o.className="image-container",r.src=t.image,r.onerror=function(){o.style.display="none"},o.appendChild(r),e.appendChild(o);var a=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div");a.className="text-container",i.className="title",i.innerHTML=rn(t.title,160),s.className="description",s.innerHTML=rn(t.description,260),l.className="domain",l.innerHTML=an(t.final_host||n).replace("www.",""),a.appendChild(i),a.appendChild(s),a.appendChild(l),e.appendChild(a)}})})),he(_e("twitter-embed",e),(function(n){if(window.twttr&&window.twttr.widgets)o();else{var t=document.createElement("script");t.src="https://platform.twitter.com/widgets.js",document.body.appendChild(t),t.onload=o}function o(){he(_e("twitter-embed",e),(function(e){e.classList.remove("twitter-embed");var n=e.getAttribute("tweetID");twttr.widgets.createTweet(n,e)}))}})),he(e.getElementsByTagName("img"),(function(e){e.addEventListener("click",(function(){Fe.openImageModal(e.src)})),e.addEventListener("load",(function(){Fe.resizeIframe()}))})),he(e.getElementsByTagName("a.link"),(function(e){e.classList.add("color-accent")}))}),[]),u("div",{className:"content-div"},u("content",{ref:n,dangerouslySetInnerHTML:{__html:e.html}}),null!==o?u("div",{className:"overflow",onClick:function(){return n.current.style.maxHeight=!0===o?"initial":"800px",void r(!o)}},se(!0===o?"showMore":"showLess")):null)}function ln(e){var n=$(!1),t=n[0],o=n[1],r=$(""),a=r[0],i=r[1],s=K(null);return G((function(){if(s.current&&s.current.abort(),o(!0),""===e.comment.trim())return o(!1),void i("");s.current=te.get({url:re("misc/parse-comment"),data:{markdown:e.comment,website_id:ae("website.id")},success:function(e){i(e.html),o(!1)}})}),[e.comment]),u("div",{className:"preview-panel"},t?u($e,{size:"15"}):""===a.trim()?u("div",{className:"no-results"},se("typeToPreview")):u(sn,{html:a}))}function cn(){var e=we("comments_count",ae("page.commentsCount")||0),n=e[0],t=e[1];return[n,{increase:function(){return t(n+1)},decrease:function(){return t(Math.max(n-1,0))}}]}function un(){var e=we("read_comments",[]),n=e[0],t=e[1];return[n,function(e){return t([e].concat(n))}]}function dn(){var e=Ce(),n=e[0],t=e[1],o=we(null),r=o[0],a=o[1],i=Ve(),s=i[0],l=i[1],c=un(),u=c[0],d=c[1];function m(e){r&&ve(t,r,d);var o=function(e){var t=n.PARENT_COMMENTS,o=null,a=!r,i=null;function c(t){for(var d=0;d<t.length;d++){var m=t[d];if(i)break;if(a){if("next"===e){i=m.id;break}if("nextUnread"===e&&pe(m,s,l,u)){i=m.id;break}}else if(m.id==r&&(a=!0,"previous"===e)){if(o){i=o.id;break}return}o=m,!i&&n[m.id]&&c(n[m.id])}}t&&c(t);return i}(e);null!==o&&a(o)}function p(e){var n=document.querySelector(".comment.active");if(n){var t=n.querySelector({reply:".reply-btn",upvote:".vote-btn.up",downvote:".vote-btn.down"}[e]);t&&t.click()}}return[r,a,function(e,n){var t;if(void 0===n&&(n=null),ie("is_keyboard_navigation_on"))switch(e){case"n":(t=document.getElementsByTagName("textarea"))[0]&&t[0].focus();break;case"c":m("next");break;case"x":m("previous");break;case"z":m("nextUnread");break;case"r":p("reply");break;case"Escape":a(null);break;case"u":p("upvote");break;case"i":p("downvote")}}]}var mn=function(){function e(){}return e.get=function(e){try{return window.localStorage.getItem(e)||""}catch(e){}},e.set=function(e,n){try{window.localStorage.setItem(e,n)}catch(e){}},e.remove=function(e){try{window.localStorage.removeItem(e)}catch(e){}},e}();function pn(e){var n=Ve(),t=n[0],o=n[2],r=ae("authData"),a=Ce(!0),i=cn()[1],s=dn()[1],l="comment",c="commentButtonText";e.replyingTo?(l="reply",c="replyButtonText"):e.editingCommentId&&(l="edit",c="edit");var d=ie("is_guest_commenting_on"),m=ie("guest_commenting_email"),p=null!==t,f=!p&&d,v=!p&&!d,g=K(null),h=K(null),_=$(!!e.autoFocus),b=_[0],y=_[1],w=$(!1),k=w[0],x=w[1],N=$(!1),C=N[0],T=N[1],S=$(e.startValue||""),M=S[0],E=S[1],I=$(null),L=I[0],O=I[1],R=$(""),z=R[0],H=R[1],B=$(""),P=B[0],U=B[1],A=K(null),D=K(null),F=$(null),j=F[0],V=F[1],q=$(null),W=q[0],J=q[1],X=$(""),Y=X[0],Q=X[1];function Z(){!function(e,n){void 0===n&&(n={});var t=n.minHeight||70,o=window.scrollY;e.style.height="auto",e.style.height=Math.max(e.scrollHeight,t)+"px",window.scrollTo(window.scrollX,o),"function"==typeof n.afterResize&&n.afterResize()}(g.current,{minHeight:40,afterResize:function(){Fe.resizeIframe()}})}function ee(){var e=He(g.current).start;return{cLeft:M.substring(0,e),cRight:M.substring(e)}}var ne=K(null);function re(e,n){void 0===n&&(n=null);var t=g.current,o=He(t),r=ee(),a=r.cLeft,i=r.cRight;n&&(a=a.replace(n,""));var s=o.start+e.length;E(a+e+i),t.focus(),Be(t,s)}function le(){if(O(null),M.length>ie("comments_char_limit"))return O(se("commentCharLimit"));var n={comment:M,pageId:ae("page.id")};if("reply"===l)n.replyTo=e.replyingTo,mn.remove("draft_reply_"+e.replyingTo);else{if("edit"===l)return function(){O(null);var n={comment:M};T(!0),te.post({url:oe("comment/"+e.editingCommentId+"/edit"),data:n,complete:function(){T(!1)},success:function(n){E(""),a.update(e.editingCommentId,{body:n.body,bodyHTML:n.bodyHTML}),e.onCancel&&e.onCancel(),Fe.callback("comment-edit",n.data)}})}();mn.remove("draft_"+ae("page.id"))}if(!p){var t=z.trim(),o=P.trim();if(""===t)return O(se("guestNameFill")),void A.current.focus();if("required"===m&&""===o)return O(se("guestEmailRequired")),void D.current.focus();if(o&&!/^[^@]+@[^\.]+\..+$/.test(o))return O(se("guestEmailInvalid")),void D.current.focus();n.guestName=t,n.guestEmail=o}T(!0),te.post({url:oe("comments/publish"),data:n,complete:function(){T(!1)},success:function(n){E(""),H(""),U(""),Ne.addUsers(n.users),n.data.isCurrentUser=!0,a.add(n.data),i.increase(),s(n.data.id),g.current.blur(),e.onCancel&&e.onCancel(),Fe.callback("comment",n.data.id),Fe.callback("comment-publish",n.publish_data)},error:function(e){O(e||"Something went wrong. Please try again")}})}function ce(e){var n=e.type,t="sso"===r.type&&"stateless"===r.ssoType,a=t?r[n+"URL"]:null,i=t?null:o[n];if("sso"===r.type&&"openid"===r.ssoType&&"signup"===n)return null;return!0!==a&&a||i?u("a",{className:"color-accent wls-"+n,href:a,target:"_parent",onClick:i},se(n)):!0===a&&u("span",{className:"color-accent wls-"+n,style:{cursor:"pointer"},onClick:function(){Fe.callback("sso-"+n,null)}},se(n))}return G((function(){Z();var n=ae("page.id");"comment"===l&&mn.get("draft_"+n)?E(mn.get("draft_"+n)):"reply"===l&&mn.get("draft_reply_"+e.replyingTo)&&E(mn.get("draft_reply_"+e.replyingTo)),e.autoFocus&&g.current.focus()}),[]),G((function(){window.setTimeout(Z,0)}),[M]),u("div",{className:"writer-wrap"+(C?" publishing":"")},u("div",{className:"writer rounded-box background-box-outline"},M||k?null:u("div",{ref:h,className:"w-placeholder"},e.placeholder),u("div",{className:"w-txtarea-wrap"},u("textarea",{rows:"1",maxLength:1e4,ref:g,onKeyDown:function(n){var t={replyTo:e.replyingTo?e.replyingTo:null,pageId:ae("page.id"),time:Date.now()};if(null!==ne.current&&clearTimeout(ne.current),ne.current=setTimeout((function(){ne.current=null,te.post({url:oe("comments/typing"),data:t})}),1e3),13===n.keyCode&&(n.ctrlKey||n.metaKey)&&""!==M.trim())return le();if(27===n.keyCode&&e.onCancel)return e.onCancel();if(13===n.keyCode){var o,r=ee().cLeft.split("\n"),a=r[r.length-1];if(o=a.match(/^(\t+)/))n.preventDefault(),re("\n"+o[1]);if(o=a.match(/^[ \t]*(\d+)\. .+$/))n.preventDefault(),re("\n"+(parseInt(o[1])+1)+". ");(o=a.match(/^[ \t]*(\*+) .+$/))&&(n.preventDefault(),re("\n* "))}},onInput:function(n){E(n.target.value),Z(),"comment"===l?mn.set("draft_"+ae("page.id"),n.target.value):"reply"===l&&mn.set("draft_reply_"+e.replyingTo,n.target.value)},onKeyUp:function(){var e=ee().cLeft.match(/:([a-zA-Z0-9-_+]*)(:?)$/i);e&&ie("is_emoji_enabled")?(V("emoji"),Q(e[1].toLowerCase())):(V(null),Q("")),""===M&&O(null)},onFocus:function(){x(!0),b||y(!0)},onBlur:function(){x(!1)},value:M}),p||M?null:u("div",{className:"wls"}," ",u(ce,{type:"login"}),u(ce,{type:"signup"}))),b?u(fn,{onMarkdownButtonClick:function(e){var n={bold:function(){return Pe.insertInline(g.current,"*","Bold Text")},italic:function(){return Pe.insertInline(g.current,"_","Italic Text")},underline:function(){return Pe.insertInline(g.current,"__","Underlined Text")},quote:function(){return Pe.insertQuote(g.current)},code:function(){return Pe.insertCode(g.current)},link:function(){return Pe.insertLink(g.current)}};if(n[e]){var t=n[e](),o=t[0],r=t[1],a=t[2],i="undefined"!=typeof InstallTrigger,s=g.current;if(i){var l=s.value,c=l.substring(0,r),u=l.substring(a);E(c+o+u)}else s.focus(),document.execCommand("insertText",!1,o);Be(s,r,a),setTimeout((function(){return s.focus()}),1)}},onPanelOpen:function(e){return J(W===e?null:e)},commentLength:M.length,openedPanel:W}):null,j||W?u(hn,{type:j||W,onPanelChange:J,onTextAddition:re,comment:M,emojiSearch:Y}):null),v?u(vn,null):null,ae("page.isClosed")?u(gn,null):null,""!==M.trim()||e.onCancel?u("div",{className:"writer-bottom"},f?u("div",{className:"auth-selector"},u("span",null,se("asGuest"))," ",se("or")," ",u((function(){var e="sso"===r.type&&"stateless"===r.ssoType,n=e?r.loginURL:null;return u("a",{className:"bar-text-btn color-accent",onClick:e?null:o.login,href:n,target:"_parent"},se("loginVerb"))}),null)):null,u("div",{className:"buttons-view"},f?u("div",{className:"guest-commenting-view rounded-box background-box-outline"},u("input",{type:"text",name:"Name",placeholder:se("guestName"),value:z,onChange:function(e){return H(e.target.value)},maxLength:25,ref:A,className:"border-box-outline-light"}),"no"!==m?u("input",{type:"email",name:"Email",placeholder:se("guestEmail"),value:P,onChange:function(e){return U(e.target.value)},ref:D}):null):null,u("div",{className:"right-button-view"},e.onCancel?u("button",{className:"button-filled text-only",onClick:e.onCancel},se("cancel")):null,u("button",{className:"button-filled rounded-button background-accent"+(""===M.trim()?" disabled":""),onClick:le},se(c)))),L?u("div",{className:"error-view"},L):null):null)}function fn(e){var n=!1;e.commentLength>ie("comments_char_limit")&&(n=!0);var t=ie("comments_char_limit");function o(n){return u("span",{onMouseDown:function(){return e.onMarkdownButtonClick(n.name)}},u(Me,{name:n.name}))}function r(n){return u("span",{onMouseDown:function(){return e.onPanelOpen(n.name)},className:e.openedPanel===n.name?"color-accent":""},u(Me,{name:n.name}))}return u("div",{className:"w-bottom-buttons-view border-box-outline-light"},u("div",{className:"wbb-left"},ie("is_emoji_enabled")?u(r,{name:"emoji"}):null,ie("is_images_enabled")?u(m,null,u(r,{name:"image"}),u(r,{name:"gif"})):null,u(r,{name:"preview"})),u("div",null,u("span",{className:"counter"+(n?" exceed":"")},e.commentLength>t-10&&e.commentLength+"/"+t),u(o,{name:"bold"}),u(o,{name:"italic"}),u(o,{name:"underline"}),u(o,{name:"quote"}),u(o,{name:"code"}),u(o,{name:"link"})))}function vn(){var e=qe(),n=ae("authData"),t="sso"===n.type&&"stateless"===n.ssoType,o=t?n.loginURL:null,r=t?null:e.login;return!0!==o&&o||r?u("a",{className:"w-btn-popup color-box-light",href:o,target:"_parent",onClick:r},se("loginToComment")):!0===o&&u("span",{className:"w-btn-popup color-box-light",style:{cursor:"pointer"},onClick:function(){Fe.callback("sso-login",null)}},se("loginToComment"))}function gn(){return u("div",{className:"w-btn-popup color-box-light"},se("pageClosed"))}function hn(e){var n;return"emoji"===e.type?n=u(Je,e):"image"===e.type?n=u(tn,e):"gif"===e.type?n=u(on,e):"preview"===e.type&&(n=u(ln,e)),u("div",{className:"w-panel border-box-outline-light"},n)}function _n(e,n,t){var o,r,a,i,s=!1,l=!1,c={},u=0,d=0,m={sensitivity:7,interval:100,timeout:0,handleFocus:!1};function p(e){o=e.clientX,r=e.clientY}function f(e,t){if(d&&(d=clearTimeout(d)),Math.abs(a-o)+Math.abs(i-r)<m.sensitivity)return u=1,l?void 0:n.call(e,t);a=o,i=r,d=setTimeout((function(){f(e,t)}),m.interval)}function v(n){return s=!0,d&&(d=clearTimeout(d)),e.removeEventListener("mousemove",p,!1),1!==u&&(a=n.clientX,i=n.clientY,e.addEventListener("mousemove",p,!1),d=setTimeout((function(){f(e,n)}),m.interval)),this}function g(n){return s=!1,d&&(d=clearTimeout(d)),e.removeEventListener("mousemove",p,!1),1===u&&(d=setTimeout((function(){!function(e,n){d&&(d=clearTimeout(d)),u=0,l||t.call(e,n)}(e,n)}),m.timeout)),this}function h(t){s||(l=!0,n.call(e,t))}function _(n){!s&&l&&(l=!1,t.call(e,n))}function b(){e.removeEventListener("focus",h,!1),e.removeEventListener("blur",_,!1)}return c.options=function(n){var t=n.handleFocus!==m.handleFocus;return m=Object.assign({},m,n),t&&(m.handleFocus?(e.addEventListener("focus",h,!1),e.addEventListener("blur",_,!1)):b()),c},c.remove=function(){e&&(e.removeEventListener("mouseover",v,!1),e.removeEventListener("mouseout",g,!1),b())},e&&(e.addEventListener("mouseover",v,!1),e.addEventListener("mouseout",g,!1)),c}function bn(e){var n={display:"inline-block",fontSize:"0.7rem"};return"down"===e.side?n.transform="rotate(180deg)":"left"===e.side&&(n.transform="rotate(-90deg)"),u(Me,{name:"arrow",otherProps:{style:n}})}function yn(e){var n=e.data,t=$(!1),o=t[0],r=t[1],a=we("blockedUsers"),i=a[0],s=a[1],l=Ce(!0),c=Ve()[0];function d(e){te.post({url:oe("comment/"+n.id+"/moderate"),data:{action:e},error:function(){return nn("An error occurred on moderation action")}}),"delete"===e||"spam"===e?l.remove(n.id):"feature"===e||"unfeature"===e?l.update(n.id,{isFeatured:"feature"===e}):"love"!==e&&"unlove"!==e||l.update(n.id,{isLoved:"love"===e})}function p(e){return u("div",{className:"co-item background-box-outline-on-hover",onClick:function(){return function(e){e(),r(!1)}(e.onClick)}},e.name)}return u("div",{className:"comment-options "+(o?"active":"")},u("span",{className:"co-icon",onClick:function(){return r(!o)}},u(bn,{side:"down"})),o?u("div",{className:"co-pop background-box"},u(p,{name:se(n.userFlagged?"unflag":"flag"),onClick:function(){l.update(n.id,{userFlagged:!n.userFlagged}),te.post({url:oe("comment/"+n.id+"/flag")})}}),n.userId&&(n.userId!==c.id||n.userType!==c.type)&&u(p,{name:se("block"),onClick:function(){te.post({url:oe("user/block"),data:{userId:n.userId,userType:n.userType},success:function(){var e={blocked_user_id:n.userId,blocked_user_type:n.userType,user_id:c.id,user_type:c.type};s([].concat(i,[e]))},error:function(e){return nn(e)}})}}),ue(c)?u(m,null,u((function(e){return u("div",{className:"co-divider color-box-light border-box-outline-light"},e.name)}),{name:"Moderate"}),u(p,{name:"Delete",onClick:function(){return d("delete")}}),u(p,{name:"Mark as Spam",onClick:function(){return d("spam")}}),n.replyTo?null:u(p,{name:n.isFeatured?"Unfeature":"Feature",onClick:function(){return d(n.isFeatured?"unfeature":"feature")}}),u(p,{name:n.isLoved?"Unlove":"Love",onClick:function(){return d(n.isLoved?"unlove":"love")}})):null):null)}function wn(e){var n=e.number.toString();return n.replace(/[^0-9]/,""),u("span",{dangerouslySetInnerHTML:{__html:le(n)}})}function kn(){return(kn=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function xn(e){var n=ie("vote_type");return"none"===n?null:u(m,null,u(Nn,kn({type:"up"},e)),"both"===n?u(Nn,kn({type:"down"},e)):null)}function Nn(e){var n=Ve()[0],t=Ce(!0),o=e.type,r=Math.max(parseInt(e[o+"votes"]||0),0),a=K(null),i=K(null),s=$(!1),l=s[0],c=s[1];return G((function(){null===i.current&&r>0?i.current=_n(a.current,(function(){return c(!0)}),(function(){return c(!1)})):i.current&&0===r&&(i.current.remove(),c(!1),i.current=null)}),[r]),u("span",{ref:a,className:"vote-btn bar-text-btn color-accent background-psuedo-accent "+e.type+(e.status===o?" active":"")},u("span",{onClick:function(){return function(o){if(!ie("is_guest_voting_on")&&!n)return Fe.openPopupMessage(se("guestVote"));var r=e.status,a=o;r===a&&(a=null);var i=e.upvotes,s=e.downvotes;r?"up"===r?(i--,"down"===a&&s++):"down"===r&&(s--,"up"===a&&i++):"up"===a?i++:"down"===a&&s++,t.update(e.commentId,{upvotes:i,downvotes:s,userVote:a}),te.post({url:oe("comment/"+e.commentId+"/vote"),data:a?{voteType:a}:{}})}(o)}},u(Me,{name:"thumbs_"+o}),u("span",{className:"vote-num"},u(wn,{number:r}))),n&&l&&ie("is_vote_viewing_on")?u(Cn,{onClose:function(){return c(!1)},commentId:e.commentId,type:o}):null)}function Cn(e){var n=$(!1),t=n[0],o=n[1],r=$([]),a=r[0],i=r[1],s=$(!1),l=s[0],c=s[1],d=$(0),m=d[0],p=d[1];function f(n){void 0===n&&(n=0),te.get({url:oe("comment/"+e.commentId+"/voters"),data:{offset:n,type:e.type},success:function(n){if(!n.votes||!n.votes.length&&!n.guestVotesCount)return e.onClose();Ne.addUsers(n.users),o(!0),p(n.guestVotesCount),i(a.concat(n.votes)),c(n.hasMore)},error:e.onClose})}return G(f,[]),u("div",{className:"voters-view background-box styled-box"},t?u("div",null,a.map((function(e){var n=Ne.getUser(e.user_id,e.user_type);return u("div",{className:"vote-row",key:e.id},u(Oe,{src:n.picture,name:n.name,size:30}),u("span",{className:"v-name-view"},u("span",{className:"v-name"},n.name),n.username?u("span",{className:"v-username"},"@",n.username):null),u("span",{className:"v-time color-box-light"},u(Re,{time:e.created_at})))})),m>0&&u("div",{className:"vote-row"},u("span",{className:"guest-row"},se({single:"guest",multi:"guests",count:m},{"*":m}))),l?u("div",{className:"popup-has-more",onClick:function(){return f(a.length)}},u("span",null,se("loadMore"))):null):u($e,{size:"10",spacing:"10"}))}function Tn(e){var n=$(!1),t=n[0],o=n[1];function r(){o(!0),e.onClick(e.parentId,(function(){o(!1)}))}return e.parentId?u("div",{className:"load-more-text"},t?u($e,{size:"15",spacing:"10"}):u("span",{onClick:r},se("moreReplies"),"...")):u("div",{className:"load-more-block"},t?u($e,{size:"15"}):u("button",{className:"button-filled background-accent rounded-button",onClick:r},se("loadMoreComments")))}function Sn(e){return"off"!=ie("realtime_typing")&&e.typers.length>0&&u(m,null,u("div",{className:"popup-wrap"},u($e,{size:"6"})),u("div",{className:"popup-wrap"},u("div",{className:"typers-counter"},e.typers.length>1&&(e.typers.length<100?e.typers.length:"99+")),e.viewerOn&&"on_with_typer"==ie("realtime_typing")?u(Mn,{onClose:function(){return setViewerOn(!1)},typers:e.typers}):null))}function Mn(e){var n=$(!1),t=n[0],o=n[1],r=$([]),a=r[0],i=r[1];return G((function(){te.post({url:oe("comments/get-typers"),data:{websiteId:ae("website.id"),typers:JSON.stringify(e.typers)},success:function(n){if(!n.typers)return e.onClose();Ne.addUsers(n.typers);var t=n.data.filter((function(e){return null!==e.userId})),r=n.data.filter((function(e){return null==e.userId}));r.length>0&&i(t.push({userId:null,count:r.length})),i(t),o(!0)}})}),[]),u("div",{className:"typers-view styled-box background-box"},t?u("div",null,a.map((function(e){var n;return n=null==e.userId?{name:se({single:"guest",multi:"guests",count:e.count},{"*":e.count}),picture:null}:Ne.getUser(e.userId,e.userType),u("div",{className:"vote-row",key:e.userId},u(Oe,{src:n.picture,name:n.name,size:30}),u("span",{className:"v-name-view"},u("span",{className:"v-name"},n.name),n.username?u("span",{className:"v-username"},"@",n.username):null))}))):u($e,{size:"10",spacing:"10"}))}function En(){return(En=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function In(e){var n=$(null),t=n[0],o=n[1],r=$(!0),a=r[0],i=r[1],s=Ve()[0],l=K(null),c=ae("authData"),d=qe(),m=$(null),p=m[0],f=m[1];function v(n){(function(e,n){n.length||(n=[n]);var t,o=!0,r=n.length;for(t=0;t<r;t++)(e.target===n[t]||n[t].contains(e.target))&&(o=!1);return o})(n,l.current)&&(e.onClose(),n.stopPropagation())}G((function(){return"half"==e.type&&f("notifications"),te.get({url:oe("user/data"),data:{userId:e.userId,userType:e.userType},success:function(e){o(e),i(!1)},error:function(){e.onClose()}}),window.addEventListener("click",v,!0),function(){window.removeEventListener("click",v,!0)}}),[]);new Intl.DisplayNames([config.lang.name],{type:"region"});return u("div",{ref:l,className:"profile-popup background-box styled-box"+(null!==p&&"full"==e.type?" full":"")},a?u($e,{size:"10",spacing:"30"}):u("div",null,"full"==e.type?u("div",{className:"profile-row"},u("div",{className:"profile-left"},u(Oe,{size:null!==p&&"full"==e.type?120:50,name:e.aliasName||t.user.name,src:e.aliasPicture||t.user.picture})),u("div",{className:"profile-right"},u("div",null,u("div",{className:"profile-name"},e.aliasName||t.user.name,u("span",{className:"comment-tag background-box-outline"},se("commentsMulti",{"*":t.commenter.comments_count}))),!e.aliasName&&t.user.username?u("div",{className:"profile-username color-box-light"},"@",t.user.username):null),u("div",null,t.user.bio?u("div",{className:"profile-bio"},t.user.bio):null,t.user.country?u("div",{className:"profile-country"},t.user.country):null,t.user.url?u("div",{className:"profile-website color-accent"},u("a",{href:t.user.url,target:"_blank",rel:"nofollow noindex"},an(t.user.url)," ",u(Me,{name:"link"}))):null,t.user.websiteURL?u("div",{className:"profile-website color-accent"},u("a",{href:t.user.websiteURL,target:"_blank",rel:"nofollow noindex"},an(t.user.websiteURL)," ",u(Me,{name:"link"}))):null))):"",u("div",{className:"profile-button",style:{display:null===p&&ie("is_extended_user_profile_on")?"block":"none"}},u("button",{onClick:function(){return"full"==e.type?f("comments"):f("notifications")},className:"button-filled small rounded-button background-accent"},se("profileView"))),null!==p?u("div",{className:"profile-sections"},u("div",{className:"ps-nav"},"full"==e.type&&u(Hn,{name:"comments",activeSection:p,onSectionChange:f,id:e.userId,type:e.userType}),s&&s.id==e.userId&&s.type==e.userType&&u(Hn,{name:"notifications",activeSection:p,onSectionChange:f,id:e.userId,type:e.userType}),s&&s.id==e.userId&&s.type==e.userType&&"hyvor"==e.userType&&u(Hn,{name:"settings",activeSection:p,onSectionChange:f,id:e.userId,type:e.userType}),s&&s.id==e.userId&&s.type==e.userType&&u(Hn,{name:"blocked",activeSection:p,onSectionChange:f,id:e.userId,type:e.userType})),u("div",{className:"ps-view"},"comments"===p?u(Ln,{userId:e.userId,userType:e.userType}):null,"notifications"===p?u(On,{userId:e.userId,userType:e.userType}):null,"settings"===p&&"hyvor"==e.userType?u(Rn,{userId:e.userId,userType:e.userType}):null,"blocked"===p?u(zn,{userId:e.userId,userType:e.userType}):null),"stateless"!==c.ssoType?u("div",{className:"n-bottom background-box-outline"},s&&"hyvor"===s.type&&u("a",{href:ae("domains.auth")+"/account",onClick:function(){return read(null)},target:"_blank"},se("accountMy")),u("span",{onClick:d.logout},se("accountLogout"))):null):null))}function Ln(e){var n=$(!1),t=n[0],o=n[1],r=$(!1),a=r[0],i=r[1],s=we("userCommentsList"),l=s[0],c=s[1],d=we("userComments",{}),m=d[0],p=d[1],f=$(!1),v=f[0],g=f[1];function h(n){void 0===n&&(n=0),o(!0),n>0&&i(!0),te.get({url:oe("user/comments"),data:{userId:e.userId,userType:e.userType,offset:n},complete:function(){i(!1),o(!1)},success:function(e){c([].concat(l,e.commentsList)),p(En({},m,e.comments)),g(e.hasMore)}})}return G((function(){return h(),function(){c([])}}),[]),t?u($e,{size:10,spacing:30}):0===l.length?u("div",{className:"no-results color-box-light"},se("noResults")):u("div",null,l.map((function(e){return m[e]&&u("div",{className:"uc-wrap"},u("a",{className:"title color-box-light",href:ne(m[e].webpageURL,{"ht-comment-id":e}),target:"_blank"},m[e].webpageTitle||"Untitled"),u(Bn,{key:e,data:m[e],noReplies:!0,hasMore:v}))})),v?u("div",{className:"popup-has-more"},a?u($e,{size:"10"}):u("span",{onClick:function(){return h(l.length)}},se("loadMore"))):null)}function On(e){var n=$(!1),t=n[0],o=n[1],r=$([]),a=r[0],i=r[1],s=$(!1),l=s[0],c=s[1],d=$(!1),m=d[0],p=d[1],f=Ve(),v=(f[0],f[1]),g=f[2],h=dn()[1],_=Ce(!0),b=v.notifsCount;function y(e){void 0===e&&(e=0),o(!0),e>0&&p(!0),te.get({url:oe("notifs/get"),data:{offset:e},complete:function(){p(!1),o(!1)},success:function(e){i(a.concat(e.notifs)),c(e.hasMore)}})}function w(e){void 0===e&&(e=null),g.updateUserState({notifsCount:null===e?0:b-1}),i(a.map((function(n){return null!==e&&e!==n.id||(n.read=!0),n}))),te.post({url:oe("notifs/read"),data:{notifId:e}})}return G((function(){return y()}),[]),t?u($e,{size:10,spacing:30}):0===a.length?u("div",{className:"no-results color-box-light"},se("notificationsNo")):u("div",null,b>0?u("div",{className:"n-top"},u("span",{onClick:function(){return w(null)}},se("notificationsRead"))):null,a.map((function(e){var n=ne(e.url,{"ht-comment-id":e.comment_id}),t=_.isFound(e.comment_id);return u("a",{onClick:t?function(){return n=e.comment_id,t=e.id,void 0===n&&(n=null),void 0===t&&(t=null),w(t),void h(n);var n,t}:function(){return w(e.id)},className:"notif background-box-outline-on-hover"+(e.read?"":" not-read"),href:t?"#":n,target:t?"":"_blank"},u(Oe,{size:30,src:e.picture,name:e.name}),u("div",{className:"n-right"},u("div",{className:"n-text"},se("reply"===e.type?"notificationsReply":"notificationsMention",{"{name}":e.name})),u("div",{className:"n-pw color-box-light"},u("div",null,e.page),u("div",null,e.website))))})),l?u("div",{className:"popup-has-more"},m?u($e,{size:"10"}):u("span",{onClick:function(){return y(a.length)}},se("notificationsLoadMore"))):null)}function Rn(e){var n=$(!0),t=n[0],o=n[1],r=$(!0),a=r[0],i=r[1],s=$(!0),l=s[0],c=s[1],d=K(!0);return G((function(){te.get({url:oe("user/get-settings"),complete:function(){return o(!1)},success:function(e){i(e.emailReply),c(e.emailMention)}})}),[]),G((function(){d.current?d.current=!1:te.post({url:oe("user/save-settings"),data:{emailReply:a,emailMention:l},success:function(){}})}),[l,a]),t?u($e,{size:"10",spacing:"30"}):u("div",{class:"profile-settings"},u("div",{className:"setting text-center"},u("div",{className:"text"},"Email Settings")),u("div",{className:"setting"},u("div",{className:"text"},"Replies"),u("input",{type:"checkbox",checked:a,onChange:function(e){return i(e.target.checked)}})),u("div",{className:"setting"},u("div",{className:"text"},"Mentions"),u("input",{type:"checkbox",checked:l,onChange:function(e){return c(e.target.checked)}})))}function zn(e){var n=$(!0),t=n[0],o=n[1],r=$(!0),a=r[0],i=r[1],s=$(!1),l=s[0],c=s[1],d=$(null),m=d[0],p=d[1],f=Ve()[0],v=we("blockedUsers"),g=v[0],h=v[1];function _(e){void 0===e&&(e=0),o(!0),e>0&&i(!0),te.get({url:oe("user/get-blocked-list"),data:{offset:e},complete:function(){i(!1),o(!1)},success:function(e){Ne.addUsers(e.users),p(e.data),c(e.hasMore)}})}return G((function(){return _()}),[]),t?u($e,{size:10,spacing:30}):0===m.length?u("div",{className:"no-results color-box-light"},se("noResults")):u("div",{className:"user-block-view"},m.map((function(e,n){var t=Ne.getUser(e.user_id,e.user_type);return u("div",{className:"ub-row"},u(Oe,{size:35,src:t.picture,name:t.name}),u("div",{className:"ub-name"},ce(t)),u("button",{onClick:function(){return function(e,n,t){te.post({url:oe("user/block"),data:{userId:e,userType:n},success:function(){var o=m;-1!==t&&o.splice(t,1);var r=g.filter((function(t){return t.blocked_user_id!==e||t.blocked_user_type!==n||t.user_id!==f.id||t.user_type!==f.type}));h(r),p(o)}})}(e.user_id,e.user_type,n)},className:"button-filled small rounded-button background-accent"},se("unblock")))})),l?u("div",{className:"popup-has-more"},a?u($e,{size:"10"}):u("span",{onClick:function(){return _(m.length)}},se("loadMore"))):null)}function Hn(e){return u("span",{className:"ps-button bar-text-btn color-accent background-psuedo-accent"+(e.name===e.activeSection?" active":""),onClick:function(){return e.onSectionChange(e.name)}},"comments"==e.name?se("commentsMulti",{"*":""}):se(e.name))}function Bn(e){var n,t=e.data,o=Ve(),r=o[0],a=o[1],i=Ce(!0),s=un(),l=s[0],c=s[1],d=$(!1),p=d[0],f=d[1],v=$(!1),g=v[0],h=v[1],_=$(!1),b=_[0],y=_[1],w=$(!1),k=w[0],x=w[1],N=$(!1),C=N[0],T=N[1],S=$([]),M=S[0],E=S[1],I=we("typers")[0],L=K(null),O=K(null),R=$(!1),z=R[0],H=R[1],B=$(!1),P=B[0],U=B[1],A=we("blockedUsers")[0],D=$(!1),F=D[0],j=D[1],V=Boolean(e.onlyComment),q=Boolean(e.noReplies),W=e.data.userId,J=e.data.userType,X=Boolean(e.data.guestName),Y=W&&J?xe.get(W,J):null,Q=r&&r.id===W&&r.type===J,Z=e.data.hasRemoved;"deleted"===e.data.status&&(Z=!Q||"shadowed"!==a.websiteUserState),"spam"!==e.data.status&&"pending"!==e.data.status||Q||e.data.isCurrentUser||(Z=!0),Z&&(W=0,t.bodyHTML='<div class="removed-message">'+se("commentRemoved")+"</div>"),n=X?{name:t.guestName,picture:t.guestGravatar}:Ne.getUser(W,J,!0);var ee="spam"===t.status,ne="pending"===t.status,te=!!n.id,oe=ie("is_user_profile_on")&&te&&!q;function re(e){f(!p)}function le(){h(!g)}function fe(e){y(!b)}function ge(){x(!k)}function he(){T(!C)}function _e(e){oe&&U(!P)}function be(e){return u("a",{className:"cvr-btn bar-text-btn color-accent background-psuedo-accent "+(e.className||""),onClick:e.onClick},e.text)}function ye(e){return u("span",{className:"comment-tag "+e.type},e.langKey?se(e.langKey):e.children)}var ke=V||q?0:me(e.comments,t.id,!0),Te=pe(t,r,a,l),Se=dn()[0],Ie=Se===t.id,Le=ie("nested_levels"),He=t.depth>=Le,Be="comment"+(t.isFeatured?" featured":"")+(Ie?" active":"")+(He?" depth-exceeded":""),Pe="comment-view rounded-box"+(null!==ie("ch_upvote_1_threshold")&&ie("ch_upvote_1_threshold")<=t.upvotes?" background-comment-upvote-1":"")+(null!==ie("ch_upvote_2_threshold")&&ie("ch_upvote_2_threshold")<=t.upvotes?" background-comment-upvote-2":"")+(ie("is_ch_new_on")&&Te?" background-comment-new":"");G((function(){Ie&&Fe.scrollToElement(Ae.current)}),[Se]),G((function(){var e=A.find((function(e){return e.user_id==r.id&&e.user_type==r.type?t.userId==e.blocked_user_id&&t.userType==e.blocked_user_type:e.blocked_user_id!=r.id||e.blocked_user_type!=r.type||ue(r.id,r.type)?void 0:t.userId==e.user_id&&t.userType==e.user_type}));j(!!e)}),[A]),G((function(){if(t.new){var e=Ae.current.getBoundingClientRect();Fe.fixScrollForNewComments(t.id,e.height,e.top)}}),[]),G((function(){var e=I.filter((function(e){return e.replyTo==t.id}));E(e),null===O.current?O.current=_n(L.current,(function(){return H(!0)}),(function(){return H(!1)})):O.current&&(H(!1),O.current=null)}),[I]);var Ue,Ae=K(null),De=ce(n),je=de(W,J);return u("div",{className:Be},u("div",{ref:Ae,className:Pe,onClick:function(){Te&&ve(i,t.id,c)}},u("a",{className:oe?"cv-left profile":"cv-left",onClick:_e},ie("is_profile_pictures_on")&&!F?u(m,null,u(Oe,{src:je?ie("alias.picture"):n.picture,name:je?ie("alias.name"):De}),t.isFeatured?u(Me,{name:"star",className:"featured-icon"}):null):null),u("div",{className:"cv-right"},u("div",{className:"cvr-top"},u("div",{className:"cvrt-left"},F?u("div",{className:"color-box-light"},u("span",null,se("blockedComment"))):u("a",{className:oe?"cvrt-name":"cvrt-name guest",onClick:_e},u("span",null,je?ie("alias.name"):De)),P?u(In,{isOpened:P,userId:t.userId,userType:t.userType,type:"full",aliasName:je?ie("alias.name"):null,aliasPicture:je?ie("alias.picture"):null,onClose:_e}):null,ue(W,J)&&!F?u(Me,{name:"shield",className:"cvrt-shield color-accent",otherProps:{title:"Moderator"}}):null,!F&&u(ze,{badge:Y}),Z||F?null:u("div",{className:"cvrt-time"},u(Re,{time:t.time})),ne?u(ye,{type:"pending",langKey:"pending"}):null),V||F?null:u("div",{className:"cvrt-right"},r?u(yn,{data:t,readComments:e.readComments}):null,t.isFeatured?u(ye,{type:"featured",langKey:"featured"}):null,t.userFlagged?u(ye,{type:"flagged"},u(Me,{name:"flag"})):null)),u("div",{className:"cvr-middle"},F?null:b?u(pn,{placeholder:"",onCancel:fe,autoFocus:!0,startValue:(Ue=t.body,Ue.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"')),editingCommentId:t.id}):u(sn,{html:t.bodyHTML})),V||F?null:u("div",{className:"cvr-bottom"},u("div",{className:"cvrb-left"},ae("page.isClosed")?null:u(be,{className:"reply-btn",text:se("replyButtonText"),onClick:re}),ie("is_social_sharing_on")?u(Ee,{isOpened:k,button:u(be,{text:se("share"),onClick:ge}),popup:u(An,{commentId:t.id,url:t.webpageURL,onCancel:ge})}):null,Q?u(m,null,ee?null:u(be,{text:se("edit"),onClick:fe}),u(Ee,{isOpened:C,button:u(be,{text:se("delete"),onClick:he}),popup:u(Un,{commentId:t.id,onCancel:he})})):null,u("span",{ref:L},u(Sn,{onClose:function(){return H(!1)},typers:M,viewerOn:z})),t.isLoved?u(Dn,null):null),u("div",{className:"cvrb-right"},u(xn,{commentId:t.id,upvotes:t.upvotes,downvotes:t.downvotes,status:t.userVote}))),p?u("div",{className:"cvr-replier"},u(pn,{placeholder:ie("text_reply_box"),onCancel:re,autoFocus:!0,replyingTo:t.id})):null)),V||q?null:g?u("div",{className:"cvr-expander"},u("span",{onClick:le},se({single:"viewReply",multi:"viewReplies",count:ke},{"*":ke}))):u("div",{className:"cvr-replies"},u(Fn,{onClick:le,comment:t,comments:e.comments}),u(Pn,{commentId:t.id,comments:e.comments,hasMore:e.hasMore,onLoadMoreClick:e.onLoadMoreClick})))}function Pn(e){var n=we("comments")[0],t=e.comments,o=t[e.commentId]?t[e.commentId].map((function(t){return u(Bn,{key:t,data:n[t],comments:e.comments,hasMore:e.hasMore,onLoadMoreClick:e.onLoadMoreClick})})):null;return u(m,null,o,e.hasMore&&e.hasMore.indexOf(e.commentId)>=0?u(Tn,{parentId:e.commentId,onClick:e.onLoadMoreClick}):null)}function Un(e){var n=Ce(!0),t=cn()[1];return u("div",null,u(Ie,null,se("deleteConfirm")),u(Le,null,u("button",{className:"button-filled text-only small",onClick:e.onCancel},se("cancel")),u("button",{className:"button-filled rounded-button danger small",onClick:function(){e.onCancel(),n.remove(e.commentId),t.decrease(),te.post({url:oe("comment/"+e.commentId+"/delete"),success:function(e){Fe.callback("comment-delete",e.data)}})}},se("delete"))))}function An(e){var n=K(null),t=ne(e.url,{"ht-comment-id":e.commentId}),o=encodeURIComponent(t),r={facebook:"https://www.facebook.com/sharer.php?u="+o,twitter:"https://twitter.com/intent/tweet?url="+o,linkedin:"https://www.linkedin.com/shareArticle?mini=true&url="+o};function a(e){return u("a",{className:e.name,href:r[e.name],target:"_blank"},u(Me,{name:e.name}))}return G((function(){n.current.select()}),[]),u("div",{className:"share-popup"},u(Ie,null,u("div",{className:"share-sm"},u(a,{name:"facebook"}),u(a,{name:"twitter"}),u(a,{name:"linkedin"})),u("input",{ref:n,onClick:function(e){return e.target.select()},value:t,className:"background-box-outline",readOnly:!0})),u(Le,null,u("button",{className:"button-filled text-only small",onClick:e.onCancel},se("cancel"))))}function Dn(){return u("span",{className:"love-icon",title:ie("alias.name")},u("img",{src:ie("alias.picture"),alt:"Website Owner Picture"}),u(Me,{name:"heart"}))}function Fn(e){var n=$(!1),t=n[0],o=n[1],r=$(0),a=r[0],i=r[1],s=K(null);return G((function(){_n(s.current,(function(e){var n=s.current.getBoundingClientRect();i(e.pageY-(n.y+window.scrollY)),o(!0)}),(function(){o(!1)}))}),[]),u("div",{ref:s,className:"cvr-collapser background-psuedo-accent",onClick:e.onClick},t?u("div",{style:{top:a},className:"collapse-comment-view rounded-box background-box-outline"},u(Bn,{data:e.comment,onlyComment:!0})):null)}function jn(e){var n=e.commentsList.PARENT_COMMENTS&&e.commentsList.PARENT_COMMENTS.length?e.commentsList.PARENT_COMMENTS.map((function(n){return u(Bn,{key:n,data:e.comments[n],comments:e.commentsList,hasMore:e.hasMore,onLoadMoreClick:e.onLoadMoreClick})})):null;return u("div",{className:"comments-rendered"},n,e.hasMore&&e.hasMore.indexOf("PARENT_COMMENTS")>=0?u(Tn,{onClick:e.onLoadMoreClick}):null)}var Vn=0;function qn(e){var n=we("sort")[0],t=cn()[1],o=Ve()[0],r=$(!1),a=r[0],i=r[1],s=Ce(),l=s[0],c=s[1],d=s[2],m=we("has_more",[]),p=m[0],f=m[1],v=$(null),g=(v[0],v[1]),h=we("typers",[]),_=h[0],b=h[1];function y(e){Ne.addUsers(e.users);var o=ge(p),r=e.comments.map((function(n,t){if(d.isFound(n.id))return!1;var r=0!==t;(t===e.comments.length-1&&(n.new=!0),n.realtimeLoaded=!0,r)&&(e.parentRepliesCounts[n.replyTo]>me(c,n.replyTo)+1&&o.indexOf(n.replyTo)<0&&o.push(n.replyTo));return n}));r=r.filter((function(e){return!1!==e})),d.add(r,"oldest"===n),t.increase(),f(o)}realtimeHandler.subscribe("commentPublish",(function(e){y(e)})),realtimeHandler.subscribe("commentEdit",(function(e){d.update(e.commentId,{body:e.body,bodyHTML:e.bodyHTML})})),realtimeHandler.subscribe("commentDelete",(function(e){d.remove(e.commentId),t.decrease()})),realtimeHandler.subscribe("commentStatusChange",(function(e){var n=e.publishData;d.isFound(e.commentId)?(d.update(e.commentId,n.comments[n.comments.length-1]),"deleted"!==e.status&&"spam"!==e.status||t.decrease()):"published"===e.status&&(y(e.publishData),t.increase())})),realtimeHandler.subscribe("commentVote",(function(e){d.update(e.commentId,(function(n){var t={};return e.increased&&(t[e.increased+"votes"]=n[e.increased+"votes"]+1),e.decreased&&(t[e.decreased+"votes"]=n[e.decreased+"votes"]-1),e.userId&&e.userId==o.id&&e.userType===o.type&&(t.userVote=e.voteType),t}))}));var w=K(null);function k(e,t,o){void 0===e&&(e=0),void 0===t&&(t=null),void 0===o&&(o=null),te.get({url:oe("comments/get"),data:{pageId:ae("page.id"),sortMethod:n,offset:e,targetTime:0===e&&null===t?0:Vn,commentId:"PARENT_COMMENTS"===t?null:t,pageViewId:ae("pageview.id")},complete:function(){o&&o()},success:function(e){if(Ne.addUsers(e.users),Vn=e.targetTime,t){var n=[];for(var o in e.comments)n=[].concat(n,e.comments[o]);d.add(n,!0);var r=ge(p);r=r.filter((function(e){return e!==t})),e.hasMore.indexOf(t)>=0&&r.push(t);var a=e.hasMore.filter((function(e){return e!==t}));f([].concat(r,a))}else Object.keys(e.commentsList).length&&d.set(e.comments,e.commentsList),f(e.hasMore);i(!0)},error:function(e){i(!0),g(e||"Something went wrong")}})}return realtimeHandler.subscribe("commentTyping",(function(e){var n=_.findIndex((function(n){return e.socketId===n.socketId&&e.replyTo===n.replyTo&&e.time>n.time}));-1!=n&&_.splice(n,1),b([].concat(_,[e]))})),G((function(){_.length>0?w.current=setTimeout((function(){_.map((function(e,n){Math.floor(Date.now()-e.time)>5e3&&b(_.filter((function(n){return e.socketId!=n.socketId&&e.replyTo!=n.replyTo})))}))}),6e3):0==_.length&&w.current&&(clearTimeout(w.current),w.current=null)}),[_]),G((function(){k()}),[]),be((function(){i(!1),k()}),[n]),u("section",{className:"comments-section"},a?u(jn,{commentsList:c,comments:l,hasMore:p,onLoadMoreClick:function(e,n){k(me(c,e,!1,!0),e||"PARENT_COMMENTS",n)}}):u($e,{size:"15",spacing:"60"}))}function $n(){var e=Ve(),n=e[0],t=e[1],o=(e[2],$(!1)),r=o[0],a=o[1],i=K(null),s=we("typers",[])[0],l=$([]),c=l[0],d=l[1],m=K(null),p=$(!1),f=p[0],v=p[1];if(!n)return null;var g=t.notifsCount,h=de(n.id,n.type);function _(){a(!r),window.addEventListener("mousedown",b)}function b(e){i.current&&!i.current.contains(e.target)&&(a(!1),window.removeEventListener("mousedown",b))}return G((function(){var e=s.filter((function(e){return 0==e.replyTo}));d(e),null===m.current?m.current=_n(i.current,(function(){return v(!0)}),(function(){return v(!1)})):m.current&&(v(!1),m.current=null)}),[s]),u("div",{className:"cbb-image-view",ref:i},u("div",{onClick:_},u(Oe,{src:h?ie("alias.picture"):n.picture,name:h?ie("alias.name"):n.name})),g>0?u("span",{className:"notifs-icon"},u(wn,{number:g})):null,r?u(In,{isOpened:r,userId:n.id,userType:n.type,type:"half",aliasName:h?ie("alias.name"):null,aliasPicture:h?ie("alias.picture"):null,onClose:_}):null,u("div",{className:"cbb-typers-wrap"},u(Sn,{onClose:function(){return v(!1)},typers:c,viewerOn:f})))}function Gn(e){var n=cn()[0];return u("div",{className:"cb-body",style:{display:e.isHidden?"none":"block"}},u("div",{className:"cbb-writer"},u($n,null),u(pn,{placeholder:ie(0===n?"text_no_comments":"text_comment_box")})),u(qn,null))}function Kn(e){return u("div",{className:"cb-footer background-box-outline rounded-box"},u("div",{className:"cbf-left"},u(Me,{name:"search",otherProps:{onClick:e.onSearchClick}}),u("span",{className:"icon",onClick:function(){return Fe.scrollToElement((e="comments-box",document.getElementById(e)),!0);var e}},u(bn,{side:"up"}))),u("div",{className:"cbf-right"},ae("plan.isBusiness")?null:u("a",{href:"https://talk.hyvor.com?utm_source=embed&utm_medium="+location.hostname,rel:"nofollow",target:"_blank"},"by Hyvor Talk")))}function Wn(e){var n,t=cn(),o=t[0];t[1];return 0===o?n=ie("text_comment_count_0"):1===o?n=ie("text_comment_count_1"):n=ie("text_comment_count_multi").replace("*",le(o)),u("div",{className:"cbh-comments-count",dangerouslySetInnerHTML:{__html:n}})}function Jn(e){var n=$(null),t=n[0],o=n[1];return G((function(){window.realtimeHandler.subscribe("page."+ae("page.id")+".onlineCount",(function(e){void 0===e&&(e=1),o(e)}))}),[]),null!==t?u("span",{className:"cbhr-online-count rounded-box"},u(wn,{number:t}),"",se("online")):null}function Xn(){var e=we("sort",ie("default_sort")||"best"),n=e[0],t=e[1],o=$(!1),r=o[0],a=o[1];function i(e){return u("div",{className:"sort-select-type"+(n===e.type?" background-accent":""),onClick:function(){return n=e.type,t(n),void a(!1);var n}},se(e.type))}return u("div",{className:"cbba-sort"},u("span",{className:"sort-name",onClick:function(){return a(!r)}},se("sort",{"*":se(n)}),"",u(bn,{side:"down"})),r?u("div",{className:"sort-select background-box"},u(i,{type:"best"}),u(i,{type:"latest"}),u(i,{type:"oldest"})):null)}function Yn(){var e=ie("noteHtml");return u("div",{className:"cb-header background-box-outline rounded-box"},u("div",{className:"cbh-row"},u("div",{className:"cbh-left"},u(Wn,null),ie("is_realtime_online_count_on")?u(Jn,null):null),u("div",{className:"cbh-right"},u(Xn,null))),e?u("div",{className:"cbh-note border-box-outline-light"},u(sn,{html:e})):null)}function Qn(e){var n,t=$(""),o=t[0],r=t[1],a=$(!1),i=a[0],s=a[1],l=$([]),c=l[0],d=l[1],m=$(!1),p=m[0],f=m[1],v=K(null);function g(e,n){if(void 0===e&&(e=0),void 0===n&&(n=null),v.current&&v.current.abort(),""===o.trim())return s(!0),d([]),void f(!1);e||s(!1),v.current=te.get({url:oe("comments/search"),data:{search:o,offset:e},success:function(t){n&&n(),Ne.addUsers(t.users),d(0===e?t.comments:c.concat(t.comments)),f(t.hasMore),s(!0)}})}return G((function(){g()}),[o]),n=i?c.length?c.map((function(e){return u(Bn,{key:e.id,data:e,onlyComment:!0})})):""===o?"":u("div",{className:"cbsr-wrap"},se("noResults")):u("div",{className:"cbsr-wrap"},u($e,{size:"15"})),u("div",{className:"cb-body cb-search"},u("div",{className:"cbs-top"},u("div",{className:"cbs-close"},u("span",{onClick:e.onSearchClick},u(bn,{side:"left"})," ",se("searchBack"))),u("input",{type:"text",value:o,onInput:function(e){return r(e.target.value)},placeholder:se("searchComments"),className:"rounded-box background-box-outline cbs-input",autoFocus:!0})),u("div",{className:"cbs-results"},n),p?u(Tn,{onClick:function(e,n){g(c.length,n)}}):null)}function Zn(e){var n,t=ae("targetComment");Ne.addUsers(t.users);var o=K(null);G((function(){Fe.scrollToElement(o.current)}),[]);var r=ae("lang.isRTL")?"marginRight":"marginLeft";return u("div",{className:"cb-body cb-target-comment"},t.parent?u(Bn,{data:t.parent,noReplies:!0}):null,u("div",{style:(n={},n[r]=t.parent?30:0,n),className:"cbtc-flash",ref:o},u(Bn,{data:t.comment,noReplies:!0})),u("div",{className:"load-more-block"},u("button",{className:"button-filled background-accent rounded-button",onClick:e.onAllComments},se("showAllComments"))))}function et(){var e=$(ae("targetComment")?"targetComment":"comments"),n=e[0],t=e[1];function o(){t("search"===n?"comments":"search")}return u("div",{className:"comments-box styled-box background-box",id:"comments-box"},u(Yn,null),u(Gn,{isHidden:"comments"!==n}),"search"===n?u(Qn,{onSearchClick:o}):null,"targetComment"===n?u(Zn,{onAllComments:function(){return t("comments")}}):null,u(Kn,{onSearchClick:o}))}function nt(){return(nt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var tt=function(){function e(e){this.css="\n\n        /** backgrounds **/\n        .background-box-outline {\n            background-color: {boxOutline};\n            color: {textOnBoxOutline};\n        }\n        .background-box {\n            background-color: {box};\n            color: {textOnBox};\n        }\n        .background-accent {\n            background-color: {accent};\n            color: {textOnAccent};\n        }\n        .background-psuedo-accent:after, .background-psuedo-accent:before {\n            background-color: {accent};\n            color: {textOnAccent};\n        }\n        .background-box-outline-on-hover:hover {\n            background-color: {boxOutline};\n            color: {textOnBoxOutline};\n        }\n\n        /** colors **/\n        .color-accent {\n            color: {accent};\n        }\n        .color-box-light {\n            color: {textOnBoxLight}\n        }\n        .color-background {\n            color: {textOnBackground}\n        }\n\n        /** borders **/\n        .border-accent {\n            border-color: {accent}!important;\n        }\n        .border-box-outline-light {\n            border-color: {textOnBoxOutline}11!important;\n        }\n\n    ",this.colorObj=e,this.createStylesheet()}var n=e.prototype;return n.createStylesheet=function(){var e=this.getCSS();this.stylesheet&&this.stylesheet.parentElement.removeChild(this.stylesheet),this.stylesheet=document.createElement("style"),this.stylesheet.innerHTML=e,document.head.appendChild(this.stylesheet)},n.change=function(e){var n={accent:"accent",accentText:"textOnAccent",footerHeader:"boxOutline",footerHeaderText:"textOnBoxOutline",box:"box",boxText:"textOnBox",boxLightText:"textOnBoxLight",backgroundText:"textOnBackground"},t={};for(var o in n)void 0!==e[o]&&(t[n[o]]=e[o]);var r=nt({},this.colorObj,t);this.colorObj=this.sanitizeObj(r),this.createStylesheet()},n.sanitizeObj=function(e){for(var n in e)e[n]=e[n].replace("#","");return e},n.getCSS=function(){var e,n=this.css,t=this.colorObj;for(e in t){var o=e,r=t[e].indexOf("#")<0?"#"+t[e]:t[e],a=new RegExp("\\{"+o+"\\}","gi");n=n.replace(a,r)}return n},e}(),ot=function(){function e(e){this.popupCSS="\n    border-radius: $box-radius;\n    box-shadow: $box-shadow;\n    border: $border-size solid $border-color;",this.popupButtonCSS="\n        border-radius: $button-radius;\n    ",this.data=e;var n=this.getCSS();this.stylesheet=document.createElement("style"),this.stylesheet.innerHTML=n,document.head.appendChild(this.stylesheet)}return e.prototype.getCSS=function(n){n=n||e.css;var t=5*this.data.boxCornerRoundness+"px",o=5*this.data.boxShadow,r=this.data.boxShadow-1,a=0==this.data.boxShadow?"none":"0px 2px "+o+"px "+r+"px rgba(0, 52, 102, 0.11)",i=this.data.boxBorderSize+"px",s="#"+this.data.boxBorderColor,l=5*this.data.buttonCornerRoundness+"px";return n=(n=(n=(n=(n=n.replace(/\$box-radius/g,t)).replace(/\$box-shadow/g,a)).replace(/\$border-size/g,i)).replace(/\$border-color/g,s)).replace(/\$button-radius/g,l)},e}();ot.css="\n        .styled-box\n        {\n            border-radius: $box-radius;\n            box-shadow: $box-shadow;\n            border: $border-size solid $border-color;\n        }\n        .rounded-box {\n            border-radius: $box-radius;\n        }\n        .rounded-button {\n            border-radius: $button-radius;\n        }\n    ";var rt=function(){function e(){this.handlers={id:function(e){return window.socketId=e}}}var n=e.prototype;return n.connect=function(){var e=this;if(ie("is_realtime_on")&&(window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket)){var n=new WebSocket(ae("domains.ws"));n.onopen=function(){e.subscribeToChannel("page."+ae("page.id"),!0)},n.onmessage=function(n){var t=JSON.parse(n.data);t&&e.handleMessage(t.type,t.data)},n.onclose=function(){setTimeout((function(){e.connect(),e.lastTimeout=Math.min(2e4,e.lastTimeout+2e3)}),e.lastTimeout)},n.onerror=function(){return n.close()},this.connection=n}},n.subscribeToChannel=function(e,n){void 0===n&&(n=!1),this.connection.send(JSON.stringify({type:"subscribe",channel:e,subscribeToOnline:n}))},n.reconnect=function(){this.connection&&this.connection.close(),this.connect()},n.handleMessage=function(e,n){this.handlers[e]&&this.handlers[e](n)},n.subscribe=function(e,n){this.handlers[e]=n},e}();var at,it=(at=window.MutationObserver||window.WebKitMutationObserver,function(e,n){e&&1!==!e.nodeType&&(at?new at((function(e,t){n(e)})).observe(e,{childList:!0,subtree:!0}):window.addEventListener&&(e.addEventListener("DOMNodeInserted",n,!1),e.addEventListener("DOMNodeRemoved",n,!1)))});function st(e){var n=$(ae("ratings")),t=n[0],o=n[1],r=Ve(),a=r[0],i=r[1],s=$(i?i.rating:null),l=s[0],c=s[1];return window.realtimeHandler.subscribe("ratings",(function(e){o({average:e.average,count:e.count}),e.userId&&a.id==e.userId&&a.type==e.userType&&c(e.rating)})),u("div",{className:"reactions ratings color-background"},u("div",{className:"reactions-title"},ie("text_ratings")),u("div",{className:"ratings-wrap"},t.average?u("div",{className:"rat-count"},t.average):null,u("div",{className:"rat-stars"},u(lt,{onRatingsChange:o,userRating:l,onUserRatingChange:c})),t.count?u("div",{className:"rat-total"},se({single:"ratings1",multi:"ratingsMulti",count:t.count},{"*":t.count})):null))}function lt(e){var n=$(null),t=n[0],o=n[1];return u("span",{className:"background-box styled-box rat-box",style:{color:"#"+ie("ratings_color")},onMouseLeave:function(){return o(null)}},u("span",{className:"rat-star-wrap"},u("span",{className:"color-box-light"},[1,2,3,4,5].map((function(){return u(Me,{name:"star"})}))),u("span",{className:"rat-star-absolute"},[1,2,3,4,5].map((function(n){var r=0,a=e.userRating?e.userRating:0;return t&&t>=n&&(r=2),t?t>=n&&(r=1):a>=n&&(r=1),u(Me,{name:"star",otherProps:{onMouseEnter:function(){return o(n)},style:"opacity: "+r,onClick:function(){return t=n,e.onUserRatingChange(t),void te.post({url:oe("ratings/add"),data:{rating:t},success:function(n){e.onRatingsChange(n.data.page_ratings),n.data.old_rating?Fe.callback("rating-edit",n.data):Fe.callback("rating-publish",n.data)}});var t}}})})))))}function ct(){var e=Ve(),n=e[0],t=e[1],o=$(t?t.reactionType:null),r=o[0],a=o[1],i=$(ae("reactions")),s=i[0],l=i[1];function c(e){var n={};null!==r&&(n[r]=-1),r!==e&&(n[e]=1),d(n),a(e=r===e?null:e),te.post({url:oe("reactions/add"),data:{type:null===e?"":e,pageViewId:ae("pageview.id")},success:function(e){e.data.old_type?e.data.type?Fe.callback("reaction-edit",e.data):Fe.callback("reaction-delete",e.data):Fe.callback("reaction-publish",e.data)}})}function d(e){var n=ge(s);for(var t in e)n[t]=Math.max(-10,n[t]+e[t]);l(n)}return G((function(){a(t?t.reactionType:null)}),[t]),window.realtimeHandler.subscribe("reaction",(function(e){var t=e.userId&&e.userId==n.id&&e.userType===n.type,o={};e.decreased&&(o[e.decreased]=-1,t&&a(null)),e.increased&&(o[e.increased]=1,t&&a(e.increased)),d(o)})),u("div",{className:"reactions color-background"},u("div",{className:"reactions-title"},ie("text_reactions")),u("div",{className:"reactions-wrap"},["superb","love","wow","sad","laugh","angry"].map((function(e,n){return ie("is_reaction_"+ ++n+"_on")?u(ut,{key:e,name:e,value:s[e],pic:ie("reaction_"+n)||"/res/reactions/"+n+".svg",reactionType:r,onClick:c}):null}))))}function ut(e){return u("span",{className:"reaction styled-box "+(e.reactionType===e.name?"background-accent":"background-box"),onClick:function(){return e.onClick(e.name)}},u("img",{src:e.pic}),u(wn,{number:Math.max(e.value,0)}))}window.colors=new tt({accent:ie("color_accent"),textOnAccent:ie("color_accent_text"),textOnBackground:ie("color_background_text"),box:ie("color_box"),textOnBox:ie("color_box_text"),textOnBoxLight:ie("color_box_text_light"),boxOutline:ie("color_box_outline"),textOnBoxOutline:ie("color_box_outline_text")}),window.customUiHandler=new ot({boxShadow:ie("ui_box_shadow"),boxCornerRoundness:ie("ui_box_roundness"),boxBorderSize:ie("ui_box_border_size"),boxBorderColor:ie("ui_box_border_color"),buttonCornerRoundness:ie("ui_button_roundness")}),window.realtimeHandler=new rt,window.IFRAME_CROSS_MESSENGER=new function(e,n,t){void 0===t&&(t={});var o={close:function(){return e=window,n="message",t=receive,"string"==typeof n&&(n=[n]),void n.forEach((function(n){e.removeEventListener(n,t)}));var e,n,t},post:function(t,o){try{var r=JSON.stringify({event:t,data:o});e.postMessage(r,n)}catch(e){}},receive:function(e){var o;try{o=JSON.parse(e.data?e.data:"{}")}catch(e){return}var r=o.event,a=o.data;e.origin===n&&"function"==typeof t[r]&&t[r](a)}};return Ue(window,"message",o.receive),o}(window.parent,ae("request.protocol")+ae("request.hostname"),{setPalette:function(e){colors.change(e)}}),Ue(window,"load DOMContentLoaded",Fe.resizeIframe),it(document.body,Fe.resizeIframe),setInterval(Fe.resizeIframe,2500),Fe.lst(config.lst),config.lang.isRTL&&document.body.classList.add("rtl"),function(){function e(e,n){void 0===n&&(n=.1);var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),o=t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null;return o?"rgba( "+o.r+", "+o.g+", "+o.b+", "+n+" )":""}var n="\n        .background-comment-new {background: "+e(ie("ch_new_color"))+"} \n        .background-comment-upvote-1 {background: "+e(ie("ch_upvote_1_color"))+"}\n        .background-comment-upvote-2 {background: "+e(ie("ch_upvote_2_color"))+"}\n    ",t=document.createElement("style");t.innerHTML=n,document.head.appendChild(t)}();var dt=ae("palette");function mt(){var e,n,t=Ve(),o=t[0],r=t[1],a=dn()[2],i=function(e,n){return B=8,W((function(){return e}),n)}((function(e){"body"!==e.target.tagName.toLowerCase()||e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||a(e.key,e)}));return G((function(){return window.addEventListener(e,n),function(){return window.removeEventListener(e,n)}}),[e="keyup",n=i]),G((function(){window.user=o,window.realtimeHandler.reconnect()}),[o]),be((function(){r&&r.badgeId&&xe.addOne(o.id,o.type,r.badgeId)}),[r]),u("div",{style:{width:ie("ui_box_width"),margin:"auto",maxWidth:"100%"}},u(pt,null),u(et,null))}function pt(){var e=ie("top_widget");return"reactions"===e?u(ct,null):"ratings"===e?u(st,null):null}dt&&window.colors.change(dt),ke.init({user:window.config.user,userState:window.config.userState,blockedUsers:window.config.userState?window.config.userState.blockedUsers:[],comments:{}}),L(u((function(){return u(mt,null)}),null),document.body)}()}();