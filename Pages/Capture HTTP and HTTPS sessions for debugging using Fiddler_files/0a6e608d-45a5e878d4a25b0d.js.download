"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[594],{4309:function(e,t,r){r.r(t),r.d(t,{HighlightUtils:function(){return ls},ResultTemplatesHelpers:function(){return Vm},SortBy:function(){return Ce},SortOrder:function(){return we},TestUtils:function(){return L},VERSION:function(){return xa},analyticsUrl:function(){return J},baseFacetResponseSelector:function(){return ia},buildBreadcrumbManager:function(){return kh},buildCategoryFacet:function(){return Xp},buildContext:function(){return Ep},buildController:function(){return Cp},buildCriterionExpression:function(){return Oe},buildDateFacet:function(){return bg},buildDateFilter:function(){return Tg},buildDateRange:function(){return gl},buildDateSortCriterion:function(){return xe},buildDictionaryFieldContext:function(){return jp},buildDidYouMean:function(){return kp},buildExecuteTrigger:function(){return Ty},buildFacet:function(){return ag},buildFacetManager:function(){return xh},buildFieldSortCriterion:function(){return Ie},buildFoldedResultList:function(){return Iy},buildHistoryManager:function(){return Mg},buildInteractiveRecentResult:function(){return tm},buildInteractiveResult:function(){return nh},buildInteractiveResultCore:function(){return rh},buildNoSortCriterion:function(){return Fe},buildNotifyTrigger:function(){return Vy},buildNumericFacet:function(){return Rg},buildNumericFilter:function(){return Eg},buildNumericRange:function(){return xg},buildPager:function(){return Jg},buildQueryError:function(){return Kg},buildQueryExpression:function(){return Wm},buildQueryRankingExpressionSortCriterion:function(){return Re},buildQuerySummary:function(){return Xg},buildQueryTrigger:function(){return ky},buildQuickview:function(){return qy},buildRecentQueriesList:function(){return Wy},buildRecentResultsList:function(){return em},buildRedirectionTrigger:function(){return jy},buildRelevanceInspector:function(){return Ap},buildRelevanceSortCriterion:function(){return qe},buildResultList:function(){return eh},buildResultTemplatesManager:function(){return Tm},buildResultsPerPage:function(){return oh},buildSearchBox:function(){return gh},buildSearchEngine:function(){return wp},buildSearchParameterManager:function(){return Nh},buildSearchParameterSerializer:function(){return uy},buildSearchStatus:function(){return Zg},buildSmartSnippet:function(){return Ny},buildSmartSnippetQuestionsList:function(){return zy},buildSort:function(){return mh},buildStandaloneSearchBox:function(){return Vh},buildStaticFilter:function(){return Sh},buildStaticFilterValue:function(){return vh},buildTab:function(){return qh},buildUrlManager:function(){return wy},createAction:function(){return ir},createAsyncThunk:function(){return wr},createReducer:function(){return lr},currentPageSelector:function(){return Dg},currentPagesSelector:function(){return Ng},deserializeRelativeDate:function(){return Ji},facetRequestSelector:function(){return oa},facetResponseSelectedValuesSelector:function(){return ua},facetResponseSelector:function(){return sa},getSampleSearchEngineConfiguration:function(){return cp},loadAdvancedSearchQueryActions:function(){return rm},loadBreadcrumbActions:function(){return Am},loadCategoryFacetSetActions:function(){return nm},loadClickAnalyticsActions:function(){return zm},loadConfigurationActions:function(){return im},loadContextActions:function(){return sm},loadDateFacetSetActions:function(){return cm},loadDebugActions:function(){return lm},loadDictionaryFieldContextActions:function(){return um},loadDidYouMeanActions:function(){return fm},loadFacetOptionsActions:function(){return dm},loadFacetSetActions:function(){return am},loadFieldActions:function(){return pm},loadFoldingActions:function(){return ym},loadGenericAnalyticsActions:function(){return Qm},loadHistoryActions:function(){return gm},loadNumericFacetSetActions:function(){return hm},loadPaginationActions:function(){return mm},loadPipelineActions:function(){return vm},loadQueryActions:function(){return bm},loadQuerySetActions:function(){return Sm},loadQuerySuggestActions:function(){return wm},loadQuestionAnsweringActions:function(){return Fm},loadRecentQueriesActions:function(){return Em},loadRecentResultsActions:function(){return jm},loadRedirectionActions:function(){return Cm},loadSearchActions:function(){return Om},loadSearchAnalyticsActions:function(){return Nm},loadSearchConfigurationActions:function(){return om},loadSearchHubActions:function(){return qm},loadSortCriteriaActions:function(){return xm},loadStandaloneSearchBoxSetActions:function(){return Im},loadStaticFilterSetActions:function(){return Rm},maxPageSelector:function(){return _g},parseCriterionExpression:function(){return Um},platformUrl:function(){return W},validateRelativeDate:function(){return Qi}});var n=Object.create,a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,l=e=>a(e,"__esModule",{value:!0}),c=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),d=(e,t)=>{for(var r in l(e),t)a(e,r,{get:t[r],enumerable:!0})},f=(e,t,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of o(t))!u.call(e,n)&&"default"!==n&&a(e,n,{get:()=>t[n],enumerable:!(r=i(t,n))||r.enumerable});return e},p=e=>f(l(a(null!=e?n(s(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),g=c(((e,t)=>{t.exports=fetch})),h=c((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}})),y=c((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){var t=Math.random()*e;return Math.round(t)}})),m=c((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}})),v=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=y(),r=m();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}})),b=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=v(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r})),S=c((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t(a,e),a.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(a.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),a}(b().Delay);e.SkipFirstDelay=a})),w=c((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(b().Delay);e.AlwaysDelay=r})),C=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=S(),r=w();e.DelayFactory=function(e,n){var a=function(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}(e);return a.setAttemptNumber(n),a}})),O=c((e=>{var t=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=h(),a=C();e.backOff=function(e,a){return void 0===a&&(a={}),t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(a),[4,new i(e,t).execute()];case 1:return[2,r.sent()]}}))}))};var i=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,a.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}()})),q=c(((e,t)=>{var n,a;n=e,a=function(){var e=6e4,t=36e5,r="millisecond",n="second",a="minute",i="hour",o="day",s="week",u="month",l="quarter",c="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,u),i=r-a<0,o=t.clone().add(n+(i?-1:1),u);return+(-(n+(r-a)/(i?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:c,w:s,d:o,D:d,h:i,m:a,s:n,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",b={};b[v]=h;var S=function(e){return e instanceof q},w=function(e,t,r){var n;if(!e)return v;if("string"==typeof e)b[e]&&(n=e),t&&(b[e]=t,n=e);else{var a=e.name;b[a]=e,n=a}return!r&&n&&(v=n),n||!r&&v},C=function(e,t){if(S(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new q(r)},O=m;O.l=w,O.i=S,O.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var q=function(){function h(e){this.$L=w(e.locale,null,!0),this.parse(e)}var y=h.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return O},y.isValid=function(){return this.$d.toString()!==f},y.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return C(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<C(e)},y.$g=function(e,t,r){return O.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,l=!!O.u(t)||t,f=O.p(e),p=function(e,t){var n=O.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return l?n:n.endOf(o)},g=function(e,t){return O.w(r.toDate()[e].apply(r.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},h=this.$W,y=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(f){case c:return l?p(1,0):p(31,11);case u:return l?p(1,y):p(0,y+1);case s:var b=this.$locale().weekStart||0,S=(h<b?h+7:h)-b;return p(l?m-S:m+(6-S),y);case o:case d:return g(v+"Hours",0);case i:return g(v+"Minutes",1);case a:return g(v+"Seconds",2);case n:return g(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var s,l=O.p(e),f="set"+(this.$u?"UTC":""),p=(s={},s[o]=f+"Date",s[d]=f+"Date",s[u]=f+"Month",s[c]=f+"FullYear",s[i]=f+"Hours",s[a]=f+"Minutes",s[n]=f+"Seconds",s[r]=f+"Milliseconds",s)[l],g=l===o?this.$D+(t-this.$W):t;if(l===u||l===c){var h=this.clone().set(d,1);h.$d[p](g),h.init(),this.$d=h.set(d,Math.min(this.$D,h.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[O.p(e)]()},y.add=function(r,l){var d,f=this;r=Number(r);var p=O.p(l),g=function(e){var t=C(f);return O.w(t.date(t.date()+Math.round(e*r)),f)};if(p===u)return this.set(u,this.$M+r);if(p===c)return this.set(c,this.$y+r);if(p===o)return g(1);if(p===s)return g(7);var h=(d={},d[a]=e,d[i]=t,d[n]=1e3,d)[p]||1,y=this.$d.getTime()+r*h;return O.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this;if(!this.isValid())return f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=O.z(this),a=this.$locale(),i=this.$H,o=this.$m,s=this.$M,u=a.weekdays,l=a.months,c=function(e,n,a,i){return e&&(e[n]||e(t,r))||a[n].substr(0,i)},d=function(e){return O.s(i%12||12,e,"0")},p=a.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:O.s(s+1,2,"0"),MMM:c(a.monthsShort,s,l,3),MMMM:c(l,s),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:c(a.weekdaysMin,this.$W,u,2),ddd:c(a.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:O.s(i,2,"0"),h:d(1),hh:d(2),a:p(i,o,!0),A:p(i,o,!1),m:String(o),mm:O.s(o,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:n};return r.replace(g,(function(e,t){return t||h[e]||n.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,f){var p,g=O.p(d),h=C(r),y=(h.utcOffset()-this.utcOffset())*e,m=this-h,v=O.m(this,h);return v=(p={},p[c]=v/12,p[u]=v,p[l]=v/3,p[s]=(m-y)/6048e5,p[o]=(m-y)/864e5,p[i]=m/t,p[a]=m/e,p[n]=m/1e3,p)[g]||m,f?v:O.a(v)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=w(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return O.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},h}(),x=q.prototype;return C.prototype=x,[["$ms",r],["$s",n],["$m",a],["$H",i],["$W",o],["$M",u],["$y",c],["$D",d]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,q,C),e.$i=!0),C},C.locale=w,C.isDayjs=S,C.unix=function(e){return C(1e3*e)},C.en=b[v],C.Ls=b,C.p={},C},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs=a()})),x=c(((e,t)=>{var n,a;n=e,a=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(e){var t={date:e,utc:!0,args:arguments};return new a(t)},o.utc=function(t){var r=i(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var u=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else u.call(this)};var l=o.utcOffset;o.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?l.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(n)))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(a)return s.$offset=o,s.$u=0===n,s;if(0!==n){var u=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+u,e)).$offset=o,s.$x.$localOffset=u}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),a=i(e).local();return f.call(n,a,t,r)}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_utc=a()})),I=c(((e,t)=>{var n,a;n=e,a=function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var i,o=function(e,r,n){void 0===n&&(n={});var a=new Date(e);return function(e,r){void 0===r&&(r={});var n=r.timeZoneName||"short",a=e+"|"+n,i=t[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[a]=i),i}(r,n).formatToParts(a)},s=function(t,r){for(var n=o(t,r),i=[],s=0;s<n.length;s+=1){var u=n[s],l=u.type,c=u.value,d=e[l];d>=0&&(i[d]=parseInt(c,10))}var f=i[3],p=24===f?0:f,g=i[0]+"-"+i[1]+"-"+i[2]+" "+p+":"+i[4]+":"+i[5]+":000",h=+t;return(a.utc(g).valueOf()-(h-=h%1e3))/6e4},u=n.prototype;u.tz=function(e,t){void 0===e&&(e=i);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),u=a(o).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-s,!0);if(t){var l=u.utcOffset();u=u.add(r-l,"minute")}return u.$x.$timezone=e,u},u.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return r&&r.value};var l=u.startOf;u.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return l.call(this,e,t);var r=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return l.call(r,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,r){var n=r&&t,o=r||t||i,u=s(+a(),o);if("string"!=typeof e)return a(e).tz(o);var l=function(e,t,r){var n=e-60*t*1e3,a=s(n,r);if(t===a)return[n,t];var i=s(n-=60*(a-t)*1e3,r);return a===i?[n,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,n).valueOf(),u,o),c=l[0],d=l[1],f=a(c).utcOffset(d);return f.$x.$timezone=o,f},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_timezone=a()})),R=c((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}})),F=c(((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n,a,i=R(),o=(n=i)&&n.__esModule?n:{default:n};a="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:"undefined"!=typeof t?t:Function("return this")();var s=(0,o.default)(a);e.default=s})),A=c((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t,r=(t=F())&&"object"==typeof t&&"default"in t?t.default:t,n=function(){return Math.random().toString(36).substring(7).split("").join(".")},a={INIT:"@@redux/INIT"+n(),REPLACE:"@@redux/REPLACE"+n(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n()}};function i(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function o(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function s(e,t){return function(){return t(e.apply(this,arguments))}}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}e.__DO_NOT_USE__ActionTypes=a,e.applyMiddleware=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(a)}));return c({},r,{dispatch:n=d.apply(void 0,i)(r.dispatch)})}}},e.bindActionCreators=function(e,t){if("function"==typeof e)return s(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in e){var a=e[n];"function"==typeof a&&(r[n]=s(a,t))}return r},e.combineReducers=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];"function"==typeof e[i]&&(r[i]=e[i])}var s,u=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if("undefined"==typeof r(void 0,{type:a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"==typeof r(void 0,{type:a.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(l){s=l}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var n=!1,a={},i=0;i<u.length;i++){var l=u[i],c=r[l],d=e[l],f=c(d,t);if("undefined"==typeof f){var p=o(l,t);throw new Error(p)}a[l]=f,n=n||f!==d}return(n=n||u.length!==Object.keys(e).length)?a:e}},e.compose=d,e.createStore=function e(t,n,o){var s;if("function"==typeof n&&"function"==typeof o||"function"==typeof o&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof n&&"undefined"==typeof o&&(o=n,n=void 0),"undefined"!=typeof o){if("function"!=typeof o)throw new Error("Expected the enhancer to be a function.");return o(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var u=t,l=n,c=[],d=c,f=!1;function p(){d===c&&(d=c.slice())}function g(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function h(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,p();var r=d.indexOf(e);d.splice(r,1),c=null}}}function y(e){if(!i(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,e)}finally{f=!1}for(var t=c=d,r=0;r<t.length;r++){(0,t[r])()}return e}function m(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,y({type:a.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(g())}return r(),{unsubscribe:t(r)}}})[r]=function(){return this},e}return y({type:a.INIT}),(s={dispatch:y,subscribe:h,getState:g,replaceReducer:m})[r]=v,s}})),E=c(((e,t)=>{var r,n,a=Function.prototype,i=Object.prototype,o=a.toString,s=i.hasOwnProperty,u=o.call(Object),l=i.toString,c=(r=Object.getPrototypeOf,n=Object,function(e){return r(n(e))});t.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=l.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch{}return t}(e))return!1;var t=c(e);if(null===t)return!0;var r=s.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&o.call(r)==u}})),j=c((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function n(){var e=[],r=[];return{getState:function(){return o(t)?t(e):t},getActions:function(){return e},dispatch:function(t){if(!(0,a.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(t));e.push(t);for(var n=0;n<r.length;n++)r[n]();return t},clearActions:function(){e=[]},subscribe:function(e){return o(e)&&r.push(e),function(){var t=r.indexOf(e);t<0||r.splice(t,1)}},replaceReducer:function(e){if(!o(e))throw new Error("Expected the nextReducer to be a function.")}}}var s=r.applyMiddleware.apply(void 0,i(e))(n);return s()}};var t,r=A(),n=E(),a=(t=n)&&t.__esModule?t:{default:t};function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=function(e){return"function"==typeof e}})),k=c(((e,t)=>{var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports=r.AbortController,t.exports.default=r.AbortController})),T=c(((e,t)=>{var n,a;n=e,a=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^\s\d-_:/()]+/,i={},o=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],u=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},l=function(e,t){var r,n=i.meridiem;if(n){for(var a=1;a<=24;a+=1)if(e.indexOf(n(a,0,t))>-1){r=a>12;break}}else r=e===(t?"pm":"PM");return r},c={A:[a,function(e){this.afternoon=l(e,!1)}],a:[a,function(e){this.afternoon=l(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,o("seconds")],ss:[n,o("seconds")],m:[n,o("minutes")],mm:[n,o("minutes")],H:[n,o("hours")],h:[n,o("hours")],HH:[n,o("hours")],hh:[n,o("hours")],D:[n,o("day")],DD:[r,o("day")],Do:[a,function(e){var t=i.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,o("month")],MM:[r,o("month")],MMM:[a,function(e){var t=u("months"),r=(u("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[a,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[r,function(e){e=+e,this.year=e+(e>68?1900:2e3)}],YYYY:[/\d{4}/,o("year")],Z:s,ZZ:s};return function(r,n,a){a.p.customParseFormat=!0;var o=n.prototype,s=o.parse;o.parse=function(r){var n=r.date,o=r.utc,u=r.args;this.$u=o;var l=u[1];if("string"==typeof l){var d=!0===u[2],f=!0===u[3],p=d||f,g=u[2];f&&(g=u[2]),i=this.$locale(),!d&&g&&(i=a.Ls[g]),this.$d=function(r,n,a){try{var o=function(r){var n,a;n=r,a=i&&i.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var i=n&&n.toUpperCase();return r||a[n]||e[n]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=o.length,u=0;u<s;u+=1){var l=o[u],d=c[l],f=d&&d[0],p=d&&d[1];o[u]=p?{regex:f,parser:p}:l.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var a=o[r];if("string"==typeof a)n+=a.length;else{var i=a.regex,u=a.parser,l=e.substr(n),c=i.exec(l)[0];u.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}(n)(r),s=o.year,u=o.month,l=o.day,d=o.hours,f=o.minutes,p=o.seconds,g=o.milliseconds,h=o.zone,y=new Date,m=l||(s||u?1:y.getDate()),v=s||y.getFullYear(),b=0;s&&!u||(b=u>0?u-1:y.getMonth());var S=d||0,w=f||0,C=p||0,O=g||0;return h?new Date(Date.UTC(v,b,m,S,w,C,O+60*h.offset*1e3)):a?new Date(Date.UTC(v,b,m,S,w,C,O)):new Date(v,b,m,S,w,C,O)}catch{return new Date("")}}(n,l,o),this.init(),g&&!0!==g&&(this.$L=this.locale(g).$L),p&&n!==this.format(l)&&(this.$d=new Date("")),i={}}else if(l instanceof Array)for(var h=l.length,y=1;y<=h;y+=1){u[1]=l[y-1];var m=a.apply(this,u);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}y===h&&(this.$d=new Date(""))}else s.call(this,r)}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_customParseFormat=a()})),V=c(((e,t)=>{var n,a;n=e,a=function(){var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=a.add;a.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var o=a.startOf;a.startOf=function(r,n){var a=this.$utils(),i=!!a.u(n)||n;if(a.p(r)===t){var s=this.quarter()-1;return i?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_quarterOfYear=a()})),P=c(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var a=n&&n.stringify||r;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=new Array(i);o[0]=a(e);for(var s=1;s<i;s++)o[s]=a(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var u=t.length;if(0===u)return e;for(var l="",c=0,d=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(c>=u||(d<p&&(l+=e.slice(d,p)),null==t[c]))break;l+=Number(t[c]),d=p+=2;break;case 105:if(c>=u||(d<p&&(l+=e.slice(d,p)),null==t[c]))break;l+=Math.floor(Number(t[c])),d=p+=2;break;case 79:case 111:case 106:if(c>=u||(d<p&&(l+=e.slice(d,p)),void 0===t[c]))break;var g=typeof t[c];if("string"===g){l+="'"+t[c]+"'",d=p+2,p++;break}if("function"===g){l+=t[c].name||"<anonymous>",d=p+2,p++;break}l+=a(t[c]),d=p+2,p++;break;case 115:if(c>=u)break;d<p&&(l+=e.slice(d,p)),l+=String(t[c]),d=p+2,p++;break;case 37:d<p&&(l+=e.slice(d,p)),l+="%",d=p+2,p++,c--}++c}++p}return-1===d?e:(d<f&&(l+=e.slice(d)),l)}})),$=c(((e,t)=>{var r=P();t.exports=i;var n=function(){function e(e){return"undefined"!=typeof e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{},a={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:p,res:p,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function i(e){(e=e||{}).browser=e.browser||{};let t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,a),c=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");let p=e.level||"info",g=Object.create(r);g.log||(g.log=h),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(y,g,"error","log"),o(y,g,"fatal","error"),o(y,g,"warn","error"),o(y,g,"info","log"),o(y,g,"debug","log"),o(y,g,"trace","log")}});let y={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:f(e)};return g.levels=i.levels,g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=h,g.serializers=a,g._serialize=s,g._stdErrSerialize=c,g.child=function(r){if(!r)throw new Error("missing bindings for child Pino");let n=r.serializers;if(s&&n){var i=Object.assign({},a,n),o=!0===e.browser.serialize?Object.keys(i):s;delete r.serializers,u([r],o,i,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.error=l(e,r,"error"),this.fatal=l(e,r,"fatal"),this.warn=l(e,r,"warn"),this.info=l(e,r,"info"),this.debug=l(e,r,"debug"),this.trace=l(e,r,"trace"),i&&(this.serializers=i,this._serialize=o),t&&(this._logEvent=d([].concat(e._logEvent.bindings,r)))}return c.prototype=this,new c(this)},t&&(g._logEvent=d()),g}function o(e,t,r,a){let o=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?h:o[r]?o[r]:n[r]||n[a]||h,function(e,t,r){!e.transmit&&t[r]===h||(t[r]=function(a){return function(){let o=e.timestamp(),l=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var f=0;f<l.length;f++)l[f]=arguments[f];if(e.serialize&&!e.asObject&&u(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?a.call(d,s(this,r,l,o)):a.apply(d,l),e.transmit){let n=e.transmit.level||t.level,a=i.levels.values[n],s=i.levels.values[r];if(s<a)return;c(this,{ts:o,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:i.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}}}(t[r]))}(e,t,r)}function s(e,t,n,a){e._serialize&&u(n,e._serialize,e.serializers,e._stdErrSerialize);let o=n.slice(),s=o[0],l={};a&&(l.time=a),l.level=i.levels.values[t];let c=1+(0|e._childLevel);if(c<1&&(c=1),null!==s&&"object"==typeof s){for(;c--&&"object"==typeof o[0];)Object.assign(l,o.shift());s=o.length?r(o.shift(),o):void 0}else"string"==typeof s&&(s=r(o.shift(),o));return void 0!==s&&(l.msg=s),l}function u(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=i.stdSerializers.err(e[a]);else if("object"==typeof e[a]&&!Array.isArray(e[a]))for(let n in e[a])t&&t.indexOf(n)>-1&&n in r&&(e[a][n]=r[n](e[a][n]))}function l(e,t,r){return function(){let n=new Array(1+arguments.length);n[0]=t;for(var a=1;a<n.length;a++)n[a]=arguments[a-1];return e[r].apply(this,n)}}function c(e,t,r){let n=t.send,a=t.ts,i=t.methodLevel,o=t.methodValue,s=t.val,l=e._logEvent.bindings;u(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=o,n(i,e._logEvent,s),e._logEvent=d(l)}function d(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function f(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?y:m}function p(){return{}}function g(e){return e}function h(){}function y(){return!1}function m(){return Date.now()}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=a,i.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})})),M=c(((e,t)=>{var n,a;n=e,a=function(e){var t="function"==typeof WeakSet,r=Object.keys;function n(e,t){return e===t||e!==e&&t!==t}function a(e){return e.constructor===Object||null==e.constructor}function i(e){return!!e&&"function"==typeof e.then}function o(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var u=t?function(){return new WeakSet}:s;function l(e){return function(t){var r=e||t;return function(e,t,n){void 0===n&&(n=u());var a=!!e&&"object"==typeof e,i=!!t&&"object"==typeof t;if(a||i){var o=a&&n.has(e),s=i&&n.has(t);if(o||s)return o&&s;a&&n.add(e),i&&n.add(t)}return r(e,t,n)}}}var c=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function d(e,t,n,a){var i=r(e),s=i.length;if(r(t).length!==s)return!1;if(s)for(var u=void 0;s-- >0;){if("_owner"===(u=i[s])){var l=o(e),d=o(t);if((l||d)&&l!==d)return!1}if(!c(t,u)||!n(e[u],t[u],a))return!1}return!0}var f="function"==typeof Map,p="function"==typeof Set;function g(e){var t="function"==typeof e?e(r):r;function r(e,r,o){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(a(e)&&a(r))return d(e,r,t,o);var s=Array.isArray(e),u=Array.isArray(r);return s||u?s===u&&function(e,t,r,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r(e[a],t[a],n))return!1;return!0}(e,r,t,o):(s=e instanceof Date,u=r instanceof Date,s||u?s===u&&n(e.getTime(),r.getTime()):(s=e instanceof RegExp,u=r instanceof RegExp,s||u?s===u&&function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}(e,r):i(e)||i(r)?e===r:f&&(s=e instanceof Map,u=r instanceof Map,s||u)?s===u&&function(e,t,r,n){var a=e.size===t.size;return a&&e.size&&e.forEach((function(e,i){a&&(a=!1,t.forEach((function(t,o){!a&&r(i,o,n)&&(a=r(e,t,n))})))})),a}(e,r,t,o):p&&(s=e instanceof Set,u=r instanceof Set,s||u)?s===u&&function(e,t,r,n){var a=e.size===t.size;return a&&e.size&&e.forEach((function(e){a&&(a=!1,t.forEach((function(t){a||(a=r(e,t,n))})))})),a}(e,r,t,o):d(e,r,t,o)))}return e!==e&&r!==r}return r}var h=g(),y=g((function(){return n})),m=g(l()),v=g(l(n));e.circularDeepEqual=m,e.circularShallowEqual=v,e.createCustomEqual=g,e.deepEqual=h,e.sameValueZeroEqual=n,e.shallowEqual=y,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&"undefined"!=typeof t?a(e):"function"==typeof define&&r.amdO?define(["exports"],a):a((n="undefined"!=typeof globalThis?globalThis:n||self)["fast-equals"]={})})),L={};d(L,{buildMockCaseAssistEngine:()=>ns,buildMockProductListingEngine:()=>rs,buildMockProductRecommendationsAppEngine:()=>ts,buildMockRaw:()=>ss,buildMockRecommendationAppEngine:()=>es,buildMockResult:()=>us,buildMockSearchAppEngine:()=>Go,createMockState:()=>Ve});var D=p(g()),_=p(O()),N=new Error("Failed to load reducers."),z=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},Q=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}};function U(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function B(e){return 429===e}var H=class{static async call(e){let t=function(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s="POST"===e.method||"PUT"===e.method,u=function(e,t){return"application/x-www-form-urlencoded"===t?function(e){return!("object"!=typeof e||!e)&&Object.values(e).every(U)}(e)?function(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}(e):"":JSON.stringify(e)}(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...s&&{body:u},signal:o}}(e),{preprocessRequest:r,logger:n}=e,a={...t,...r?await r(t,"searchApiFetch"):{}};n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let e=await(0,D.default)(i,o);if(B(e.status))throw e;return e};try{let e=await(0,_.backOff)(s,{retry:e=>{let t=e&&B(e.status);return t&&n.info("Platform retrying request"),t}});if(419===e.status)throw n.info("Platform renewing token"),new z;if(404===e.status)throw new Q(i,e.status);return n.info({response:e,requestInfo:a},"Platform response"),e}catch(u){return"Failed to fetch"===u.message?new Q(i):u}}};function Y(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function W(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:Y("platform",e)}function J(e){return Y("analytics",e)}var K=p(q()),Z=p(x()),X=p(I());K.default.extend(Z.default),K.default.extend(X.default);var G="/rest/search/v2",ee="/rest/ua",te=()=>({organizationId:"",accessToken:"",platformUrl:W(),search:{apiBaseUrl:`${W()}${G}`,locale:"en-US",timezone:K.default.tz.guess()},analytics:{enabled:!0,apiBaseUrl:`${J()}${ee}`,originLevel2:"default",originLevel3:"default",anonymous:!1}});var re=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ne=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let a in this.definition){let e=this.definition[a].validate(r[a]);e&&n.push(`${a}: ${e}`)}if(n.length)throw function(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new re(r)}(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},ae=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&oe(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function ie(e){return void 0===e}function oe(e){return ie(e)||function(e){return null===e}(e)}var se=class{constructor(e={}){this.config=e,this.value=new ae(e)}validate(e){return this.value.validate(e)||(function(e){return ie(e)||ue(e)}(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function ue(e){return"number"==typeof e&&!isNaN(e)}var le=class{constructor(e={}){this.value=new ae(e)}validate(e){return this.value.validate(e)||(function(e){return ie(e)||ce(e)}(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function ce(e){return"boolean"==typeof e}var de=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,fe=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new ae(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(ie(e)?null:pe(e)?t||e.length?r&&!de.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function pe(e){return"[object String]"===Object.prototype.toString.call(e)}var ge=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ie(e))return this.config.options.required?"value is required and is currently undefined":null;if(!he(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&oe(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);null!==i&&(t+=" "+i)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function he(e){return void 0!==e&&"object"==typeof e}var ye=class{constructor(e={}){this.config=e,this.value=new ae(this.config)}validate(e){if(!oe(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(oe(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&oe(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return ce(e)||pe(e)||ue(e)||he(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function me(e){return Array.isArray(e)}var ve,be,Se=class{constructor(e){this.config=e,this.value=new ae(e)}validate(e){let t=this.value.validate(e);return null!==t?t:ie(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},we=((be=we||{}).Ascending="ascending",be.Descending="descending",be),Ce=((ve=Ce||{}).Relevancy="relevancy",ve.QRE="qre",ve.Date="date",ve.Field="field",ve.NoSort="nosort",ve),Oe=e=>{if(me(e))return e.map((e=>Oe(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},qe=()=>({by:"relevancy"}),xe=e=>({by:"date",order:e}),Ie=(e,t)=>({by:"field",order:t,field:e}),Re=()=>({by:"qre"}),Fe=()=>({by:"nosort"}),Ae=new ge({values:{by:new Se({enum:Ce,required:!0}),order:new Se({enum:we}),field:new fe}});function Ee(){return Oe(qe())}var je=e=>({past:[],present:e,future:[]});function ke(){return Te({})}function Te(e){var t,r;return{context:e.context||{contextValues:{}},dictionaryFieldContext:e.dictionaryFieldContext||{contextValues:{}},facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},pagination:e.pagination||{firstResult:0,numberOfResults:10,totalCountFiltered:0},query:e.query||{q:"",enableQuerySyntax:!1},tabSet:e.tabSet||{},advancedSearchQueries:e.advancedSearchQueries||{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:""}},staticFilterSet:e.staticFilterSet||{},querySet:e.querySet||{},sortCriteria:e.sortCriteria||Ee(),pipeline:e.pipeline||"",searchHub:e.searchHub||"default",facetOptions:e.facetOptions||{freezeFacetOrder:!1},facetOrder:null!=(t=e.facetOrder)?t:[],debug:null!=(r=e.debug)&&r}}function Ve(e={}){return{configuration:te(),advancedSearchQueries:{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:""}},staticFilterSet:{},facetSet:{},dateFacetSet:{},numericFacetSet:{},categoryFacetSet:{},facetSearchSet:{},categoryFacetSearchSet:{},facetOptions:{freezeFacetOrder:!1},pagination:{firstResult:0,numberOfResults:10,totalCountFiltered:0},query:{q:"",enableQuerySyntax:!1},querySet:{},tabSet:{},querySuggest:{},redirection:{redirectTo:null},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""},sortCriteria:Ee(),context:{contextValues:{}},dictionaryFieldContext:{contextValues:{}},didYouMean:{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:{correctedQuery:"",wordCorrections:[],originalQuery:""},originalQuery:""},fields:{fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"],fetchAllFields:!1,fieldsDescription:[]},history:je(ke()),pipeline:"",facetOrder:[],searchHub:"default",debug:!1,resultPreview:{uniqueId:"",content:"",isLoading:!1},version:"unit-testing-version",folding:{enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},triggers:{redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""},questionAnswering:{liked:!1,disliked:!1,expanded:!1,relatedQuestions:[]},standaloneSearchBoxSet:{},recentResults:{results:[],maxLength:10},recentQueries:{queries:[],maxLength:10},...e}}var Pe=p(j()),$e={};function Me(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Le(e){return!!e&&!!e[qt]}function De(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[Ot]||!!e.constructor[Ot]||Be(e)||He(e))}function _e(e,t,r){void 0===r&&(r=!1),0===Ne(e)?(r?Object.keys:xt)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function Ne(e){var t=e[qt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Be(e)?2:He(e)?3:0}function ze(e,t){return 2===Ne(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Qe(e,t,r){var n=Ne(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function Ue(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Be(e){return bt&&e instanceof Map}function He(e){return St&&e instanceof Set}function Ye(e){return e.o||e.t}function We(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=It(e);delete t[qt];for(var r=xt(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function Je(e,t){return void 0===t&&(t=!1),Ze(e)||Le(e)||!De(e)||(Ne(e)>1&&(e.set=e.add=e.clear=e.delete=Ke),Object.freeze(e),t&&_e(e,(function(e,t){return Je(t,!0)}),!0)),e}function Ke(){Me(2)}function Ze(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Xe(e){var t=Rt[e];return t||Me(18,e),t}function Ge(){return mt}function et(e,t){t&&(Xe("Patches"),e.u=[],e.s=[],e.v=t)}function tt(e){rt(e),e.p.forEach(at),e.p=null}function rt(e){e===mt&&(mt=e.l)}function nt(e){return mt={p:[],l:mt,h:e,m:!0,_:0}}function at(e){var t=e[qt];0===t.i||1===t.i?t.j():t.g=!0}function it(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||Xe("ES5").S(t,e,n),n?(r[qt].P&&(tt(t),Me(4)),De(e)&&(e=ot(t,e),t.l||ut(t,e)),t.u&&Xe("Patches").M(r[qt],e,t.u,t.s)):e=ot(t,r,[]),tt(t),t.u&&t.v(t.u,t.s),e!==Ct?e:void 0}function ot(e,t,r){if(Ze(t))return t;var n=t[qt];if(!n)return _e(t,(function(a,i){return st(e,n,t,a,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return ut(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=We(n.k):n.o;_e(3===n.i?new Set(a):a,(function(t,i){return st(e,n,a,t,i,r)})),ut(e,a,!1),r&&e.u&&Xe("Patches").R(n,r,e.u,e.s)}return n.o}function st(e,t,r,n,a,i){if(Le(a)){var o=ot(e,a,i&&t&&3!==t.i&&!ze(t.D,n)?i.concat(n):void 0);if(Qe(r,n,o),!Le(o))return;e.m=!1}if(De(a)&&!Ze(a)){if(!e.h.N&&e._<1)return;ot(e,a),t&&t.A.l||ut(e,a)}}function ut(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&Je(t,r)}function lt(e,t){var r=e[qt];return(r?Ye(r):e)[t]}function ct(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function dt(e){e.P||(e.P=!0,e.l&&dt(e.l))}function ft(e){e.o||(e.o=We(e.t))}function pt(e,t,r){var n=Be(t)?Xe("MapSet").T(t,r):He(t)?Xe("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:Ge(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,i=Ft;r&&(a=[n],i=At);var o=Proxy.revocable(a,i),s=o.revoke,u=o.proxy;return n.k=u,n.j=s,u}(t,r):Xe("ES5").J(t,r);return(r?r.A:Ge()).p.push(n),n}function gt(e){return Le(e)||Me(22,e),function e(t){if(!De(t))return t;var r,n=t[qt],a=Ne(t);if(n){if(!n.P&&(n.i<4||!Xe("ES5").K(n)))return n.t;n.I=!0,r=ht(t,a),n.I=!1}else r=ht(t,a);return _e(r,(function(t,a){n&&function(e,t){return 2===Ne(e)?e.get(t):e[t]}(n.t,t)===a||Qe(r,t,e(a))})),3===a?new Set(r):r}(e)}function ht(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return We(e)}d($e,{MiddlewareArray:()=>Zt,configureStore:()=>ar,createAction:()=>ir,createAsyncThunk:()=>wr,createDraftSafeSelector:()=>zt,createEntityAdapter:()=>yr,createImmutableStateInvariantMiddleware:()=>Gt,createNextState:()=>Tt,createReducer:()=>lr,createSelector:()=>Lt,createSerializableStateInvariantMiddleware:()=>rr,createSlice:()=>cr,current:()=>gt,findNonSerializableValue:()=>tr,freeze:()=>Je,getDefaultMiddleware:()=>nr,getType:()=>sr,isAllOf:()=>Rr,isAnyOf:()=>Ir,isAsyncThunkAction:()=>Vr,isFulfilled:()=>Tr,isImmutableDefault:()=>Xt,isPending:()=>Er,isPlain:()=>er,isPlainObject:()=>Kt,isRejected:()=>jr,isRejectedWithValue:()=>kr,nanoid:()=>mr,unwrapResult:()=>Cr});var yt,mt,vt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),bt="undefined"!=typeof Map,St="undefined"!=typeof Set,wt="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Ct=vt?Symbol.for("immer-nothing"):((yt={})["immer-nothing"]=!0,yt),Ot=vt?Symbol.for("immer-draftable"):"__$immer_draftable",qt=vt?Symbol.for("immer-state"):"__$immer_state",xt=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),It=Object.getOwnPropertyDescriptors||function(e){var t={};return xt(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Rt={},Ft={get:function(e,t){if(t===qt)return e;var r=Ye(e);if(!ze(r,t))return function(e,t,r){var n,a=ct(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!De(n)?n:n===lt(e.t,t)?(ft(e),e.o[t]=pt(e.A.h,n,e)):n},has:function(e,t){return t in Ye(e)},ownKeys:function(e){return Reflect.ownKeys(Ye(e))},set:function(e,t,r){var n=ct(Ye(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=lt(Ye(e),t),i=null==a?void 0:a[qt];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(Ue(r,a)&&(void 0!==r||ze(e.t,t)))return!0;ft(e),dt(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==lt(e.t,t)||t in e.t?(e.D[t]=!1,ft(e),dt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Ye(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Me(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Me(12)}},At={};_e(Ft,(function(e,t){At[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),At.deleteProperty=function(e,t){return Ft.deleteProperty.call(this,e[0],t)},At.set=function(e,t,r){return Ft.set.call(this,e[0],t,r,e[0])};var Et=function(){function e(e){this.O=wt,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var n=t;t=e;var a=this;return function(e){var r=this;void 0===e&&(e=n);for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=t).call.apply(n,[r,e].concat(o))}))}}var i;if("function"!=typeof t&&Me(6),void 0!==r&&"function"!=typeof r&&Me(7),De(e)){var o=nt(this),s=pt(this,e,void 0),u=!0;try{i=t(s),u=!1}finally{u?tt(o):rt(o)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return et(o,r),it(e,o)}),(function(e){throw tt(o),e})):(et(o,r),it(i,o))}if(!e||"object"!=typeof e)return(i=t(e))===Ct?void 0:(void 0===i&&(i=e),this.N&&Je(i,!0),i);Me(21,e)},t.produceWithPatches=function(e,t){var r,n,a=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return a.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},t.createDraft=function(e){De(e)||Me(8),Le(e)&&(e=gt(e));var t=nt(this),r=pt(this,e,void 0);return r[qt].C=!0,rt(t),r},t.finishDraft=function(e,t){var r=(e&&e[qt]).A;return et(r,t),it(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!wt&&Me(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var a=Xe("Patches").$;return Le(e)?a(e,t):this.produce(e,(function(e){return a(e,t.slice(r+1))}))},e}(),jt=new Et,kt=jt.produce,Tt=(jt.produceWithPatches.bind(jt),jt.setAutoFreeze.bind(jt),jt.setUseProxies.bind(jt),jt.applyPatches.bind(jt),jt.createDraft.bind(jt),jt.finishDraft.bind(jt),kt),Vt=p(A());function Pt(e,t){return e===t}function $t(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}function Mt(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}f($e,p(A()));var Lt=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var i=0,o=n.pop(),s=Mt(n),u=e.apply(void 0,[function(){return i++,o.apply(null,arguments)}].concat(r)),l=e((function(){for(var e=[],t=s.length,r=0;r<t;r++)e.push(s[r].apply(null,arguments));return u.apply(null,e)}));return l.resultFunc=o,l.dependencies=s,l.recomputations=function(){return i},l.resetRecomputations=function(){return i=0},l}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pt,r=null,n=null;return function(){return $t(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));function Dt(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var _t=Dt();_t.withExtraArgument=Dt;var Nt=_t,zt=function(){var e=Lt.apply(void 0,arguments),t=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return e.apply(void 0,[Le(t)?gt(t):t].concat(n))};return t};function Qt(){return Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qt.apply(this,arguments)}function Ut(e){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ut(e)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function Yt(e,t,r){return Yt=Ht()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Bt(a,r.prototype),a},Yt.apply(null,arguments)}function Wt(e){var t="function"==typeof Map?new Map:void 0;return Wt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Yt(e,arguments,Ut(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bt(r,e)},Wt(e)}var Jt="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Vt.compose:Vt.compose.apply(null,arguments)};function Kt(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}var Zt=function(e){function t(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var r=t.prototype;return r.concat=function(){for(var r,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Yt(t,(r=e.prototype.concat).call.apply(r,[this].concat(a)))},r.prepend=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?Yt(t,r[0].concat(this)):Yt(t,r.concat(this))},t}(Wt(Array));function Xt(e){return"object"!=typeof e||null===e||"undefined"==typeof e}function Gt(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function er(e){return"undefined"==typeof e||null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||Array.isArray(e)||Kt(e)}function tr(e,t,r,n,a){var i;if(void 0===t&&(t=[]),void 0===r&&(r=er),void 0===a&&(a=[]),!r(e))return{keyPath:t.join(".")||"<root>",value:e};if("object"!=typeof e||null===e)return!1;var o=null!=n?n(e):Object.entries(e),s=a.length>0,u=o,l=Array.isArray(u),c=0;for(u=l?u:u[Symbol.iterator]();;){var d;if(l){if(c>=u.length)break;d=u[c++]}else{if((c=u.next()).done)break;d=c.value}var f=d,p=f[0],g=f[1],h=t.concat(p);if(!(s&&a.indexOf(h.join("."))>=0)){if(!r(g))return{keyPath:h.join("."),value:g};if("object"==typeof g&&(i=tr(g,h,r,n,a)))return i}}return!1}function rr(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function nr(e){void 0===e&&(e={});var t=e,r=t.thunk,n=void 0===r||r,a=(t.immutableCheck,t.serializableCheck,new Zt);return n&&(function(e){return"boolean"==typeof e}(n)?a.push(Nt):a.push(Nt.withExtraArgument(n.extraArgument))),a}function ar(e){var t,r=function(e){return nr(e)},n=e||{},a=n.reducer,i=void 0===a?void 0:a,o=n.middleware,s=void 0===o?r():o,u=n.devTools,l=void 0===u||u,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)t=i;else{if(!Kt(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,Vt.combineReducers)(i)}var g=Vt.applyMiddleware.apply(void 0,"function"==typeof s?s(r):s),h=Vt.compose;l&&(h=Jt(Qt({trace:!1},"object"==typeof l&&l)));var y=[g];Array.isArray(p)?y=[g].concat(p):"function"==typeof p&&(y=p(y));var m=h.apply(void 0,y);return(0,Vt.createStore)(t,d,m)}function ir(e,t){function r(){if(t){var r=t.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return Qt({type:e,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function or(e){return["type","payload","error","meta"].indexOf(e)>-1}function sr(e){return""+e}function ur(e){var t,r={},n=[],a={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,a},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[r,n,t]}function lr(e,t,r,n){void 0===r&&(r=[]);var a="function"==typeof t?ur(t):[t,r,n],i=a[0],o=a[1],s=a[2];return function(t,r){void 0===t&&(t=e);var n=[i[r.type]].concat(o.filter((function(e){return(0,e.matcher)(r)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,t){if(t){if(Le(e)){var n=t(e,r);return"undefined"==typeof n?e:n}if(De(e))return Tt(e,(function(e){return t(e,r)}));var a=t(e,r);if("undefined"==typeof a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),t)}}function cr(e){var t=e.name,r=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var n=e.reducers||{},a="undefined"==typeof e.extraReducers?[]:"function"==typeof e.extraReducers?ur(e.extraReducers):[e.extraReducers],i=a[0],o=void 0===i?{}:i,s=a[1],u=void 0===s?[]:s,l=a[2],c=void 0===l?void 0:l,d=Object.keys(n),f={},p={},g={};d.forEach((function(e){var r,a,i=n[e],o=function(e,t){return e+"/"+t}(t,e);"reducer"in i?(r=i.reducer,a=i.prepare):r=i,f[e]=r,p[o]=r,g[e]=a?ir(o,a):ir(o)}));var h=lr(r,Qt({},o,{},p),u,c);return{name:t,reducer:h,actions:g,caseReducers:f}}function dr(e){var t=fr((function(t,r){return e(r)}));return function(e){return t(e,void 0)}}function fr(e){return function(t,r){function n(e){return function(e){return Kt(e)&&"string"==typeof e.type&&Object.keys(e).every(or)}(e)}var a=function(t){n(r)?e(r.payload,t):e(r,t)};return Le(t)?(a(t),t):Tt(t,a)}}function pr(e,t){return t(e)}function gr(e){function t(t,r){var n=pr(t,e);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function r(e,r){Array.isArray(e)||(e=Object.values(e));var n=e,a=Array.isArray(n),i=0;for(n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}t(o,r)}}function n(e,t){var r=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],r=!0)})),r&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function a(t,r){var n={},a={};if(t.forEach((function(e){e.id in r.entities&&(a[e.id]={id:e.id,changes:Qt({},a[e.id]?a[e.id].changes:null,{},e.changes)})})),(t=Object.values(a)).length>0){var i=t.filter((function(t){return function(t,r,n){var a=n.entities[r.id],i=Object.assign({},a,r.changes),o=pr(i,e),s=o!==r.id;return s&&(t[r.id]=o,delete n.entities[r.id]),n.entities[o]=i,s}(n,t,r)})).length>0;i&&(r.ids=r.ids.map((function(e){return n[e]||e})))}}function i(t,n){Array.isArray(t)||(t=Object.values(t));var i=[],o=[],s=t,u=Array.isArray(s),l=0;for(s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++]}else{if((l=s.next()).done)break;c=l.value}var d=c,f=pr(d,e);f in n.entities?o.push({id:f,changes:d}):i.push(d)}a(o,n),r(i,n)}return{removeAll:dr((function(e){Object.assign(e,{ids:[],entities:{}})})),addOne:fr(t),addMany:fr(r),setAll:fr((function(e,t){Array.isArray(e)||(e=Object.values(e)),t.ids=[],t.entities={},r(e,t)})),updateOne:fr((function(e,t){return a([e],t)})),updateMany:fr(a),upsertOne:fr((function(e,t){return i([e],t)})),upsertMany:fr(i),removeOne:fr((function(e,t){return n([e],t)})),removeMany:fr(n)}}function hr(e,t){var r=gr(e);function n(t,r){Array.isArray(t)||(t=Object.values(t));var n=t.filter((function(t){return!(pr(t,e)in r.entities)}));0!==n.length&&o(n,r)}function a(t,r){var n=[];t.forEach((function(t){return function(t,r,n){if(!(r.id in n.entities))return!1;var a=n.entities[r.id],i=Object.assign({},a,r.changes),o=pr(i,e);return delete n.entities[r.id],t.push(i),o!==r.id}(n,t,r)})),0!==n.length&&o(n,r)}function i(t,r){Array.isArray(t)||(t=Object.values(t));var i=[],o=[],s=t,u=Array.isArray(s),l=0;for(s=u?s:s[Symbol.iterator]();;){var c;if(u){if(l>=s.length)break;c=s[l++]}else{if((l=s.next()).done)break;c=l.value}var d=c,f=pr(d,e);f in r.entities?o.push({id:f,changes:d}):i.push(d)}a(o,r),n(i,r)}function o(r,n){r.sort(t),r.forEach((function(t){n.entities[e(t)]=t}));var a=Object.values(n.entities);a.sort(t);var i=a.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(n.ids,i)||(n.ids=i)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:fr((function(e,t){return n([e],t)})),updateOne:fr((function(e,t){return a([e],t)})),upsertOne:fr((function(e,t){return i([e],t)})),setAll:fr((function(e,t){Array.isArray(e)||(e=Object.values(e)),t.entities={},t.ids=[],n(e,t)})),addMany:fr(n),updateMany:fr(a),upsertMany:fr(i)}}function yr(e){void 0===e&&(e={});var t=Qt({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,a={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},i={getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=zt(t,r,(function(e,t){return e.map((function(e){return t[e]}))})),a=function(e,t){return t},i=function(e,t){return e[t]},o=zt(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:o,selectById:zt(r,a,i)};var s=zt(e,r);return{selectIds:zt(e,t),selectEntities:s,selectAll:zt(e,n),selectTotal:zt(e,o),selectById:zt(s,a,i)}}};return Qt({selectId:r,sortComparer:n},a,{},i,{},n?hr(r,n):gr(r))}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var mr=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},vr=["name","message","stack","code"],br=function(e){this.payload=e,this.name="RejectWithValue",this.message="Rejected"},Sr=function(e){if("object"==typeof e&&null!==e){var t={},r=vr,n=Array.isArray(r),a=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if((a=r.next()).done)break;i=a.value}var o=i;"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}};function wr(e,t,r){var n=ir(e+"/fulfilled",(function(e,t,r){return{payload:e,meta:{arg:r,requestId:t,requestStatus:"fulfilled"}}})),a=ir(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e,requestStatus:"pending"}}})),i=ir(e+"/rejected",(function(e,t,n){var a=e instanceof br,i=!!e&&"AbortError"===e.name,o=!!e&&"ConditionError"===e.name;return{payload:e instanceof br?e.payload:void 0,error:(r&&r.serializeError||Sr)(e||"Rejected"),meta:{arg:n,requestId:t,rejectedWithValue:a,requestStatus:"rejected",aborted:i,condition:o}}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,u,l){var c,d=mr(),f=new o,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),g=!1;var h=function(){try{var o,c=function(e){return h?e:(r&&!r.dispatchConditionRejection&&i.match(o)&&o.meta.condition||s(o),o)},h=!1,y=function(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}((function(){if(r&&r.condition&&!1===r.condition(e,{getState:u,extra:l}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return g=!0,s(a(d,e)),Promise.resolve(Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:u,extra:l,requestId:d,signal:f.signal,rejectWithValue:function(e){return new br(e)}})).then((function(t){return t instanceof br?i(t,d,e):n(t,d,e)}))])).then((function(e){o=e}))}),(function(t){o=i(t,d,e)}));return Promise.resolve(y&&y.then?y.then(c):c(y))}catch(m){return Promise.reject(m)}}();return Object.assign(h,{abort:function(e){g&&(c=e,f.abort())},requestId:d,arg:e})}}),{pending:a,rejected:i,fulfilled:n,typePrefix:e})}function Cr(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Or,qr,xr=function(e,t){return function(e){return e&&"function"==typeof e.match}(e)?e.match(t):e(t)};function Ir(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.some((function(t){return xr(t,e)}))}}function Rr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.every((function(t){return xr(t,e)}))}}function Fr(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function Ar(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Er(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return Fr(e,["pending"])}:Ar(t)?function(e){var r=t.map((function(e){return e.pending}));return Ir.apply(void 0,r)(e)}:Er()(t[0])}function jr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return Fr(e,["rejected"])}:Ar(t)?function(e){var r=t.map((function(e){return e.rejected}));return Ir.apply(void 0,r)(e)}:jr()(t[0])}function kr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===t.length||Ar(t)?function(e){return Rr(jr.apply(void 0,t),n)(e)}:kr()(t[0])}function Tr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return Fr(e,["fulfilled"])}:Ar(t)?function(e){var r=t.map((function(e){return e.fulfilled}));return Ir.apply(void 0,r)(e)}:Tr()(t[0])}function Vr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return Fr(e,["pending","fulfilled","rejected"])}:Ar(t)?function(e){var r=[],n=t,a=Array.isArray(n),i=0;for(n=a?n:n[Symbol.iterator]();;){var o;if(a){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var s=o;r.push(s.pending,s.rejected,s.fulfilled)}return Ir.apply(void 0,r)(e)}:Vr()(t[0])}function Pr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function $r(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}u((n=n.apply(e,t||[])).next())}))}function Mr(){return"undefined"!=typeof navigator}function Lr(){return"undefined"!=typeof document}function Dr(){try{return"undefined"!=typeof localStorage}catch{return!1}}function _r(){return Mr()&&navigator.cookieEnabled}function Nr(){return"undefined"!=typeof crypto&&"undefined"!=typeof crypto.getRandomValues}!function(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[qt];return Ft.get(t,e)},set:function(t){var r=this[qt];Ft.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][qt];if(!a.P)switch(a.i){case 5:n(a)&&dt(a);break;case 4:r(a)&&dt(a)}}}function r(e){for(var t=e.t,r=e.k,n=xt(r),a=n.length-1;a>=0;a--){var i=n[a];if(i!==qt){var o=t[i];if(void 0===o&&!ze(t,i))return!0;var s=r[i],u=s&&s[qt];if(u?u.t!==o:!Ue(s,o))return!0}}var l=!!t[qt];return n.length!==xt(t).length+(l?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var a={};!function(e,t){Rt[e]||(Rt[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var i=It(r);delete i[qt];for(var o=xt(i),s=0;s<o.length;s++){var u=o[s];i[u]=e(u,t||!!i[u].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:Ge(),P:!1,I:!1,D:{},l:r,t:t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,qt,{value:i,writable:!0}),a},S:function(e,r,a){a?Le(r)&&r[qt].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[qt];if(r){var a=r.t,i=r.k,o=r.D,s=r.i;if(4===s)_e(i,(function(t){t!==qt&&(void 0!==a[t]||ze(a,t)?o[t]||e(i[t]):(o[t]=!0,dt(r)))})),_e(a,(function(e){void 0!==i[e]||ze(i,e)||(o[e]=!1,dt(r))}));else if(5===s){if(n(r)&&(dt(r),o.length=!0),i.length<a.length)for(var u=i.length;u<a.length;u++)o[u]=!1;else for(var l=a.length;l<i.length;l++)o[l]=!0;for(var c=Math.min(i.length,a.length),d=0;d<c;d++)void 0===o[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}(),(qr=Or||(Or={})).search="search",qr.click="click",qr.custom="custom",qr.view="view",qr.collect="collect";var zr=[Or.click,Or.custom,Or.search,Or.view],Qr=(e,t)=>-1!==zr.indexOf(e)?Object.assign({language:Lr()?document.documentElement.lang:"unknown",userAgent:Mr()?navigator.userAgent:"unknown"},t):t,Ur=class{static set(e,t,r){var n,a,i,o;r?((a=new Date).setTime(a.getTime()+r),i="; expires="+a.toGMTString()):i="",-1===(o=location.hostname).indexOf(".")?document.cookie=e+"="+t+i+"; path=/":((n=o.split(".")).shift(),Br({name:e,value:t,expires:i,domain:"."+n.join(".")}),(null==Ur.get(e)||Ur.get(e)!=t)&&Br({name:e,value:t,expires:i,domain:"."+o}))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(0==(a=a.replace(/^\s+/,"")).indexOf(t))return a.substring(t.length,a.length)}return null}static erase(e){Ur.set(e,"",-1)}};function Br(e){let{name:t,value:r,expires:n,domain:a}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${a}; SameSite=Lax`}function Hr(){return Dr()?localStorage:_r()?new Yr:function(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}()?sessionStorage:new Wr}var Yr=class{getItem(e){return Ur.get(`${Yr.prefix}${e}`)}removeItem(e){Ur.erase(`${Yr.prefix}${e}`)}setItem(e,t){Ur.set(`${Yr.prefix}${e}`,t)}};Yr.prefix="coveo_";var Wr=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},Jr="__coveo.analytics.history",Kr=class{constructor(e){this.store=e||Hr()}addElement(e){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return $r(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripInternalTime(e)}getHistoryAsync(){return $r(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripInternalTime(e)}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(Jr);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return $r(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(Jr);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(Jr,JSON.stringify(e.slice(0,20)))}catch{}}clear(){try{this.store.removeItem(Jr)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return null!=e?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){e.name&&"query"==e.name.toLowerCase()&&null!=e.value&&(e.value=e.value.slice(0,75))}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}}))}},Zr=Object.freeze({__proto__:null,STORE_KEY:Jr,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,MAX_VALUE_SIZE:75,HistoryStore:Kr,default:Kr}),Xr=(e,t)=>$r(void 0,void 0,void 0,(function*(){return e===Or.view?(yield Gr(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),Gr=e=>$r(void 0,void 0,void 0,(function*(){let t=new Kr,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)})),en=e=>e?(Number(e)^tn(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,en),tn=e=>{if(Nr())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)0==(3&t)&&(r=4294967296*Math.random()),e[t]=r>>>((3&t)<<3)&255;return e},rn=Object.keys,nn={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},an=rn(nn).map((e=>nn[e])),on=[...an].join("|"),sn=new RegExp(`^(${on}$)`),un=[e=>sn.test(e)],ln={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},cn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},dn={action:"pa",list:"pal",listSource:"pls"},fn={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},pn={id:"quoteId",affiliation:"quoteAffiliation"},gn={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},hn={add:dn,bookmark_add:dn,bookmark_remove:dn,click:dn,checkout:dn,checkout_option:dn,detail:dn,impression:dn,remove:dn,refund:Object.assign(Object.assign({},dn),fn),purchase:Object.assign(Object.assign({},dn),fn),quickview:dn,quote:Object.assign(Object.assign({},dn),pn),review:Object.assign(Object.assign({},dn),gn)},yn=rn(ln).map((e=>ln[e])),mn=rn(cn).map((e=>cn[e])),vn=rn(dn).map((e=>dn[e])),bn=rn(fn).map((e=>fn[e])),Sn=rn(gn).map((e=>gn[e])),wn=rn(pn).map((e=>pn[e])),Cn=[...yn,"custom"].join("|"),On=[...mn,"custom"].join("|"),qn="(pr[0-9]+)",xn="(il[0-9]+pi[0-9]+)",In=new RegExp(`^${qn}(${Cn})$`),Rn=new RegExp(`^(${xn}(${On}))|(il[0-9]+nm)$`),Fn=new RegExp(`^(${vn.join("|")})$`),An=new RegExp(`^(${bn.join("|")})$`),En=new RegExp(`^${qn}custom$`),jn=new RegExp(`^${xn}custom$`),kn=new RegExp(`^(${["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...Sn,...wn].join("|")})$`),Tn=[e=>Rn.test(e),e=>In.test(e),e=>Fn.test(e),e=>An.test(e),e=>kn.test(e)],Vn=[En,jn],Pn=Object.assign(Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),$n=Object.assign(Object.assign({},Pn),{svcAction:"svc_action",svcActionData:"svc_action_data"}),Mn=rn($n).map((e=>$n[e])),Ln=e=>-1!==Mn.indexOf(e),Dn=e=>"custom"===e,_n=e=>{let t;return[...Vn].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},Nn=(e,t)=>rn(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),zn=window.fetch,Qn=class{constructor(e){this.opts=e}sendEvent(e,t){return $r(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:u}=s,l=Pr(s,["url"]),c=yield zn(u,l);if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,c,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}shouldAppendVisitorId(e){return-1!==[Or.click,Or.custom,Or.search,Or.view].indexOf(e)}getVisitorIdParam(){return $r(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}};var Un,Bn="https://analytics.cloud.coveo.com/rest/ua",Hn=class{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Xr,Qr].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),Mr()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>!!e))&&(this.clear(),this.runtime.storage=new Wr)}get defaultOptions(){return{endpoint:Bn,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return"undefined"!=typeof window&&Lr()?new class{constructor(e,t){Dr()&&_r()?this.storage=new class{constructor(){this.cookieStorage=new Yr}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}}:Dr()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new Wr),this.client=new Qn(e),this.beaconClient=new class{constructor(e){this.opts=e}sendEvent(e,t){return $r(this,void 0,void 0,(function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=this.encodeForEventType(e,t),i=yield this.getQueryParamsForEventType(e),o={url:`${r}/analytics/${e}?${i}`,body:new Blob([a],{type:"application/x-www-form-urlencoded"})},{url:s,body:u}=Object.assign(Object.assign({},o),n?yield n(o,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,u)}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return $r(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[Or.click,Or.custom,Or.search,Or.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}}(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}}(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please install @react-native-async-storage/async-storage and instantiate \n        your analytics client as follows:\n        \n        import {ReactNativeRuntime} from 'coveo.analytics/react-native';\n        \n        const analytics = new CoveoAnalytics({\n            ...your options,\n            runtimeEnvironment: new ReactNativeRuntime();\n        })\n    "),new class{constructor(e,t){this.storage=t||new Wr,this.client=new Qn(e)}}(e))}get storage(){return this.runtime.storage}determineVisitorId(){return $r(this,void 0,void 0,(function*(){try{return(yield this.storage.getItem("visitorId"))||en()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),en()}}))}getCurrentVisitorId(){return $r(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return $r(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}getParameters(e,...t){return $r(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return $r(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(en()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return $r(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>$r(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>a?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>$r(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>$r(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return $r(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[t=>this.removeEmptyPayloadValues(t,e),e=>this.validateParams(e),e=>r?(e=>{let t=!!e.action&&hn[e.action]||{};return rn(e).reduce(((r,n)=>{let a=t[n]||$n[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})}),{})})(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):e].reduce(((e,t)=>$r(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}sendEvent(e,...t){return $r(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:a}),yield Promise.all(this.afterSendHooks.map((t=>t(e,n)))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBufferWithFetch(){return $r(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.client.sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Kr).clear()}sendSearchEvent(e){return $r(this,void 0,void 0,(function*(){return this.sendEvent(Or.search,e)}))}sendClickEvent(e){return $r(this,void 0,void 0,(function*(){return this.sendEvent(Or.click,e)}))}sendCustomEvent(e){return $r(this,void 0,void 0,(function*(){return this.sendEvent(Or.custom,e)}))}sendViewEvent(e){return $r(this,void 0,void 0,(function*(){return this.sendEvent(Or.view,e)}))}getVisit(){return $r(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return $r(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let a=t[n];if("string"==typeof a)r[e[n]]=a;else if("object"==typeof a)return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return-1!==({[Or.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>this.isKeyAllowedEmpty(t,r)||(e=>"undefined"!=typeof e&&null!==e&&""!==e)(e[r]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if((e=>[...Tn,...un,Ln,Dn].some((t=>t(e))))(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Pr(e,["custom"]),n=this.lowercaseKeys(t),a=(e=>rn(e).reduce(((t,r)=>{let n=_n(r);return n?Object.assign(Object.assign({},t),Nn(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}))(r);return Object.assign(Object.assign({},n),a)}lowercaseKeys(e){return Object.keys(e||{}).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]})),{})}validateParams(e){let{anonymizeIp:t}=e,r=Pr(e,["anonymizeIp"]);return void 0!==t&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${t}`.toLowerCase())&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Pr(e,["userId"]);return(e=>(null==e?void 0:e.startsWith("xx"))||!1)(this.options.token)&&!t?(r.userId="anonymous",r):e}get baseUrl(){let{version:e,endpoint:t}=this.options,r=-1!==t.indexOf(".cloud.coveo.com");return`${t}${r?"":"/rest"}/${e}`}};!function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack"}(Un||(Un={}));var Yn,Wn={[Un.triggerNotify]:"queryPipelineTriggers",[Un.triggerExecute]:"queryPipelineTriggers",[Un.triggerQuery]:"queryPipelineTriggers",[Un.triggerRedirect]:"queryPipelineTriggers",[Un.queryError]:"errors",[Un.queryErrorBack]:"errors",[Un.queryErrorClear]:"errors",[Un.queryErrorRetry]:"errors",[Un.pagerNext]:"getMoreResults",[Un.pagerPrevious]:"getMoreResults",[Un.pagerNumber]:"getMoreResults",[Un.pagerResize]:"getMoreResults",[Un.pagerScrolling]:"getMoreResults",[Un.facetSearch]:"facet",[Un.facetShowLess]:"facet",[Un.facetShowMore]:"facet",[Un.recommendation]:"recommendation",[Un.likeSmartSnippet]:"smartSnippet",[Un.dislikeSmartSnippet]:"smartSnippet",[Un.expandSmartSnippet]:"smartSnippet",[Un.collapseSmartSnippet]:"smartSnippet",[Un.openSmartSnippetFeedbackModal]:"smartSnippet",[Un.closeSmartSnippetFeedbackModal]:"smartSnippet",[Un.sendSmartSnippetReason]:"smartSnippet",[Un.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Un.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Un.clearRecentQueries]:"recentQueries",[Un.recentResultClick]:"recentlyClickedDocuments",[Un.clearRecentResults]:"recentlyClickedDocuments"};!function(e){e.DoesNotAnswer="does_not_answer",e.PartiallyAnswers="partially_answers",e.WasNotAQuestion="was_not_a_question",e.Other="other"}(Yn||(Yn={}));var Jn=class{constructor(){this.runtime=new class{constructor(){this.storage=new Wr,this.client=new class{sendEvent(e,t){return $r(this,void 0,void 0,(function*(){return Promise.resolve()}))}}}},this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function Kn(e){let t=e.join(";");return t.length<=256?t:Kn(e.slice(1))}var Zn=e=>{let t=function(e){return e.map((e=>e.replace(/;/g,"")))}(e),r=function(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}(t);return Kn(r)};function Xn(e){let t="string"==typeof e.partialQueries?e.partialQueries:Zn(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:Zn(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Gn,ea,ta,ra={pageview:"pageview",event:"event"},na=Object.assign({},ra);Object.keys(na).map((e=>na[e]));!function(e){e.click="click",e.flowStart="flowStart"}(Gn||(Gn={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(ea||(ea={})),function(e){e.quit="Quit",e.solved="Solved"}(ta||(ta={}));var aa=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"},ia=(e,t)=>"productListing"in e&&e.productListing?e.productListing.facets.results.find((e=>e.facetId===t)):"search"in e&&e.search?e.search.response.facets.find((e=>e.facetId===t)):void 0,oa=(e,t)=>e.facetSet[t];var sa=(e,t)=>{let r=ia(e,t);if(function(e,t){return!!t&&t.facetId in e.facetSet}(e,r))return r},ua=(e,t)=>{let r=sa(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]},la=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function ca(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}var da=(e,t)=>{let r=ia(e,t);if(function(e,t){return!!t&&t.facetId in e.categoryFacetSet}(e,r))return r},fa=(e,t)=>{let r=da(e,t);return ca(null==r?void 0:r.values).parents},pa=(e,t)=>{let r=Oa(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:`${n}_${e}`}};function ga(e,t){let{facetId:r,facetValue:n}=e;return{...pa(r,t),facetValue:"hierarchical"===qa(t,r)?Sa(t,r):n}}function ha(e){return{facetSet:e.facetSet||{},categoryFacetSet:e.categoryFacetSet||{},dateFacetSet:e.dateFacetSet||{},numericFacetSet:e.numericFacetSet||{},..."search"in e&&{search:e.search?e.search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}},..."productListing"in e&&{productListing:e.productListing?e.productListing:{url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}}}}var ya=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],ma=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),va=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),ba=e=>({displayValue:e.value,value:e.value}),Sa=(e,t)=>fa(e,t).map((e=>e.value)).join(";"),wa=(e,t)=>{let r=Sa(e,t);return{value:r,valuePosition:1,displayValue:r}},Ca=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),Oa=(e,t)=>{var r;return e.facetSet[t]||(null==(r=e.categoryFacetSet[t])?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},qa=(e,t)=>{let r=Oa(e,t);return r?r.type:"specific"},xa="1.42.0",Ia=class{constructor(e){this.state=e}getLanguage(){return aa(this.state)}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[n,a]of Object.entries(t)){r[`context_${n}`]=a}return r.coveoHeadlessVersion=xa,r}getSearchUID(){var e,t,r;return(null==(e=this.state.search)?void 0:e.response.searchUid)||(null==(t=this.state.recommendation)?void 0:t.searchUid)||(null==(r=this.state.productListing)?void 0:r.responseId)||""}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||"default"}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}getFacetState(){return(e=>{let t=[];return ya(e).forEach(((r,n)=>{let a=qa(e,r.facetId),i=Ca(r,n+1);if("hierarchical"!==a)r.values.forEach(((e,r)=>{if("idle"===e.state)return;let n=ma(e,r+1,a),o="specific"===a?ba(e):va(e);t.push({...i,...n,...o})}));else{if(!fa(e,r.facetId).length)return;t.push({...i,...wa(e,r.facetId),facetType:a,state:"selected"})}})),t})(ha(this.state))}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.search)?void 0:e.response.results.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||""}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||0}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.results.length)||[].length}},Ra=({logger:e,state:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new Ia(t)})=>{let i=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,u=t.configuration.analytics.enabled,l=new class{constructor(e,t){this.opts=e,this.provider=t,this.coveoAnalyticsClient=!1===e.enableAnalytics?new Jn:new Hn(e)}disable(){this.coveoAnalyticsClient instanceof Hn&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new Jn}enable(){this.coveoAnalyticsClient=new Hn(this.opts)}logInterfaceLoad(){return this.logSearchEvent(Un.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(Un.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(Un.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(Un.recommendationOpen,e,t)}logStaticFilterClearAll(e){return this.logSearchEvent(Un.staticFilterClearAll,e)}logStaticFilterSelect(e){return this.logSearchEvent(Un.staticFilterSelect,e)}logStaticFilterDeselect(e){return this.logSearchEvent(Un.staticFilterDeselect,e)}logFetchMoreResults(){return this.logCustomEvent(Un.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(Un.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(Un.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(Un.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(Un.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(Un.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(Un.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(Un.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(Un.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(Un.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(Un.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(Un.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(Un.omniboxAnalytics,Xn(e))}logOmniboxFromLink(e){return this.logSearchEvent(Un.omniboxFromLink,Xn(e))}logSearchFromLink(){return this.logSearchEvent(Un.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(Un.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(Un.triggerExecute,e)}logTriggerQuery(){let e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(Un.triggerQuery,e)}logTriggerRedirect(e){let t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(Un.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(Un.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(Un.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(Un.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(Un.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(Un.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(Un.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(Un.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(Un.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(Un.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(Un.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(Un.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(Un.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(Un.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(Un.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(Un.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(Un.queryError,e)}logQueryErrorBack(){return $r(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Un.queryErrorBack),this.logSearchEvent(Un.queryErrorBack)}))}logQueryErrorRetry(){return $r(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Un.queryErrorRetry),this.logSearchEvent(Un.queryErrorRetry)}))}logQueryErrorClear(){return $r(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Un.queryErrorClear),this.logSearchEvent(Un.queryErrorClear)}))}logLikeSmartSnippet(){return this.logCustomEvent(Un.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(Un.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(Un.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(Un.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(Un.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(Un.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(Un.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(Un.expandSmartSnippetSuggestion,{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(Un.collapseSmartSnippetSuggestion,{documentId:e})}logRecentQueryClick(){return this.logSearchEvent(Un.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(Un.clearRecentQueries)}logRecentResultClick(e,t){return this.logCustomEvent(Un.recentResultClick,{info:e,identifier:t})}logClearRecentResults(){return this.logCustomEvent(Un.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(Un.noResultsBack)}logCustomEvent(e,t){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},this.getBaseCustomEventRequest(r)),{eventType:Wn[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)}logCustomEventWithType(e,t,r){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(a)}logSearchEvent(e,t){return this.coveoAnalyticsClient.sendSearchEvent(this.getBaseSearchEventRequest(e,t))}logClickEvent(e,t,r,n){let a=Object.assign(Object.assign(Object.assign({},t),this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)}getBaseSearchEventRequest(e,t){return Object.assign(Object.assign(Object.assign({},this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})}getBaseCustomEventRequest(e){return Object.assign(Object.assign({},this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})}getBaseEventRequest(e){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous()})}getOrigins(){return{originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}}({token:i,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(t,r)=>(e.info({...r,type:t,endpoint:o,token:i},"Analytics request"),r)]},a);return u||l.disable(),l},Fa=()=>new Hn({}).getCurrentVisitorId(),Aa=new Zr.HistoryStore;function Ea(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function ja(e){if(e instanceof Q)return{error:Ea(e)};throw e}var ka=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${Ta(e)}`}),Ta=e=>`organizationId=${e.organizationId}`;var Va=TextDecoder,Pa=class{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){let t=await H.call({...ka(e,"POST","application/json","/plan"),requestParams:za(e),...this.options});if(t instanceof Error)return ja(t);let r=await t.json();return function(e){return void 0!==e.preprocessingOutput}(r)?{success:r}:{error:$a({response:t,body:r})}}async querySuggest(e){let t=await H.call({...ka(e,"POST","application/json","/querySuggest"),requestParams:za(e),...this.options});if(t instanceof Error)return ja(t);let r=await t.json(),n={response:t,body:r};return function(e){return void 0!==e.completions}(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:$a(n)}}async search(e){var t;this.searchAbortController&&(this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();let r=await H.call({...ka(e,"POST","application/json",""),requestParams:za(e),...this.options,signal:null==(t=this.searchAbortController)?void 0:t.signal});if(r instanceof Error)return ja(r);this.searchAbortController=null;let n=await r.json(),a={response:r,body:n};return Na(n)?(a.body=function(e){let t={answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0};return oe(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}(n),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:$a(a)}}async facetSearch(e){let t=await H.call({...ka(e,"POST","application/json","/facet"),requestParams:za(e),...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await H.call({...ka(e,"POST","application/json",""),requestParams:za(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return Na(r)?{success:r}:{error:$a({response:t,body:r})}}async html(e){let t=await H.call({...ka(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:za(e),...this.options});if(t instanceof Error)throw t;let r=function(e){return((e.headers.get("content-type")||"").split(";").find((e=>-1!==e.indexOf("charset=")))||"").split("=")[1]||"UTF-8"}(t),n=await t.arrayBuffer(),a=new Va(r).decode(n);return function(e){return"string"==typeof e}(a)?{success:a}:{error:$a({response:t,body:a})}}async productRecommendations(e){let t=await H.call({...ka(e,"POST","application/json",""),requestParams:za(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return Na(r)?{success:r}:{error:$a({response:t,body:r})}}async fieldDescriptions(e){let t=await H.call({...ka(e,"GET","application/json","/fields"),requestParams:{},...this.options});if(t instanceof Error)throw t;let r=await t.json();return function(e){return void 0!==e.fields}(r)?{success:r}:{error:$a({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){if("undefined"==typeof window){return new(k())}return"undefined"==typeof AbortController?null:new AbortController}},$a=e=>{let{response:t}=e;return t.body?Ma(e):La(t)},Ma=e=>function(e){return void 0!==e.body.exception}(e)?Da(e):function(e){return void 0!==e.body.statusCode}(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},La=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}},Da=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),_a=e=>void 0!==e.error;function Na(e){return void 0!==e.results}function za(e){let{url:t,accessToken:r,organizationId:n,...a}=e;return a}var Qa=new fe({required:!0,emptyAllowed:!1}),Ua=new fe({required:!1,emptyAllowed:!1}),Ba=new fe({required:!0,emptyAllowed:!0}),Ha=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Ya=(e,t)=>{if("required"in t)return{payload:new ne({value:t}).validate({value:e}).value};let r=new ge({options:{required:!0},values:t}).validate(e);if(r)throw new re(r);return{payload:e}},Wa=(e,t)=>{try{return Ya(e,t)}catch(be){return{payload:e,error:Ha(be)}}},Ja=(e,t,r,n)=>Za(e,t,r,`Check the initialState of ${n}`,"Controller initialization error"),Ka=(e,t,r,n)=>Za(e,t,r,`Check the options of ${n}`,"Controller initialization error"),Za=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(ve){throw e.logger.error(ve,a),ve}},Xa=(e,t=5)=>e+Math.random().toString(36).substr(2,2+t);function Ga(e){return Array.isArray(e)}function ei(e){return""===e.trim()}function ti(e){let t=ri(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return function(e,t){return Object.values(e.reduce(((e,r,n)=>({...e,[t(r,n)]:r})),{}))}([e,...t,...r],(e=>e.uniqueId))}function ri(e){return e.childResults?e.childResults.flatMap((e=>[e,...ri(e)])):[]}var ni,ai=((ni=ai||{})[ni.Search=0]="Search",ni[ni.Custom=1]="Custom",ni[ni.Click=2]="Click",ni),ii=(e,t,r,n=(e=>new Ia(e)))=>wr(e,(async(e,{getState:a,extra:{analyticsClientMiddleware:i,preprocessRequest:o,logger:s}})=>{let u=(e=>e())(a),l=Ra({state:u,logger:s,analyticsClientMiddleware:i,preprocessRequest:o,provider:n(u)}),c=await r(l,u);return s.info({client:l.coveoAnalyticsClient,response:c},"Analytics response"),{analyticsType:t}})),oi=((e=>{wr("analytics/noop",(async()=>({analyticsType:e})))})(0),(e,t)=>{var r;let n=-1,a=null==(r=t.search)?void 0:r.results;return n=gi(e,a),n<0&&(n=function(e,t){for(let[r,n]of t.entries()){if(-1!==gi(e,ti(n)))return r}return-1}(e,a)),n<0&&(n=0),function(e,t,r){let n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:di(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:fi(e),queryPipeline:r.pipeline||""}}(e,(e=>{var r,n;return e+(null!=(n=null==(r=t.pagination)?void 0:r.firstResult)?n:0)})(n),t)});var si=e=>({contentIDKey:"@permanentid",contentIDValue:e.raw.permanentid||""}),ui={urihash:new fe,sourcetype:new fe,permanentid:new fe},li={uniqueId:Qa,raw:new ge({values:ui}),title:Qa,uri:Qa,clickUri:Qa,rankingModifier:new fe({required:!1,emptyAllowed:!0})};function ci(e){return Object.assign({},...Object.keys(ui).map((t=>({[t]:e[t]}))))}function di(e){let t=e.raw.author;return oe(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function fi(e){let t=e.raw.source;return oe(t)?"unknown":t}var pi=e=>new ne(li).validate(function(e){return Object.assign({},...Object.keys(li).map((t=>({[t]:e[t]}))),{raw:ci(e.raw)})}(e));function gi(e,t=[]){return t.findIndex((({uniqueId:t})=>t===e.uniqueId))}var hi=ii("analytics/recommendation/update",ai.Search,(e=>e.logRecommendationInterfaceLoad())),yi=ir("recommendation/set",(e=>Wa(e,{id:Qa}))),mi=wr("recommendation/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=(new Date).getTime(),o=await n.recommendations(await vi(a)),s=(new Date).getTime()-i;return _a(o)?r(o.error):{recommendations:o.success.results,analyticsAction:hi(),duration:s,searchUid:o.success.searchUid}})),vi=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?Aa.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await Fa()}}),bi=ir("history/undo"),Si=ir("history/redo"),wi=ir("history/snapshot"),Ci=wr("history/back",(async(e,{dispatch:t})=>{t(bi()),await t(qi())})),Oi=wr("history/forward",(async(e,{dispatch:t})=>{t(Si()),await t(qi())})),qi=wr("history/change",(async(e,{getState:t})=>t().history.present)),xi=ii("analytics/didyoumean/click",ai.Search,(e=>e.logDidYouMeanClick())),Ii=ii("analytics/didyoumean/automatic",ai.Search,(e=>e.logDidYouMeanAutomatic())),Ri=ir("didYouMean/enable"),Fi=ir("didYouMean/disable"),Ai=ir("didYouMean/correction",(e=>Wa(e,Qa))),Ei=ir("query/updateQuery",(e=>Wa(e,{q:new fe,enableQuerySyntax:new le}))),ji=ii("search/logFetchMoreResults",ai.Search,(e=>e.logFetchMoreResults())),ki=e=>ii("search/queryError",ai.Search,((t,r)=>{var n,a,i;return t.logQueryError({query:(null==(n=r.query)?void 0:n.q)||"",aq:(null==(a=r.advancedSearchQueries)?void 0:a.aq)||"",cq:(null==(i=r.advancedSearchQueries)?void 0:i.cq)||"",dq:"",errorType:e.type,errorMessage:e.message})}))(),Ti=p(q()),Vi=p(q()),Pi=p(T());Vi.default.extend(Pi.default);var $i="YYYY/MM/DD@HH:mm:ss";function Mi(e){return e.format($i)}function Li(e,t){let r=(0,Vi.default)(e,t);if(!r.isValid()){let r=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?n:r}`)}Di(r)}function Di(e){if(e.isBefore("1401-01-01"))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var _i=p(V());Ti.default.extend(_i.default);var Ni=["past","now","next"],zi=["minute","hour","day","week","month","quarter","year"];function Qi(e){if("string"==typeof e&&!Yi(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?Wi(e):e;new ne((e=>{let t="now"===e;return{amount:new se({required:!t,min:1}),unit:new fe({required:!t,constrainTo:zi}),period:new fe({required:!0,constrainTo:Ni})}})(t.period)).validate(t);let r=Ui(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);Di(r)}function Ui(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Ti.default)().subtract(r,n);case"next":return(0,Ti.default)().add(r,n);case"now":return(0,Ti.default)()}}function Bi(e){return Mi(Ui(Wi(e)))}function Hi(e){return e.toLocaleLowerCase().split("-")}function Yi(e){let[t,r,n]=Hi(e);if("now"===t)return!0;if(!Ni.includes(t)||!zi.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function Wi(e){let[t,r,n]=Hi(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Ji(e){return Qi(e),Wi(e)}function Ki(e){return`start${e}`}function Zi(e){return`end${e}`}function Xi(e,t){if(function(e){return"dateRange"===e.type}(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>function(e,t,r){let n=e.start,a=e.end;return Yi(n)&&(n=Bi(n),r.dateFacetValueMap[t][Ki(n)]=e.start),Yi(a)&&(a=Bi(a),r.dateFacetValueMap[t][Zi(a)]=e.end),{...e,start:n,end:a}}(e,r,t)))}}return e}function Gi(e,t){return function(e,t){return e.facetId in t.dateFacetValueMap}(e,t)?{...e,values:e.values.map((r=>function(e,t,r){return{...e,start:r.dateFacetValueMap[t][Ki(e.start)]||e.start,end:r.dateFacetValueMap[t][Zi(e.end)]||e.end}}(r,e.facetId,t)))}:e}var eo=new se({required:!0,min:0}),to=ir("pagination/registerNumberOfResults",(e=>Wa(e,eo))),ro=ir("pagination/updateNumberOfResults",(e=>Wa(e,eo))),no=ir("pagination/registerPage",(e=>Wa(e,eo))),ao=ir("pagination/updatePage",(e=>Wa(e,eo))),io=ir("pagination/nextPage"),oo=ir("pagination/previousPage");function so(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let a=Object.values(r);return[...n,...a]}var uo=async e=>{var t,r,n;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Fa()},...(null==(t=e.advancedSearchQueries)?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(r=e.advancedSearchQueries)?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(n=e.advancedSearchQueries)?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria}}},lo=async e=>{var t;let r=function(e){var t;let r=(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find((e=>e.isActive)),a=(null==n?void 0:n.expression.trim())||"",i=function(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>"selected"===e.state&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}(e);return[r,a,...i].filter((e=>!!e)).join(" AND ")}(e),n=function(e){var t;return so(function(e){return[...fo(e.facetSet),...fo(e.numericFacetSet),...fo(e.dateFacetSet),...co(e.categoryFacetSet)]}(e),null!=(t=e.facetOrder)?t:[])}(e);return function(e){var t;let r={dateFacetValueMap:{}};return{request:{...e,facets:null==(t=e.facets)?void 0:t.map((e=>Xi(e,r)))},mappings:r}}({...await uo(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:e.facetOptions},...(null==(t=e.folding)?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function co(e){return Object.values(e||{}).map((e=>e.request))}function fo(e={}){return Object.keys(e).map((t=>e[t]))}var po=ir("breadcrumb/deselectAll"),go=ir("facet/deselectAllFacets"),ho=ir("facet/updateFacetAutoSelection",(e=>Wa(e,{allow:new le({required:!0})}))),yo=async(e,t,{request:r,mappings:n})=>{var a;let i=(new Date).getTime(),o=function(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map((e=>Gi(e,t)))}}:e}(await e.search(r),n);return{response:o,duration:(new Date).getTime()-i,queryExecuted:(null==(a=t.query)?void 0:a.q)||"",requestExecuted:r}},mo=wr("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Wa(e,{q:new fe,enableQuerySyntax:new le}),r(po()),r(ho({allow:!0})),r(Ei(e)),r(ao(1))})),vo=wr("search/executeSearch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();qo(i);let o=await yo(a.apiClient,i,await lo(i));if(_a(o.response))return r(ki(o.response.error)),n(o.response.error);if(!Co(i,o.response.success))return r(wi(Te(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:xo(i),analyticsAction:e};let{correctedQuery:s}=o.response.success.queryCorrections[0],u=await wo(a.apiClient,s,t,r);if(_a(u.response))return r(ki(u.response.error)),n(u.response.error);let l=o.response.success;return e(r,(()=>So(o.queryExecuted,o.duration,i,l)),a),r(wi(Te(t()))),{...u,response:{...u.response.success,queryCorrections:o.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:xo(i),analyticsAction:Ii()}})),bo=wr("search/fetchMoreResults",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await yo(a,i,await Oo(i));return _a(o.response)?(r(ki(o.response.error)),n(o.response.error)):(r(wi(Te(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:xo(i),analyticsAction:ji()})})),So=(e,t,r,n)=>{var a,i;return{...r,query:{q:e,enableQuerySyntax:null!=(i=null==(a=r.query)?void 0:a.enableQuerySyntax)&&i},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",duration:t,response:n,results:n.results}}},wo=async(e,t,r,n)=>{n(Ei({q:t}));let a=await yo(e,r(),await lo(r()));return n(Ai(t)),a},Co=(e,t)=>{var r;return!0===(null==(r=e.didYouMean)?void 0:r.enableDidYouMean)&&0===t.results.length&&0!==t.queryCorrections.length},Oo=async e=>{var t,r,n,a;let i=await lo(e);return i.request={...i.request,firstResult:(null!=(r=null==(t=e.pagination)?void 0:t.firstResult)?r:0)+(null!=(a=null==(n=e.search)?void 0:n.results.length)?a:0)},i},qo=e=>{var t;e.configuration.analytics.enabled&&Aa.addElement({name:"Query",value:(null==(t=e.query)?void 0:t.q)||"",time:JSON.stringify(new Date)})},xo=e=>{var t;return void 0!==(null==(t=e.query)?void 0:t.q)?e.query.q:""},Io=["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating"],Ro=ii("analytics/productrecommendations/load",ai.Search,(e=>e.logRecommendationInterfaceLoad()),(e=>new class{constructor(e){this.state=e,this.initialState={id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}}getLanguage(){return aa(this.state)}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){var e;return{recommendation:(null==(e=this.state.productRecommendations)?void 0:e.id)||this.initialState.id}}getSearchUID(){var e;return(null==(e=this.state.productRecommendations)?void 0:e.searchUid)||this.initialState.searchUid}getPipeline(){return""}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2||"default"}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return(null==(e=this.state.productRecommendations)?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return(null==(e=this.state.productRecommendations)?void 0:e.recommendations.length)||this.initialState.recommendations.length}}(e))),Fo=ir("productrecommendations/setId",(e=>Wa(e,{id:Qa}))),Ao=ir("productrecommendations/setSku",(e=>Wa(e,{skus:new ye({required:!0,min:1,each:Ua})}))),Eo=ir("productrecommendations/setBrand",(e=>Wa(e,{brand:new fe({required:!0,emptyAllowed:!0})}))),jo=ir("productrecommendations/setCategory",(e=>Wa(e,{category:new fe({required:!0,emptyAllowed:!0})}))),ko=ir("productrecommendations/setAdditionalFields",(e=>Wa(e,{additionalFields:new ye({required:!0,each:Ua})}))),To=ir("productrecommendations/setMaxNumberOfRecommendations",(e=>Wa(e,{number:new se({required:!0,max:50,min:1})}))),Vo=wr("productrecommendations/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=(new Date).getTime(),o=await n.productRecommendations(await $o(a)),s=(new Date).getTime()-i;if(_a(o))return r(o.error);let u=a.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map((e=>Po(e,{additionalFields:u}))),analyticsAction:Ro(),searchUid:o.success.searchUid,duration:s}})),Po=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,a=e.raw.ec_in_stock;return{permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:void 0===n||void 0!==r&&n>=r?void 0:n,ec_in_stock:void 0===a?void 0:"yes"===a.toLowerCase()||"true"===a.toLowerCase(),ec_rating:e.raw.ec_rating,additionalFields:t.reduce(((t,r)=>({...t,[r]:e.raw[r]})),{})}},$o=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Fa()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...Io,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?Aa.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}}),Mo=e=>t=>r=>{var n,a;let i=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==i&&(null==(a=r.payload)||delete a.analyticsAction);let o=t(r);return r.type===vo.fulfilled.type&&void 0===i&&console.error("No analytics action associated with search:",r),r.type===mi.fulfilled&&void 0===i&&console.error("No analytics action associated with recommendation:",r),r.type===Vo.fulfilled&&void 0===i&&console.error("No analytics action associated with product recommendation:",r),void 0!==i&&e.dispatch(i),o};function Lo(e={}){return{configuration:te(),advancedSearchQueries:{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:""}},context:{contextValues:{}},dictionaryFieldContext:{contextValues:{}},fields:{fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"],fetchAllFields:!1,fieldsDescription:[]},searchHub:"default",pipeline:"",recommendation:{duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""},debug:!1,version:"unit-testing-version",...e}}function Do(e={}){return{configuration:te(),context:{contextValues:{}},dictionaryFieldContext:{contextValues:{}},searchHub:"default",productRecommendations:{id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0},version:"unit-testing-version",...e}}var _o=p($()),No=e=>()=>t=>r=>{if(!r.error)return t(r);let n=r.error;return e.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name?t(r):void 0},zo=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n)),Qo=p($()),Uo=e=>e,Bo=e=>e,Ho=e=>e,Yo=e=>e;function Wo(e){return new Pa({logger:(0,Qo.default)({level:"silent"}),preprocessRequest:Uo,postprocessSearchResponseMiddleware:Bo,postprocessFacetSearchResponseMiddleware:Ho,postprocessQuerySuggestResponseMiddleware:Yo,...e})}var Jo=(e=>(e.Relevance="relevance",e.Fields="fields",e))(Jo||{}),Ko=(e=>(e.Ascending="asc",e.Descending="desc",e))(Ko||{});new ge({options:{required:!1},values:{by:new Se({enum:Jo,required:!0}),fields:new ye({each:new ge({values:{name:new fe,direction:new Se({enum:Ko})}})})}});function Zo(e={}){return{configuration:te(),productListing:{url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""},sort:{by:"relevance"},facetSearchSet:{},categoryFacetSet:{},categoryFacetSearchSet:{},dateFacetSet:{},facetOptions:{freezeFacetOrder:!1},facetOrder:[],facetSet:{},numericFacetSet:{},pagination:{firstResult:0,numberOfResults:10,totalCountFiltered:0},version:"unit-testing-version",...e}}function Xo(e={}){return{configuration:te(),caseAssistConfiguration:{caseAssistId:"",locale:"en-US"},caseField:{status:{loading:!1,error:null,lastResponseId:""},fields:{}},caseInput:{},documentSuggestion:{status:{loading:!1,error:null,lastResponseId:""},documents:[]},debug:!1,version:"unit-testing-version",...e}}function Go(e={}){return{...as(e,Ve),executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn()}}function es(e={}){return as(e,Lo)}function ts(e={}){return as(e,Do)}function rs(e={}){return as(e,Zo)}function ns(e={}){return as(e,Xo)}function as(e={},t){let r=(0,_o.default)({level:"silent"}),n=os(r)(is(e,t)),a=()=>{},{state:i,...o}=e;return{store:n,state:is(e,t),subscribe:jest.fn((()=>a)),get dispatch(){return n.dispatch},get actions(){return n.getActions()},findAsyncAction(e){let t=this.actions.find((t=>t.type===e.type));return function(e){return!!e&&"meta"in e}(t)?t:void 0},logger:r,addReducers:jest.fn(),enableAnalytics:jest.fn(),disableAnalytics:jest.fn(),...o}}function is(e,t){let r=e.state||t();return r.configuration.analytics.enabled=!1,r}var os=e=>{let t={searchAPIClient:Wo({logger:e}),apiClient:Wo({logger:e}),validatePayload:Ya,logger:e};return(0,Pe.default)([No(e),Mo,Nt.withExtraArgument(t),...nr(),zo(e)])};function ss(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function us(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:ss(),...e}}var ls={};function cs(e){if(ei(e.openingDelimiter)||ei(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(oe(e.content)||ei(e.content))return e.content;let t=e.content.length,r="",n=0;for(let a=0;a<e.highlights.length;a++){let i=e.highlights[a],o=i.offset,s=o+i.length;if(s>t)break;r+=ps(e.content.slice(n,o)),r+=e.openingDelimiter,r+=ps(e.content.slice(o,s)),r+=e.closingDelimiter,n=s}return n!==t&&(r+=e.content.slice(n)),r}function ds(e,t){return(e=ps(e)).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,a)=>r?fs(r,t.notMatchDelimiters):n?fs(n,t.exactMatchDelimiters):a?fs(a,t.correctionDelimiters):e))}function fs(e,t){return t?t.open+e+t.close:e}function ps(e){return e.replace(/&/g,"&amp").replace(/</g,"&lt").replace(/>/g,"&gt").replace(/"/g,"&quot").replace(/`/g,"&#96").replace(/'/g,"&#x27")}d(ls,{escape:()=>ps,getHighlightedSuggestion:()=>ds,highlightString:()=>cs});var gs=()=>Ua,hs=()=>Qa,ys=ir("configuration/updateBasicConfiguration",(e=>Wa(e,{accessToken:Ua,organizationId:Ua,platformUrl:Ua}))),ms=ir("configuration/updateSearchConfiguration",(e=>Wa(e,{apiBaseUrl:Ua,pipeline:Ua,searchHub:Ua,timezone:Ua,locale:Ua}))),vs=ir("configuration/updateAnalyticsConfiguration",(e=>Wa(e,{enabled:new le({default:!0}),originLevel2:gs(),originLevel3:gs(),apiBaseUrl:Ua,runtimeEnvironment:new ae,anonymous:new le({default:!1})}))),bs=ir("configuration/analytics/disable"),Ss=ir("configuration/analytics/enable"),ws=ir("configuration/analytics/originlevel2",(e=>Wa(e,{originLevel2:hs()}))),Cs=ir("configuration/analytics/originlevel3",(e=>Wa(e,{originLevel3:hs()})));var Os=ir("advancedSearchQueries/update",(e=>Wa(e,{aq:new fe({required:!1,emptyAllowed:!0}),cq:new fe({required:!1,emptyAllowed:!0}),lq:new fe({required:!1,emptyAllowed:!0})}))),qs=ir("advancedSearchQueries/register",(e=>Wa(e,{aq:new fe({required:!1,emptyAllowed:!0}),cq:new fe({required:!1,emptyAllowed:!0}),lq:new fe({required:!1,emptyAllowed:!0})}))),xs={q:new fe,enableQuerySyntax:new le,aq:new fe,cq:new fe,firstResult:new se({min:0}),numberOfResults:new se({min:0}),sortCriteria:new fe,f:new ge,cf:new ge,nf:new ge,df:new ge,debug:new le,sf:new ge,tab:new fe},Is=ir("searchParameters/restore",(e=>Wa(e,xs))),Rs=lr({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:""}},(e=>{e.addCase(Os,((e,t)=>{let{aq:r,cq:n,lq:a}=t.payload;ie(r)||(e.aq=r,e.aqWasSet=!0),ie(n)||(e.cq=n,e.cqWasSet=!0),ie(a)||(e.lq=a,e.lqWasSet=!0)})).addCase(qs,((e,t)=>{let{aq:r,cq:n,lq:a}=t.payload;ie(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),ie(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),ie(a)||(e.defaultFilters.lq=a,e.lqWasSet||(e.lq=a))})).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e})).addCase(Is,((e,t)=>{let{aq:r,cq:n}=t.payload;ie(r)||(e.aq=r,e.aqWasSet=!0),ie(n)||(e.cq=n,e.cqWasSet=!0)}))})),Fs=ir("tab/register",(e=>{let t=new ge({values:{id:Qa,expression:Ba}});return Wa(e,t)})),As=ir("tab/updateActiveTab",(e=>Wa(e,Qa)));var Es=lr(te(),(e=>e.addCase(ys,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${G}`,e.analytics.apiBaseUrl=function(e,t){if(/^https:\/\/platform(dev|qa|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+ee;let r=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return r?e.replace(r[1],"analytics.cloud")+ee:e}(t.payload.platformUrl,e.organizationId))})).addCase(ms,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone)})).addCase(vs,((e,t)=>{oe(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),oe(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),oe(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),oe(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),oe(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),oe(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous)})).addCase(bs,(e=>{e.analytics.enabled=!1})).addCase(Ss,(e=>{e.analytics.enabled=!0})).addCase(ws,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(Cs,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(As,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(Is,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2})))),js=new ye({each:Qa,required:!0}),ks=(e,t)=>(Wa(e,Qa),pe(t)?Wa(t,Qa):Wa(t,js),{payload:{contextKey:e,contextValue:t}}),Ts=ir("context/set",(e=>{for(let[t,r]of Object.entries(e))ks(t,r);return{payload:e}})),Vs=ir("context/add",(e=>ks(e.contextKey,e.contextValue))),Ps=ir("context/remove",(e=>Wa(e,Qa))),$s=lr({contextValues:{}},(e=>{e.addCase(Ts,((e,t)=>{e.contextValues=t.payload})).addCase(Vs,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(Ps,((e,t)=>{delete e.contextValues[t.payload]})).addCase(qi.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.context.contextValues)}))})),Ms=ir("debug/enable"),Ls=ir("debug/disable"),Ds=lr(!1,(e=>{e.addCase(Ms,(()=>!0)).addCase(Ls,(()=>!1)).addCase(Is,((e,t)=>{var r;return null!=(r=t.payload.debug)?r:e}))})),_s=lr(xa,(e=>e)),Ns=lr({enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:{correctedQuery:"",wordCorrections:[],originalQuery:""},originalQuery:""},(e=>{e.addCase(Ri,(e=>{e.enableDidYouMean=!0})).addCase(Fi,(e=>{e.enableDidYouMean=!1})).addCase(vo.pending,(e=>{e.queryCorrection={correctedQuery:"",wordCorrections:[],originalQuery:""},e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(vo.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||{correctedQuery:"",wordCorrections:[],originalQuery:""},e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(Ai,((e,t)=>{e.wasCorrectedTo=t.payload}))})),zs=ir("facetOptions/update",(e=>Wa(e,{freezeFacetOrder:new le({required:!1})}))),Qs=lr({freezeFacetOrder:!1},(e=>{e.addCase(zs,((e,t)=>({...e,...t.payload}))).addCase(vo.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(vo.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e}))})),Us=Qa,Bs={state:new ae({required:!0}),numberOfResults:new se({required:!0,min:0}),value:new fe({required:!0,emptyAllowed:!0}),path:new ye({required:!0,each:Qa}),moreValuesAvailable:new le({required:!1})};function Hs(e){e.children.forEach((e=>{Hs(e)})),Ya({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Bs)}var Ys={facetId:Us,field:Qa,delimitingCharacter:new fe({required:!1,emptyAllowed:!0}),filterFacetCount:new le({required:!1}),injectionDepth:new se({required:!1,min:0}),numberOfValues:new se({required:!1,min:1}),sortCriteria:new ae({required:!1}),basePath:new ye({required:!1,each:Qa}),filterByBasePath:new le({required:!1})},Ws=ir("categoryFacet/register",(e=>Wa(e,Ys))),Js=ir("categoryFacet/toggleSelectValue",(e=>{try{return Ya(e.facetId,Qa),Hs(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Ha(t)}}})),Ks=ir("categoryFacet/deselectAll",(e=>Wa(e,Us))),Zs=ir("categoryFacet/updateNumberOfValues",(e=>Wa(e,{facetId:Us,numberOfValues:new se({required:!0,min:1})}))),Xs=ir("categoryFacet/updateSortCriterion",(e=>Wa(e,{facetId:Us,criterion:new ae})));function Gs(e,t){let{facetId:r,criterion:n}=t,a=e[r];!a||(a.sortCriteria=n)}function eu(e){!e||(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function tu(e,t){!e||(e.numberOfValues=t)}var ru={facetId:Us,captions:new ge({options:{required:!1}}),numberOfValues:new se({required:!1,min:1}),query:new fe({required:!1,emptyAllowed:!0})},nu={path:new ye({required:!0,each:Qa}),displayValue:Ba,rawValue:Ba,count:new se({required:!0,min:0})},au=ir("categoryFacet/selectSearchResult",(e=>Wa(e,{facetId:Us,value:new ge({values:nu})}))),iu=ir("categoryFacetSearch/register",(e=>Wa(e,ru)));function ou(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function su(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];let r=uu(e[0],t),n=r;for(let a of e.splice(1)){let e=uu(a,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function uu(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var lu=lr({},(e=>{e.addCase(Ws,((e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let a=function(e){return{...cu,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}(r),i=a.numberOfValues;e[n]={request:a,initialNumberOfValues:i}})).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e})).addCase(Is,((e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach((t=>{let n=e[t].request,a=r[t]||[];(a.length||n.currentValues.length)&&su(n,a,e[t].initialNumberOfValues)}))})).addCase(Xs,((e,t)=>{var r;let{facetId:n,criterion:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.sortCriteria=a)})).addCase(Js,((e,t)=>{var r;let{facetId:n,selection:a,retrieveCount:i}=t.payload,o=null==(r=e[n])?void 0:r.request;if(!o)return;let{path:s}=a,u=function(e,t,r){let n=e.currentValues;for(let a of t){let e=n[0];(!e||a!==e.value)&&(e=du(a,r),n.length=0,n.push(e)),e.retrieveChildren=!1,e.state="idle",n=e.children}return n}(o,s.slice(0,s.length-1),i);if(u.length){let e=u[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}let l=du(a.value,i);l.state="selected",u.push(l),o.numberOfValues=1})).addCase(Ks,((e,t)=>{ou(e,t.payload)})).addCase(go,(e=>{Object.keys(e).forEach((t=>ou(e,t)))})).addCase(po,(e=>{Object.keys(e).forEach((t=>ou(e,t)))})).addCase(ho,((e,t)=>Object.keys(e).forEach((r=>{e[r].request.preventAutoSelect=!t.payload.allow})))).addCase(Zs,((e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(i){if(!i.currentValues.length)return tu(i,a);!function(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=null==(r=e[n])?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&"selected"!==(null==i?void 0:i.state);)i=i.children[0];i.retrieveCount=a}}(e,t.payload)}})).addCase(au,((e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let i=[...n.path,n.rawValue];su(a.request,i,a.initialNumberOfValues)})).addCase(vo.fulfilled,((e,t)=>{let{facets:r}=t.payload.response;r.forEach((t=>{var r;if(!function(e,t){return t.facetId in e}(e,t))return;let n=t.facetId,a=null==(r=e[n])?void 0:r.request;if(!a)return;let i=function(e,t){let r=ca(e.currentValues).parents,n=ca(t.values).parents;return r.length!==n.length}(a,t);a.currentValues=i?[]:a.currentValues,a.preventAutoSelect=!1}))}))})),cu={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function du(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}var fu=lr([],(e=>{e.addCase(vo.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e}))}));function pu(e,t,r){let{facetId:n}=t;if(e[n])return;let a={...Su,...t},i=r();e[n]={options:a,isLoading:!1,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function gu(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function hu(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function yu(e,t){let r=e[t];!r||(r.isLoading=!1)}function mu(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function vu(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=Su.query)}function bu(e,t){Object.keys(e).forEach((r=>vu(e,{facetId:r},t)))}var Su={captions:{},numberOfValues:10,query:""},wu={facetId:Us,value:new ge({values:{displayValue:Ba,rawValue:Ba,count:new se({required:!0,min:0})}})},Cu=ir("facetSearch/register",(e=>Wa(e,ru))),Ou=ir("facetSearch/update",(e=>Wa(e,ru))),qu=ir("facetSearch/toggleSelectValue",(e=>Wa(e,wu))),xu=e=>ii("analytics/facet/showMore",ai.Search,((t,r)=>{Wa(e,Us);let n=pa(e,ha(r));return t.logFacetShowMore(n)}))(),Iu=e=>ii("analytics/facet/showLess",ai.Search,((t,r)=>{Wa(e,Us);let n=pa(e,ha(r));return t.logFacetShowLess(n)}))(),Ru=e=>ii("analytics/facet/sortChange",ai.Search,((t,r)=>{Wa(e,{facetId:Us,criterion:new ae({required:!0})});let{facetId:n,criterion:a}=e,i=ha(r),o={...pa(n,i),criteria:a};return t.logFacetUpdateSort(o)}))(),Fu=e=>ii("analytics/facet/reset",ai.Search,((t,r)=>{Wa(e,Us);let n=ha(r),a=pa(e,n);return t.logFacetClearAll(a)}))(),Au=e=>ii("analytics/facet/select",ai.Search,((t,r)=>{Wa(e,{facetId:Us,facetValue:Qa});let n=ha(r),a=ga(e,n);return t.logFacetSelect(a)}))(),Eu=e=>ii("analytics/facet/deselect",ai.Search,((t,r)=>{Wa(e,{facetId:Us,facetValue:Qa});let n=ha(r),a=ga(e,n);return t.logFacetDeselect(a)}))(),ju=e=>ii("analytics/facet/breadcrumb",ai.Search,((t,r)=>{Wa(e,{facetId:Us,facetValue:Qa});let n=ga(e,ha(r));return t.logBreadcrumbFacet(n)}))(),ku=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},Tu=wr("facetSearch/executeSearch",(async(e,{dispatch:t,getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i,o=r();a(e,Qa),i=Pu(o,e)?await(async(e,t)=>{let{captions:r,query:n,numberOfValues:a}=t.facetSearchSet[e].options,{field:i,currentValues:o,filterFacetCount:s}=t.facetSet[e],u=(await lo(t)).request,l=o.filter((e=>"idle"!==e.state)).map((e=>e.value)),c=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:a,query:c,field:i,ignoreValues:l,searchContext:u,filterFacetCount:s,type:"specific"}})(e,o):await(async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:a,query:i,numberOfValues:o}=r,{field:s,delimitingCharacter:u,basePath:l,filterFacetCount:c}=n,d=(await lo(t)).request,f=ku(n),p=f.length?[f]:[],g=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:l,captions:a,numberOfValues:o,query:g,field:s,delimitingCharacter:u,ignorePaths:p,searchContext:d,filterFacetCount:c,type:"hierarchical"}})(e,o);let s=await n.facetSearch(i);return t((e=>ii("analytics/facet/search",ai.Search,((t,r)=>{Wa(e,Us);let n=ha(r),a=pa(e,n);return t.logFacetSearch(a)}))())(e)),{facetId:e,response:s}})),Vu=ir("facetSearch/clearResults",(e=>Wa(e,{facetId:Us}))),Pu=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],$u=lr({},(e=>{e.addCase(iu,((e,t)=>{pu(e,t.payload,Mu)})).addCase(Ou,((e,t)=>{gu(e,t.payload)})).addCase(Tu.pending,((e,t)=>{hu(e,t.meta.arg,t.meta.requestId)})).addCase(Tu.rejected,((e,t)=>{yu(e,t.meta.arg)})).addCase(Tu.fulfilled,((e,t)=>{mu(e,t.payload,t.meta.requestId)})).addCase(Vu,((e,{payload:{facetId:t}})=>{vu(e,{facetId:t},Mu)})).addCase(vo.fulfilled,(e=>{bu(e,Mu)}))}));function Mu(){return{moreValuesAvailable:!1,values:[]}}var Lu=lr({},(e=>{e.addCase(Cu,((e,t)=>{pu(e,t.payload,Du)})).addCase(Ou,((e,t)=>{gu(e,t.payload)})).addCase(Tu.pending,((e,t)=>{hu(e,t.meta.arg,t.meta.requestId)})).addCase(Tu.rejected,((e,t)=>{yu(e,t.meta.arg)})).addCase(Tu.fulfilled,((e,t)=>{mu(e,t.payload,t.meta.requestId)})).addCase(Vu,((e,{payload:t})=>{vu(e,t,Du)})).addCase(vo.fulfilled,(e=>{bu(e,Du)}))}));function Du(){return{moreValuesAvailable:!1,values:[]}}var _u={value:Qa,numberOfResults:new se({min:0}),state:Qa},Nu={facetId:Us,field:new fe({required:!0,emptyAllowed:!0}),delimitingCharacter:new fe({required:!1,emptyAllowed:!0}),filterFacetCount:new le({required:!1}),injectionDepth:new se({required:!1,min:0}),numberOfValues:new se({required:!1,min:1}),sortCriteria:new ae({required:!1})},zu=ir("facet/register",(e=>Wa(e,Nu))),Qu=ir("facet/toggleSelectValue",(e=>Wa(e,{facetId:Us,selection:new ge({values:_u})}))),Uu=ir("facet/deselectAll",(e=>Wa(e,Us))),Bu=ir("facet/updateSortCriterion",(e=>Wa(e,{facetId:Us,criterion:new ae({required:!0})}))),Hu=ir("facet/updateNumberOfValues",(e=>Wa(e,{facetId:Us,numberOfValues:new se({required:!0,min:1})}))),Yu=ir("facet/updateIsFieldExpanded",(e=>Wa(e,{facetId:Us,isFieldExpanded:new le({required:!0})}))),Wu=ir("facet/updateFreezeCurrentValues",(e=>Wa(e,{facetId:Us,freezeCurrentValues:new le({required:!0})}))),Ju=ir("productlisting/setUrl",(e=>Wa(e,{url:new fe({required:!0,url:!0})}))),Ku=ir("productlisting/setAdditionalFields",(e=>Wa(e,{additionalFields:new ye({required:!0,each:new fe({required:!0,emptyAllowed:!1})})}))),Zu=wr("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await Xu(i));return _a(s)?(r(ki(s.error)),n(s.error)):{response:s.success}})),Xu=async e=>{var t,r,n;let a=function(e){var t;return so(function(e){return[...tl(e.facetSet),...tl(e.numericFacetSet),...tl(e.dateFacetSet),...el(e.categoryFacetSet)]}(e),null!=(t=e.facetOrder)?t:[])}(e),i=await Fa();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Gu(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||Jo.Relevance)!==Jo.Relevance&&{sort:e.sort}}};function Gu(e){return e.debug}function el(e){return Object.values(e||{}).map((e=>e.request))}function tl(e={}){return Object.keys(e).map((t=>e[t]))}var rl=lr({},(e=>{e.addCase(zu,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=function(e){return{...al,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}(t.payload))})).addCase(qi.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(Is,((e,t)=>{let r=t.payload.f||{};Object.keys(e).forEach((t=>{let n=e[t],a=r[t]||[];n.currentValues=a.map(ol),n.preventAutoSelect=a.length>0,n.numberOfValues=Math.max(a.length,n.numberOfValues)}))})).addCase(Qu,((e,t)=>{let{facetId:r,selection:n}=t.payload,a=e[r];if(!a)return;let i=a.currentValues.find((e=>e.value===n.value));if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected",a.freezeCurrentValues=!0,a.preventAutoSelect=!0})).addCase(Wu,((e,t)=>{let{facetId:r,freezeCurrentValues:n}=t.payload,a=e[r];!a||(a.freezeCurrentValues=n)})).addCase(Uu,((e,t)=>{eu(e[t.payload])})).addCase(go,(e=>{Object.keys(e).forEach((t=>{eu(e[t])}))})).addCase(po,(e=>{Object.keys(e).forEach((t=>{eu(e[t])}))})).addCase(ho,((e,t)=>Object.keys(e).forEach((r=>{e[r].preventAutoSelect=!t.payload.allow})))).addCase(Bu,((e,t)=>{Gs(e,t.payload)})).addCase(Hu,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload;tu(e[r],n)})).addCase(Yu,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,a=e[r];!a||(a.isFieldExpanded=n)})).addCase(vo.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>nl(e[t.facetId],t)))})).addCase(Zu.fulfilled,((e,t)=>{var r,n;((null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[]).forEach((t=>nl(e[t.facetId],t)))})).addCase(qu,((e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let{rawValue:i}=n,{currentValues:o}=a,s=o.find((e=>e.value===i));if(s)return void(s.state="selected");let u=ol(i),l=o.findIndex((e=>"idle"===e.state)),c=-1===l?o.length:l,d=o.slice(0,c),f=o.slice(c+1);a.currentValues=[...d,u,...f],a.numberOfValues=a.currentValues.length,a.freezeCurrentValues=!0,a.preventAutoSelect=!0}))}));function nl(e,t){!e||(e.currentValues=t.values.map(il),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var al={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function il(e){let{value:t,state:r}=e;return{value:t,state:r}}function ol(e){return{value:e,state:"selected"}}var sl=p(q()),ul={state:Qa,start:new se({required:!0}),end:new se({required:!0}),endInclusive:new le({required:!0}),numberOfResults:new se({required:!0,min:0})},ll={start:Qa,end:Qa,endInclusive:new le({required:!0}),state:Qa,numberOfResults:new se({required:!0,min:0})},cl=e=>({facetId:Us,selection:"string"==typeof e.start?new ge({values:ll}):new ge({values:ul})}),dl=ir("rangeFacet/updateSortCriterion",(e=>Wa(e,{facetId:Us,criterion:new ae({required:!0})}))),fl=p(q()),pl=p(T());function gl(e){var t,r;return ie(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.'),{start:hl(e.start,e),end:hl(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}function hl(e,t){let{dateFormat:r}=t;return function(e){return!!e&&"object"==typeof e&&"period"in e}(e)?(Qi(e),function(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}(e)):"string"==typeof e&&Yi(e)?(Qi(e),e):(Li(e,r),Mi((0,fl.default)(e,r)))}fl.default.extend(pl.default);var yl={start:Qa,end:Qa,endInclusive:new le({required:!0}),state:Qa},ml={facetId:Us,field:Qa,currentValues:new ye({required:!1,each:new ge({values:yl})}),generateAutomaticRanges:new le({required:!0}),filterFacetCount:new le({required:!1}),injectionDepth:new se({required:!1,min:0}),numberOfValues:new se({required:!1,min:1}),sortCriteria:new ae({required:!1}),rangeAlgorithm:new ae({required:!1})};function vl(e){return Yi(e)?Bi(e):e}function bl(e){!e.currentValues||e.currentValues.forEach((e=>{let{start:t,end:r}=gl(e);if((0,sl.default)(vl(t)).isAfter((0,sl.default)(vl(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var Sl=ir("dateFacet/register",(e=>{try{return Ya(e,ml),bl(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ha(t)}}})),wl=ir("dateFacet/toggleSelectValue",(e=>Wa(e,{facetId:Us,selection:new ge({values:ll})}))),Cl=ir("dateFacet/updateFacetValues",(e=>{try{return Ya(e,{facetId:Us,values:new ye({each:new ge({values:ll})})}),bl({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ha(t)}}})),Ol=dl,ql=Uu,xl={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function Il(e,t){let{facetId:r}=t;if(r in e)return;let n=Tl(t);e[r]={...t,numberOfValues:n}}function Rl(e,t,r){let n=e[t];!n||(n.currentValues=r,n.numberOfValues=Tl(n))}function Fl(e,t,r){let n=e[t];if(!n)return;let a=kl(n.currentValues,r);if(!a)return;let i="selected"===a.state;a.state=i?"idle":"selected",n.preventAutoSelect=!0}function Al(e,t){let r=e[t];!r||r.currentValues.forEach((e=>e.state="idle"))}function El(e,t){Object.entries(e).forEach((([e,r])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!kl(n,e);return e.state=t?"selected":"idle",e}));let a=n.filter((e=>!kl(r.currentValues,e))),i=r.currentValues;i.push(...a),r.numberOfValues=Math.max(r.numberOfValues,i.length)}))}function jl(e,t,r){t.forEach((t=>{let n=t.facetId,a=e[n];if(!a)return;let i=r(t.values);a.currentValues=i,a.preventAutoSelect=!1}))}function kl(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function Tl(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Vl=lr({},(e=>{e.addCase(Sl,((e,t)=>{let{payload:r}=t,n=function(e){return{...xl,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}(r);Il(e,n)})).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e})).addCase(Is,((e,t)=>{El(e,t.payload.df||{})})).addCase(wl,((e,t)=>{let{facetId:r,selection:n}=t.payload;Fl(e,r,n)})).addCase(Cl,((e,t)=>{let{facetId:r,values:n}=t.payload;Rl(e,r,n)})).addCase(ql,((e,t)=>{Al(e,t.payload)})).addCase(go,(e=>{Object.keys(e).forEach((t=>{Al(e,t)}))})).addCase(po,(e=>{Object.keys(e).forEach((t=>{Al(e,t)}))})).addCase(Ol,((e,t)=>{Gs(e,t.payload)})).addCase(vo.fulfilled,((e,t)=>{jl(e,t.payload.response.facets,Pl)}))}));function Pl(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var $l={state:Qa,start:new se({required:!0}),end:new se({required:!0}),endInclusive:new le({required:!0})},Ml={facetId:Us,field:Qa,currentValues:new ye({required:!1,each:new ge({values:$l})}),generateAutomaticRanges:new le({required:!0}),filterFacetCount:new le({required:!1}),injectionDepth:new se({required:!1,min:0}),numberOfValues:new se({required:!1,min:1}),sortCriteria:new ae({required:!1}),rangeAlgorithm:new ae({required:!1})};function Ll(e){!e.currentValues||e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var Dl=ir("numericFacet/register",(e=>{try{return Wa(e,Ml),Ll(e),{payload:e,error:null}}catch(t){return{payload:e,error:Ha(t)}}})),_l=ir("numericFacet/toggleSelectValue",(e=>Wa(e,{facetId:Us,selection:new ge({values:ul})}))),Nl=ir("numericFacet/updateFacetValues",(e=>{try{return Ya(e,{facetId:Us,values:new ye({each:new ge({values:ul})})}),Ll({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Ha(t)}}})),zl=dl,Ql=Uu,Ul=lr({},(e=>{e.addCase(Dl,((e,t)=>{let{payload:r}=t,n=function(e){return{...xl,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}(r);Il(e,n)})).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e})).addCase(Is,((e,t)=>{El(e,t.payload.nf||{})})).addCase(_l,((e,t)=>{let{facetId:r,selection:n}=t.payload;Fl(e,r,n)})).addCase(Nl,((e,t)=>{let{facetId:r,values:n}=t.payload;Rl(e,r,n)})).addCase(Ql,((e,t)=>{Al(e,t.payload)})).addCase(go,(e=>{Object.keys(e).forEach((t=>{Al(e,t)}))})).addCase(po,(e=>{Object.keys(e).forEach((t=>{Al(e,t)}))})).addCase(zl,((e,t)=>{Gs(e,t.payload)})).addCase(vo.fulfilled,((e,t)=>{jl(e,t.payload.response.facets,Bl)}))}));function Bl(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var Hl=new ye({each:Qa,required:!0}),Yl=ir("fields/registerFieldsToInclude",(e=>Wa(e,Hl))),Wl=ir("fields/fetchall/enable"),Jl=ir("fields/fetchall/disable"),Kl=wr("fields/description",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return _a(u)?n(u.error):u.success.fields})),Zl={collectionField:new fe,parentField:new fe,childField:new fe,numberOfFoldedResults:new se({min:0})},Xl=ir("folding/register",(e=>Wa(e,Zl))),Gl=wr("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await uo(a),o=await n.search({...i,q:ec(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}=${e}`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100});return _a(o)?r(o.error):{collectionId:e,results:o.success.results}}));function ec(e){return""===e.query.q?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var tc=lr({fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"],fetchAllFields:!1,fieldsDescription:[]},(e=>e.addCase(Yl,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(Wl,(e=>{e.fetchAllFields=!0})).addCase(Jl,(e=>{e.fetchAllFields=!1})).addCase(Kl.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(Xl,((e,{payload:t})=>{var r,n,a;let i={collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"};e.fieldsToInclude.push(null!=(r=t.collectionField)?r:i.collection,null!=(n=t.parentField)?n:i.parent,null!=(a=t.childField)?a:i.child)}))));function rc(e,t){return e.raw[t.parent]}function nc(e,t){let r=e.raw[t.child];return Ga(r)?r[0]:r}function ac(e,t,r,n=[]){let a=nc(e,r);return a?-1!==n.indexOf(a)?[]:t.filter((t=>{let n=nc(t,r)===nc(e,r);return rc(t,r)===a&&!n})).map((e=>({result:e,children:ac(e,t,r,[...n,a])}))):[]}function ic(e,t){var r;let n=ti(e),a=null!=(r=function(e,t){return e.find((e=>{let r=void 0===rc(e,t),n=function(e,t){return void 0!==(e||t)&&e===t}(rc(e,t),nc(e,t));return r||n}))}(n,t))?r:e;return{result:a,children:ac(a,n,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function oc(e,t){let r={};return e.forEach((e=>{let n=function(e,t){return e.raw[t.collection]}(e,t);!n||!nc(e,t)||(r[n]=ic(e,t))})),r}var sc=lr({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},(e=>e.addCase(vo.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?oc(t.response.results,e.fields):{}})).addCase(bo.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...oc(t.response.results,e.fields)}:{}})).addCase(Xl,((e,{payload:t})=>{var r,n,a,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=t.collectionField)?r:e.fields.collection,parent:null!=(n=t.parentField)?n:e.fields.parent,child:null!=(a=t.childField)?a:e.fields.child},filterFieldRange:null!=(i=t.numberOfFoldedResults)?i:e.filterFieldRange}})).addCase(Gl.pending,((e,{meta:t})=>{let r=t.arg;e.collections[r].isLoadingMoreResults=!0})).addCase(Gl.rejected,((e,{meta:t})=>{let r=t.arg;e.collections[r].isLoadingMoreResults=!1})).addCase(Gl.fulfilled,((e,{payload:{collectionId:t,results:r}})=>{let n=oc(r,e.fields);e.collections[t]=n[t],e.collections[t].moreResultsAvailable=!1}))));var uc=(0,p(M()).createCustomEqual)((e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t=>-1!==r.findIndex((r=>e(t,r))))):e(t,r))),lc=lr(ke(),(e=>{e.addCase(wi,((e,t)=>cc(e,t.payload)?void 0:t.payload))})),cc=(e,t)=>dc(e.context,t.context)&&fc(e.dictionaryFieldContext,t.dictionaryFieldContext)&&wc(e.advancedSearchQueries,t.advancedSearchQueries)&&pc(e.tabSet,t.tabSet)&&hc(e.staticFilterSet,t.staticFilterSet)&&mc(e.facetSet,t.facetSet)&&mc(e.dateFacetSet,t.dateFacetSet)&&mc(e.numericFacetSet,t.numericFacetSet)&&vc(e.categoryFacetSet,t.categoryFacetSet)&&bc(e.pagination,t.pagination)&&Sc(e.query,t.query)&&Cc(e,t)&&Oc(e.pipeline,t.pipeline)&&qc(e.searchHub,t.searchHub)&&xc(e.facetOrder,t.facetOrder)&&Ic(e.debug,t.debug),dc=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),fc=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),pc=(e,t)=>{let r=gc(e),n=gc(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},gc=e=>Object.values(e).find((e=>e.isActive)),hc=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=yc(e[r]),a=yc(n);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},yc=e=>e.values.filter((e=>"idle"!==e.state)),mc=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].currentValues.filter((e=>"selected"===e.state)),a=n.currentValues.filter((e=>"selected"===e.state));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},vc=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let t=ca(null==(r=e[n])?void 0:r.request.currentValues).parents.map((({value:e})=>e)),i=ca(null==a?void 0:a.request.currentValues).parents.map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},bc=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Sc=(e,t)=>JSON.stringify(e)===JSON.stringify(t),wc=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Cc=(e,t)=>e.sortCriteria===t.sortCriteria,Oc=(e,t)=>e===t,qc=(e,t)=>e===t,xc=(e,t)=>function(e,t){return e.length===t.length&&-1===e.findIndex(((e,r)=>t[r]!==e))}(e,t),Ic=(e,t)=>e===t,Rc=lr({firstResult:0,numberOfResults:10,totalCountFiltered:0},(e=>{e.addCase(to,((e,t)=>{let r=Ac(e),n=t.payload;e.numberOfResults=n,e.firstResult=Ec(r,n)})).addCase(ro,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(no,((e,t)=>{let r=t.payload;e.firstResult=Ec(r,e.numberOfResults)})).addCase(ao,((e,t)=>{let r=t.payload;e.firstResult=Ec(r,e.numberOfResults)})).addCase(oo,(e=>{let t=Ac(e),r=Math.max(t-1,1);e.firstResult=Ec(r,e.numberOfResults)})).addCase(io,(e=>{let t=Ac(e),r=function(e){let{totalCountFiltered:t,numberOfResults:r}=e;return kc(t,r)}(e),n=Math.min(t+1,r);e.firstResult=Ec(n,e.numberOfResults)})).addCase(qi.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(Is,((e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.numberOfResults})).addCase(vo.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Zu.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(Uu,(e=>{Fc(e)})).addCase(Qu,(e=>{Fc(e)})).addCase(Ks,(e=>{Fc(e)})).addCase(Js,(e=>{Fc(e)})).addCase(au,(e=>{Fc(e)})).addCase(wl,(e=>{Fc(e)})).addCase(_l,(e=>{Fc(e)})).addCase(go,(e=>{Fc(e)})).addCase(po,(e=>{Fc(e)})).addCase(Cl,(e=>{Fc(e)})).addCase(Nl,(e=>{Fc(e)})).addCase(qu,(e=>{Fc(e)}))}));function Fc(e){e.firstResult=0}function Ac(e){let{firstResult:t,numberOfResults:r}=e;return jc(t,r)}function Ec(e,t){return(e-1)*t}function jc(e,t){return e/t+1}function kc(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}var Tc=ir("pipeline/set",(e=>Wa(e,new fe({required:!0,emptyAllowed:!0})))),Vc=lr("",(e=>{e.addCase(Tc,((e,t)=>t.payload)).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e})).addCase(ms,((e,t)=>t.payload.pipeline||e))})),Pc=(lr({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""},(e=>{e.addCase(Ju,((e,t)=>{e.url=t.payload.url})).addCase(Ku,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(Zu.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(Zu.fulfilled,((e,t)=>{e.error=null,e.facets=t.payload.response.facets,e.products=t.payload.response.products,e.responseId=t.payload.response.responseId,e.isLoading=!1})).addCase(Zu.pending,(e=>{e.isLoading=!0}))})),lr({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0},(e=>{e.addCase(Fo,((e,t)=>{e.id=t.payload.id})).addCase(Ao,((e,t)=>{e.skus=t.payload.skus})).addCase(Eo,((e,t)=>{e.filter.brand=t.payload.brand})).addCase(jo,((e,t)=>{e.filter.category=t.payload.category})).addCase(To,((e,t)=>{e.maxNumberOfRecommendations=t.payload.number})).addCase(ko,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(Vo.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(Vo.fulfilled,((e,t)=>{e.error=null,e.searchUid=t.payload.searchUid,e.recommendations=t.payload.recommendations,e.isLoading=!1})).addCase(Vo.pending,(e=>{e.isLoading=!0}))})),{id:Qa,query:Ba}),$c=ir("querySet/register",(e=>Wa(e,Pc))),Mc=ir("querySet/update",(e=>Wa(e,Pc))),Lc={id:Qa},Dc=ir("querySuggest/register",(e=>Wa(e,{...Lc,q:new fe,count:new se({min:0})}))),_c=ir("querySuggest/unregister",(e=>Wa(e,Lc))),Nc=ir("querySuggest/selectSuggestion",(e=>Wa(e,{...Lc,expression:Ba}))),zc=ir("querySuggest/clear",(e=>Wa(e,Lc))),Qc=wr("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,Lc);let i=e.id,o=await Uc(i,t()),s=await n.querySuggest(o);return _a(s)?r(s.error):{id:i,q:o.q,...s.success}})),Uc=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:null==(r=t.querySet)?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?Aa.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Fa()}}},Bc=lr({},(e=>{e.addCase($c,((e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(Mc,((e,t)=>{let{id:r,query:n}=t.payload;Yc(e,r,n)})).addCase(Nc,((e,t)=>{let{id:r,expression:n}=t.payload;Yc(e,r,n)})).addCase(vo.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;Hc(e,r)})).addCase(Is,((e,t)=>{oe(t.payload.q)||Hc(e,t.payload.q)})).addCase(qi.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))Yc(e,r,n)}))}));function Hc(e,t){Object.keys(e).forEach((r=>e[r]=t))}var Yc=(e,t,r)=>{t in e&&(e[t]=r)},Wc=lr({},(e=>e.addCase(Dc,((e,t)=>{let r=t.payload.id;r in e||(e[r]=function(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}(t.payload))})).addCase(_c,((e,t)=>{delete e[t.payload.id]})).addCase(Qc.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.currentRequestId=t.meta.requestId,r.isLoading=!0)})).addCase(Qc.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(Qc.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.error=t.payload||null,r.isLoading=!1)})).addCase(Mc,((e,t)=>{let{id:r,query:n}=t.payload;r in e&&Jc(e[r],n)})).addCase(zc,((e,t)=>{let r=e[t.payload.id];!r||(r.responseId="",r.completions=[],r.partialQueries=[])})).addCase(Nc,((e,t)=>{let{id:r,expression:n}=t.payload,a=e[r];!a||(a.q=n)})).addCase(Is,((e,t)=>{oe(t.payload.q)||Kc(e,t.payload.q)})).addCase(vo.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;Kc(e,r)}))));function Jc(e,t){e.q=t}function Kc(e,t){Object.keys(e).forEach((r=>Jc(e[r],t)))}var Zc=lr({q:"",enableQuerySyntax:!1},(e=>e.addCase(Ei,((e,t)=>({...e,...t.payload}))).addCase(Ai,((e,t)=>{e.q=t.payload})).addCase(Nc,((e,t)=>{e.q=t.payload.expression})).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e})).addCase(Is,((e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax})))),Xc=()=>new ge({values:{documentId:new ge({values:{contentIdKey:Qa,contentIdValue:Qa}})},options:{required:!0}}),Gc=ir("smartSnippet/expand"),ed=ir("smartSnippet/collapse"),td=ir("smartSnippet/like"),rd=ir("smartSnippet/dislike"),nd=ir("smartSnippet/related/expand",(e=>Wa(e,Xc()))),ad=ir("smartSnippet/related/collapse",(e=>Wa(e,Xc()))),id=(e,t)=>e.findIndex((e=>e.contentIdValue===t.contentIdValue&&e.contentIdKey===t.contentIdKey)),od=lr({liked:!1,disliked:!1,expanded:!1,relatedQuestions:[]},(e=>e.addCase(Gc,(e=>{e.expanded=!0})).addCase(ed,(e=>{e.expanded=!1})).addCase(td,(e=>{e.liked=!0,e.disliked=!1})).addCase(rd,(e=>{e.liked=!1,e.disliked=!0})).addCase(vo.fulfilled,((e,t)=>{e.relatedQuestions=t.payload.response.questionAnswer.relatedQuestions.map((e=>({contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1})))})).addCase(nd,((e,t)=>{let r=id(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase(ad,((e,t)=>{let r=id(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)})))),sd={results:new ye({required:!0,each:new ge({values:li})}),maxLength:new se({required:!0,min:1,default:10})},ud=ir("recentResults/registerRecentResults",(e=>Wa(e,sd))),ld=ir("recentResults/pushRecentResult",(e=>(pi(e),{payload:e}))),cd=ir("recentResults/clearRecentResults"),dd=lr({results:[],maxLength:10},(e=>{e.addCase(ud,((e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(cd,(e=>{e.results=[]})).addCase(ld,((e,t)=>{let r=t.payload;e.results=e.results.filter((e=>e.uniqueId!==r.uniqueId));let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]}))})),fd={queries:new ye({required:!0,each:new fe({emptyAllowed:!1})}),maxLength:new se({required:!0,min:1,default:10})},pd=ir("recentQueries/registerRecentQueries",(e=>Wa(e,fd))),gd=ir("recentQueries/clearRecentQueries"),hd=lr({queries:[],maxLength:10},(e=>{e.addCase(pd,((e,t)=>{e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(gd,(e=>{e.queries=[]})).addCase(vo.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim();if(!r.length)return;e.queries=e.queries.filter((e=>e!==r));let n=e.queries.slice(0,e.maxLength-1);e.queries=[r,...n]}))}));lr({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""},(e=>{e.addCase(yi,((e,t)=>{e.id=t.payload.id})).addCase(mi.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(mi.fulfilled,((e,t)=>{e.error=null,e.recommendations=t.payload.recommendations,e.duration=t.payload.duration,e.isLoading=!1,e.searchUid=t.payload.searchUid})).addCase(mi.pending,(e=>{e.isLoading=!0}))}));function yd(e){return"notify"===e.type}function md(e){return"redirect"===e.type}function vd(e){return"query"===e.type}function bd(e){return"execute"===e.type}var Sd=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(md);return e.length?e[0].content:null}},wd=ii("analytics/redirection",ai.Search,((e,t)=>{var r;if(null==(r=t.redirection)?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})})),Cd=ir("standaloneSearchBox/register",(e=>Wa(e,{id:Qa,redirectionUrl:Qa}))),Od=ir("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>Wa(e,{id:Qa}))),qd=ir("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),xd=wr("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new fe({emptyAllowed:!1})});let o=await Rd(r()),s=await a.plan(o);if(_a(s))return n(s.error);let{redirectionUrl:u}=new Sd(s.success);return u&&t(Id(u)),u||""})),Id=e=>ii("analytics/standaloneSearchBox/redirect",ai.Custom,(t=>t.logTriggerRedirect({redirectedTo:e})))(),Rd=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Fa()}}),Fd=wr("redirection/check",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{defaultRedirectionUrl:new fe({emptyAllowed:!1})});let o=await a.plan(await Rd(r()));if(_a(o))return n(o.error);let s=new Sd(o.success).redirectionUrl;return s&&t(wd()),s||e.defaultRedirectionUrl})),Ad=lr({redirectTo:null},(e=>e.addCase(Fd.fulfilled,((e,t)=>{e.redirectTo=t.payload}))));var Ed=wr("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await async function(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await Fa()},q:s,...t,requestedOutputSize:t.requestedOutputSize||0}}(a,e),o=await t.apiClient.html(i);return _a(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}})),jd=lr({uniqueId:"",content:"",isLoading:!1},(e=>{e.addCase(Ed.pending,(e=>{e.isLoading=!0})).addCase(Ed.fulfilled,((e,t)=>{let{content:r,uniqueId:n}=t.payload;e.content=r,e.uniqueId=n,e.isLoading=!1}))})),kd=ir("searchHub/set",(e=>Wa(e,new fe({required:!0,emptyAllowed:!0})))),Td=lr("default",(e=>{e.addCase(kd,((e,t)=>t.payload)).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e})).addCase(ms,((e,t)=>t.payload.searchHub||e))}));function Vd(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response={results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},e.results=[]),e.error=n,e.isLoading=!1}function Pd(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function $d(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var Md=lr({response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""},(e=>{e.addCase(vo.rejected,((e,t)=>Vd(e,t))),e.addCase(bo.rejected,((e,t)=>Vd(e,t))),e.addCase(vo.fulfilled,((e,t)=>{Pd(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid})),e.addCase(bo.fulfilled,((e,t)=>{Pd(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(vo.pending,$d),e.addCase(bo.pending,$d)})),Ld={by:new Se({enum:Ce,required:!0})},Dd=ir("sortCriteria/register",(e=>Nd(e))),_d=ir("sortCriteria/update",(e=>Nd(e))),Nd=e=>me(e)?(e.forEach((e=>Wa(e,Ld))),{payload:e}):Wa(e,Ld),zd=lr(Ee(),(e=>{e.addCase(Dd,((e,t)=>Oe(t.payload))).addCase(_d,((e,t)=>Oe(t.payload))).addCase(qi.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e})).addCase(Is,((e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e}))})),Qd=lr({},(e=>e.addCase(Cd,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=function(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}(n))})).addCase(xd.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!0)})).addCase(xd.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];!n||(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(xd.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!1)})).addCase(Od,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="searchFromLink")})).addCase(qd,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));var Ud=lr({redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""},(e=>e.addCase(vo.fulfilled,((e,t)=>{let r=t.payload.response.triggers.filter(md);e.redirectTo=r.length?r[0].content:"";let n=t.payload.response.triggers.filter(vd);e.query=n.length?n[0].content:"";let a=t.payload.response.triggers.filter(bd);e.execute=a.length?{functionName:a[0].content.name,params:a[0].content.params}:{functionName:"",params:[]};let i=t.payload.response.triggers.filter(yd);e.notification=i.length?i[0].content:""})))),Bd={by:new Se({enum:Jo,required:!0})},Hd=ir("sort/register",(e=>Wd(e))),Yd=ir("sort/update",(e=>Wd(e))),Wd=e=>Wa(e,Bd),Jd=(lr({by:"relevance"},(e=>{e.addCase(Hd,((e,t)=>t.payload)).addCase(Yd,((e,t)=>t.payload))})),ir("dictionaryFieldContext/set",(e=>{let t=new ge({options:{required:!0}}),r=Wa(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new ye({each:Ba}),i=Wa(n,a).error;return i?{payload:e,error:i}:{payload:e}}))),Kd=ir("dictionaryFieldContext/add",(e=>{let t=new ge({options:{required:!0},values:{field:Ba,key:Ba}});return Wa(e,t)})),Zd=ir("dictionaryFieldContext/remove",(e=>Wa(e,Ba))),Xd=lr({contextValues:{}},(e=>{e.addCase(Jd,((e,t)=>{e.contextValues=t.payload})).addCase(Kd,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(Zd,((e,t)=>{delete e.contextValues[t.payload]})).addCase(qi.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))})),Gd=lr({},(e=>{e.addCase(Fs,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})})).addCase(As,((e,t)=>{ef(e,t.payload)})).addCase(Is,((e,t)=>{ef(e,t.payload.tab||"")}))}));function ef(e,t){t in e&&Object.keys(e).forEach((r=>{e[r].isActive=r===t}))}var tf=Qa,rf=new ge({options:{required:!0},values:{caption:Ba,expression:Ba,state:new fe({constrainTo:["idle","selected"]})}}),nf=new ye({required:!0,each:rf}),af=ir("staticFilter/register",(e=>Wa(e,{id:tf,values:nf}))),of=ir("staticFilter/toggleSelect",(e=>Wa(e,{id:tf,value:rf}))),sf=ir("staticFilter/deselectAllFilterValues",(e=>Wa(e,tf))),uf=e=>ii("analytics/staticFilter/select",ai.Search,(t=>t.logStaticFilterSelect(e)))(),lf=e=>ii("analytics/staticFilter/deselect",ai.Search,(t=>t.logStaticFilterDeselect(e)))(),cf=e=>ii("analytics/staticFilter/clearAll",ai.Search,(t=>t.logStaticFilterClearAll(e)))(),df=lr({},(e=>e.addCase(af,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)})).addCase(of,((e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find((e=>e.caption===n.caption));if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected"})).addCase(sf,((e,t)=>{let r=e[t.payload];!r||r.values.forEach((e=>e.state="idle"))})).addCase(po,(e=>{Object.values(e).forEach((e=>{e.values.forEach((e=>e.state="idle"))}))})).addCase(Is,((e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach((([e,t])=>{let n=r[e]||[];t.values.forEach((e=>{e.state=n.includes(e.caption)?"selected":"idle"}))}))})))),ff=ir("caseAssistConfiguration/set",(e=>Wa(e,{caseAssistId:Qa,locale:Ua}))),pf=(lr({caseAssistId:"",locale:"en-US"},(e=>{e.addCase(ff,((e,t)=>{e.caseAssistId=t.payload.caseAssistId,e.locale=t.payload.locale}))})),ir("caseAssist/caseInput/update",(e=>Wa(e,{fieldName:Qa,fieldValue:Ba})))),gf=(lr({},(e=>{e.addCase(pf,((e,t)=>{e[t.payload.fieldName]={value:t.payload.fieldValue}}))})),e=>Object.keys(e).filter((t=>""!==e[t].value)).reduce(((t,r)=>({...t,[r]:e[r].value})),{})),hf=ir("caseAssist/caseField/register",(e=>Wa(e,{fieldName:Qa,fieldValue:Ba}))),yf=ir("caseAssist/caseField/update",(e=>Wa(e,{fieldName:Qa,fieldValue:Ba}))),mf=wr("caseAssist/classifications/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getCaseClassifications(await vf(a));return _a(i)?r(i.error):{response:i.success}})),vf=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Fa()},fields:e.caseInput,context:e.caseField?gf(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),bf=(lr({status:{loading:!1,error:null,lastResponseId:""},fields:{}},(e=>{e.addCase(hf,((e,t)=>{let{fieldName:r,fieldValue:n}=t.payload;e.fields[r]={value:n,suggestions:[]}})).addCase(yf,((e,t)=>{let{fieldName:r,fieldValue:n}=t.payload;e.fields[r].value=n})).addCase(mf.rejected,((e,t)=>{var r;e.status.error=null!=(r=t.payload)?r:null,e.status.loading=!1})).addCase(mf.fulfilled,((e,t)=>{let r={value:"",suggestions:[]};Object.entries(t.payload.response.fields).forEach((([t,n])=>{e.fields[t]||(e.fields[t]={...r}),e.fields[t].suggestions=n.predictions})),e.status.lastResponseId=t.payload.response.responseId,e.status.error=null,e.status.loading=!1})).addCase(mf.pending,(e=>{e.status.loading=!0}))})),wr("caseAssist/documentSuggestions/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getDocumentSuggestions(await Sf(a));return _a(i)?r(i.error):{response:i.success}}))),Sf=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Fa()},fields:e.caseInput,context:e.caseField?gf(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),wf=(lr({status:{loading:!1,error:null,lastResponseId:""},documents:[]},(e=>{e.addCase(bf.rejected,((e,t)=>{var r;e.status.error=null!=(r=t.payload)?r:null,e.status.loading=!1})).addCase(bf.fulfilled,((e,t)=>{e.documents=t.payload.response.documents,e.status.lastResponseId=t.payload.response.responseId,e.status.error=null,e.status.loading=!1})).addCase(bf.pending,(e=>{e.status.loading=!0}))})),Es),Cf=Rc,Of=rl,qf=Lu,xf=Md,If=sc,Rf=Vl,Ff=fu,Af=Ul,Ef=lu,jf=Qs,kf=$u,Tf=Zc,Vf=Rs,Pf=df,$f=Bc,Mf=Gd,Lf=Ad,Df=Wc,_f=zd,Nf=$s,zf=Xd,Qf=Ns,Uf=tc,Bf=Vc,Hf=Td,Yf=Ds,Wf=jd,Jf=_s,Kf=Ud,Zf=od,Xf=Qd,Gf=dd,ep=hd,tp=(e=>{let{actionTypes:t,reducer:r}=e,n=je();return(e=n,a)=>{switch(a.type){case t.undo:return(e=>{let{past:t,present:r,future:n}=e;if(!r||0===t.length)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}})(e);case t.redo:return(e=>{let{past:t,present:r,future:n}=e;return r&&0!==n.length?{past:[...t,r],present:n[0],future:n.slice(1)}:e})(e);case t.snapshot:return(e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,o=n(i,t);return i?i===o?r:{past:[...a,i],present:o,future:[]}:je(o)})({state:e,reducer:r,action:a});default:return e}}})({actionTypes:{redo:Si.type,undo:bi.type,snapshot:wi.type},reducer:lc});function rp(e,t,r){var n,a,i;void 0===t&&(t=50),void 0===r&&(r={});var o=null!=(n=r.isImmediate)&&n,s=null!=(a=r.callback)&&a,u=r.maxWait,l=Date.now(),c=[];function d(){if(void 0!==u){var e=Date.now()-l;if(e+t>=u)return u-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,a){var u=o&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout((function(){if(i=void 0,l=Date.now(),!o){var n=e.apply(r,t);s&&s(n),c.forEach((function(e){return(0,e.resolve)(n)})),c=[]}}),d()),u){var f=e.apply(r,t);return s&&s(f),n(f)}c.push({resolve:n,reject:a})}))};return f.cancel=function(e){void 0!==i&&clearTimeout(i),c.forEach((function(t){return(0,t.reject)(e)})),c=[]},f}function np(e,t){let r=0,n=rp((()=>r=0),500);return a=>i=>async o=>{if("function"!=typeof o)return i(o);let s=await i(o);if(!function(e){var t;return(null==(t=e.error)?void 0:t.name)===(new z).name}(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let u=await async function(e){try{return await e()}catch(t){return""}}(t);a.dispatch(ys({accessToken:u})),a.dispatch(o)}}var ap={configuration:wf,version:Jf};function ip(e,t){let r=function(e,t){let{reducers:r}=e,n=function(e){let t={...e};return{get combinedReducer(){return(0,$e.combineReducers)(t)},containsAll:e=>Object.keys(e).every((e=>e in t)),add(e){Object.keys(e).filter((e=>!(e in t))).forEach((r=>t[r]=e[r]))}}}({...ap,...r}),a=t.logger,i=function(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=function(e,t){let{renewAccessToken:r}=e.configuration;return[np(t,r),No(t),Mo].concat(e.middlewares||[])}(e,t.logger);return function({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return ar({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:a,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),zo(n.logger)]})}({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}(e,t,n);return{addReducers(e){n.containsAll(e)||(n.add(e),i.replaceReducer(n.combinedReducer))},dispatch:i.dispatch,subscribe:i.subscribe,enableAnalytics(){i.dispatch(Ss())},disableAnalytics(){i.dispatch(bs())},get state(){return i.getState()},logger:a,store:i}}(e,t),{accessToken:n,organizationId:a,platformUrl:i,analytics:o}=e.configuration;if(r.dispatch(ys({accessToken:n,organizationId:a,platformUrl:i})),o){let{analyticsClientMiddleware:e,...t}=o;r.dispatch(vs(t))}return r}var op=p($());function sp(e,t){let r=function(e){let{analytics:t}=e,r=(e,t)=>t;return(null==t?void 0:t.analyticsClientMiddleware)||r}(e),n=Ya,a=function(e){return e.preprocessRequest||Uo}(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:t}}var up={organizationId:Qa,accessToken:Qa,platformUrl:new fe({required:!1,emptyAllowed:!1}),name:new fe({required:!1,emptyAllowed:!1}),analytics:new ge({options:{required:!1},values:{enabled:new le({required:!1}),originLevel2:new fe({required:!1}),originLevel3:new fe({required:!1})}})};var lp=new ne({...up,search:new ge({options:{required:!1},values:{pipeline:Ua,searchHub:Ua,locale:Ua,timezone:Ua}})});function cp(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",search:{searchHub:"default"}}}var dp=e=>Wa(e,{evt:Qa,type:Ua}),fp=e=>ii("analytics/generic/search",ai.Search,(t=>{dp(e);let{evt:r,meta:n}=e;return t.logSearchEvent(r,n)}))(),pp=e=>ii("analytics/generic/click",ai.Click,((t,r)=>(pi(e.result),dp(e),t.logClickEvent(e.evt,oi(e.result,r),si(e.result)))))(),gp=e=>ii("analytics/generic/custom",ai.Custom,(t=>(dp(e),t.logCustomEventWithType(e.evt,e.type,e.meta))))(),hp=ii("analytics/interface/load",ai.Search,(e=>e.logInterfaceLoad())),yp=ii("analytics/interface/change",ai.Search,((e,t)=>e.logInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2}))),mp=ii("analytics/interface/searchFromLink",ai.Search,(e=>e.logSearchFromLink())),vp=e=>ii("analytics/interface/omniboxFromLink",ai.Search,(t=>t.logOmniboxFromLink(e)))();function bp(e){return""!==e.search.response.searchUid}var Sp={debug:Yf,pipeline:Bf,searchHub:Hf,search:xf};function wp(e){let t=function(e){return(0,op.default)({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter},browser:{transmit:{send:(null==e?void 0:e.browserPostLogHook)||(()=>{})}}})}(e.loggerOptions);!function(e,t){try{lp.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}(e.configuration,t);let r=function(e,t){let{search:r}=e;return new Pa({logger:t,preprocessRequest:e.preprocessRequest||Uo,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||Bo,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||Ho,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||Yo})}(e.configuration,t),n={...sp(e.configuration,t),searchAPIClient:r,apiClient:r},a=ip({...e,reducers:Sp},n),{search:i}=e.configuration;return i&&a.dispatch(ms(i)),{...a,get state(){return a.state},executeFirstSearch(e=hp()){if(bp(a.state))return;let t=vo(e);a.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e,n=r&&"omniboxFromLink"===t?vp(r):mp();this.executeFirstSearch(n)}}}function Cp(e){let t,r=new Map,n=()=>0===r.size;return{subscribe(a){a();let i,o=Symbol();return n()&&(t=JSON.stringify(this.state),i=e.subscribe((()=>{(e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}})(this.state)&&r.forEach((e=>e()))}))),r.set(o,a),()=>{r.delete(o),n()&&i&&i()}},get state(){return{}}}}var Op=e=>{let t=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let r=e.match(/(\w+(?:\s\w+)*): ([-0-9]+)/g);if(!r)return null;let n={};for(let a of r){let e=a.match(t);if(e){let t=e[1],r=e[2];n[t]=Number(r)}}return n},qp=(e,t)=>{let r,n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},xp=e=>{let t=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let r=qp(e[1],/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g);if(!r)return null;let n={};for(let a of r){let e=qp(a[1],t),r={};for(let t of e)r[t[1]]={Correlation:Number(t[2]),"TF-IDF":Number(t[3])};let i=Op(a[2]);n[Object.keys(r).join(", ")]={terms:r,Weights:i}}return n},Ip=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function Rp(e){return e.search.response.results.map((e=>{let t=(e=>{if(!e)return null;let t=/Document weights:\n((?:.)*?)\n+/g.exec(e),r=/Terms weights:\n((?:.|\n)*)\n+/g.exec(e),n=/Total weight: ([0-9]+)/g.exec(e),a=Ip(e);return{documentWeights:Op(t?t[1]:null),termsWeight:xp(r),totalWeight:n?Number(n[1]):null,qreWeights:a}})(e.rankingInfo);return{result:e,ranking:t}}))}var Fp=new ne({enabled:new le({default:!1})});function Ap(e,t={}){if(!function(e){return e.addReducers({debug:Yf,search:xf,configuration:wf,fields:Uf}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e;Ja(e,Fp,t.initialState,"buildRelevanceInspector").enabled&&n(Ms());let a=t=>{e.logger.warn(`Flag [ ${t} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let t=e.state,r=t.debug;if(!t.debug)return{isEnabled:r};let{executionReport:n,basicExpression:a,advancedExpression:i,constantExpression:o,userIdentities:s,rankingExpressions:u}=t.search.response,{fieldsDescription:l,fetchAllFields:c}=t.fields;return{isEnabled:r,rankingInformation:Rp(t),executionReport:n,expressions:{basicExpression:a,advancedExpression:i,constantExpression:o},userIdentities:s,rankingExpressions:u,fieldsDescription:l,fetchAllFields:c}},enable(){n(Ms()),a("debug")},disable(){n(Ls()),n(Jl())},enableFetchAllFields(){n(Wl()),a("fetchAllFields")},disableFetchAllFields(){n(Jl())},fetchFieldDescriptions(){n(Kl()),a("fieldsDescription"),e.logger.warn("For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.\n        \n        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions\n        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude")}}}function Ep(e){if(!function(e){return e.addReducers({context:Nf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.context.contextValues}},set(e){r(Ts(e))},add(e,t){r(Vs({contextKey:e,contextValue:t}))},remove(e){r(Ps(e))}}}function jp(e){if(!function(e){return e.addReducers({dictionaryFieldContext:zf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.dictionaryFieldContext.contextValues}},set(e){r(Jd(e))},add(e,t){r(Kd({field:e,key:t}))},remove(e){r(Zd(e))}}}function kp(e){if(!function(e){return e.addReducers({configuration:wf,didYouMean:Qf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e;r(Ri());return{...t,get state(){let t=e.state;return{originalQuery:t.didYouMean.originalQuery,wasCorrectedTo:t.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:t.didYouMean.wasAutomaticallyCorrected,queryCorrection:t.didYouMean.queryCorrection,hasQueryCorrection:""!==t.didYouMean.queryCorrection.correctedQuery||""!==t.didYouMean.wasCorrectedTo}},applyCorrection(){r(Ai(this.state.queryCorrection.correctedQuery)),r(vo(xi()))}}}var Tp=new fe({regex:/^[a-zA-Z0-9-_]+$/}),Vp=new fe({required:!0}),Pp=new ye({each:new fe}),$p=new fe,Mp=new le,Lp=new le,Dp=new se({min:0}),_p=new se({min:1}),Np=new le({required:!0}),zp=new ge,Qp=new fe,Up=new ge({values:{captions:zp,numberOfValues:_p,query:Qp}}),Bp=new ne({field:Vp,basePath:Pp,delimitingCharacter:$p,facetId:Tp,facetSearch:Up,filterByBasePath:Mp,filterFacetCount:Lp,injectionDepth:Dp,numberOfValues:_p,sortCriteria:new fe({constrainTo:["alphanumeric","occurrences"]})});function Hp(e,t){let{field:r,state:n}=e;if(!function(e){let{field:t,state:r}=e;return Yp(r).some((e=>e&&t in e))}(e))return r;let a=`${r}_`,i=function(e,t){let r=Yp(t).map((e=>Object.keys(e||{}))).reduce(((e,t)=>e.concat(t)),[]);return function(e,t){let r=0,n=e.map((e=>{let n=e.split(t)[1],a=parseInt(n,10);return Number.isNaN(a)?r:a})).sort().pop();return null!=n?n:r}(r,e)+1}(a,n);return function(e,t){let r=`A facet with field "${e}" already exists.\n  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}(r,t),`${a}${i}`}function Yp(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}function Wp(e,t){let{state:r,logger:n}=e,{field:a,facetId:i}=t;return i||Hp({field:a,state:r},n)}function Jp(e,t){if(!function(e){return e.addReducers({categoryFacetSet:Ef,categoryFacetSearchSet:kf,configuration:wf,search:xf}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e,a=Wp(e,t.options),i={facetSearch:{...Su},...cu,...t.options,facetId:a};Ka(e,Bp,i,"buildCategoryFacet");let o=()=>((e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request})(e.state,a);return n(Ws(i)),{...r,toggleSelect(e){let t=i.numberOfValues;n(Js({facetId:a,selection:e,retrieveCount:t})),n(zs({freezeFacetOrder:!0}))},deselectAll(){n(Ks(a)),n(zs({freezeFacetOrder:!0}))},sortBy(e){n(Xs({facetId:a,criterion:e})),n(zs({freezeFacetOrder:!0}))},isSortedBy:e=>o().sortCriteria===e,showMoreValues(){let{numberOfValues:e}=i,{values:t}=this.state,r=t.length+e;n(Zs({facetId:a,numberOfValues:r})),n(zs({freezeFacetOrder:!0}))},showLessValues(){let{numberOfValues:e}=i;n(Zs({facetId:a,numberOfValues:e})),n(zs({freezeFacetOrder:!0}))},get state(){let t=o(),r=da(e.state,a),n=la(e.state),{parents:s,values:u}=ca(null==r?void 0:r.values),l=0!==s.length,c=s.length>0?s[s.length-1].moreValuesAvailable:(null==r?void 0:r.moreValuesAvailable)||!1,d=u.length>i.numberOfValues;return{facetId:a,parents:s,values:u,isLoading:n,hasActiveValues:l,canShowMoreValues:c,canShowLessValues:d,sortCriteria:t.sortCriteria}}}}function Kp(e,t){let r=e.dispatch,{options:n,getFacetSearch:a}=t,{facetId:i}=n;return{updateText(e){r(Ou({facetId:i,query:e,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:t}=a();r(Ou({facetId:i,numberOfValues:t.numberOfValues+e})),r(Tu(i))},search(){r(Tu(i))},clear(){r(Vu({facetId:i}))},updateCaptions(e){r(Ou({facetId:i,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=a(),{query:n}=r,i=e.values;return{...e,values:i,isLoading:t,query:n}}}}function Zp(e,t){let{dispatch:r}=e,n={...Su,...t.options},{facetId:a}=n,i=function(e,t){let{dispatch:r}=e,n={...Su,...t.options},{facetId:a}=n;r(iu(n));let i=Kp(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[a]});return{...i,select(e){r(au({facetId:a,value:e}))},get state(){return i.state}}}(e,{options:{...n}});r(iu(n));let o=Kp(e,{options:n,getFacetSearch:()=>e.state.categoryFacetSearchSet[a]});return{...o,...i,select:e=>{i.select(e),r(zs({freezeFacetOrder:!0})),r(vo(Au({facetId:a,facetValue:e.rawValue})))},get state(){return{...o.state,...i.state}}}}function Xp(e,t){if(!function(e){return e.addReducers({categoryFacetSet:Ef,categoryFacetSearchSet:kf,configuration:wf,search:xf}),!0}(e))throw N;let r=Jp(e,t),{dispatch:n}=e,a=()=>r.state.facetId,i=Zp(e,{options:{facetId:a(),...t.options.facetSearch}}),{state:o,...s}=i;return{...r,facetSearch:s,toggleSelect(e){r.toggleSelect(e);let t=function(e,t){let r={facetId:e,facetValue:t.value};return"selected"===t.state?Eu(r):Au(r)}(a(),e);n(vo(t))},deselectAll(){r.deselectAll(),n(vo(Fu(a())))},sortBy(e){r.sortBy(e),n(vo(Ru({facetId:a(),criterion:e})))},showMoreValues(){r.showMoreValues(),n(vo(xu(a())))},showLessValues(){r.showLessValues(),n(vo(Iu(a())))},get state(){return{...r.state,facetSearch:i.state}}}}var Gp=e=>"selected"===e.state,eg={facetId:Us,selection:new ge({values:_u})},tg=wr("facet/executeToggleSelect",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},eg),n(Qu({facetId:e,selection:t})),n(zs({freezeFacetOrder:!0}))})),rg=new ne({facetId:Tp,field:Vp,delimitingCharacter:$p,filterFacetCount:Lp,injectionDepth:Dp,numberOfValues:_p,sortCriteria:new fe({constrainTo:["score","alphanumeric","occurrences","automatic"]}),facetSearch:Up});function ng(e,t){if(!function(e){return e.addReducers({facetSet:Of,configuration:wf,facetSearchSet:qf}),!0}(e))throw N;let{dispatch:r}=e,n=Cp(e),a=Wp(e,t.options),i={facetSearch:{...Su},...al,...t.options,facetId:a};Ka(e,rg,i,"buildFacet");let o=()=>oa(e.state,a),s=()=>{let{currentValues:e}=o(),t=i.numberOfValues,r=!!e.find((e=>"idle"===e.state));return t<e.length&&r};return r(zu(i)),{...n,toggleSelect:e=>r(tg({facetId:i.facetId,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&r(Uu(a)),this.toggleSelect(e)},isValueSelected:Gp,deselectAll(){r(Uu(a)),r(zs({freezeFacetOrder:!0}))},sortBy(e){r(Bu({facetId:a,criterion:e})),r(zs({freezeFacetOrder:!0}))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){let e=o().numberOfValues,t=i.numberOfValues;r(Hu({facetId:a,numberOfValues:e+(t-e%t)})),r(Yu({facetId:a,isFieldExpanded:!0})),r(zs({freezeFacetOrder:!0}))},showLessValues(){let e=i.numberOfValues,t=Math.max(e,(()=>{let{currentValues:e}=o();return e.filter((e=>"idle"!==e.state)).length})());r(Hu({facetId:a,numberOfValues:t})),r(Yu({facetId:a,isFieldExpanded:!1})),r(zs({freezeFacetOrder:!0}))},get state(){let t=o(),r=sa(e.state,a),n=la(e.state),i=t.sortCriteria,u=r?r.values:[],l=u.some((e=>"idle"!==e.state)),c=!!r&&r.moreValuesAvailable;return{facetId:a,values:u,sortCriterion:i,isLoading:n,hasActiveValues:l,canShowMoreValues:c,canShowLessValues:s()}}}}function ag(e,t){if(!function(e){return e.addReducers({facetSet:Of,configuration:wf,facetSearchSet:qf,search:xf}),!0}(e))throw N;let{dispatch:r}=e,n=ng(e,t),a=()=>n.state.facetId,i=(()=>{let{facetSearch:n}=t.options;return function(e,t){let{dispatch:r}=e,{options:n,select:a}=t,{facetId:i}=n;r(Cu(n));let o=Kp(e,{options:n,getFacetSearch:()=>e.state.facetSearchSet[i]});return{...o,select(e){r(qu({facetId:i,value:e})),a(e)},singleSelect(e){r(Uu(i)),r(qu({facetId:i,value:e})),a(e)},get state(){let{values:e}=o.state;return{...o.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}(e,{options:{facetId:a(),...n},select:e=>{r(zs({freezeFacetOrder:!0})),r(vo(Au({facetId:a(),facetValue:e.rawValue})))}})})(),{state:o,...s}=i;return{...n,facetSearch:s,toggleSelect(e){n.toggleSelect(e),r(vo(((e,t)=>{let r={facetId:e,facetValue:t.value};return Gp(t)?Eu(r):Au(r)})(a(),e)))},deselectAll(){n.deselectAll(),r(vo(Fu(a())))},sortBy(e){n.sortBy(e),r(vo(Ru({facetId:a(),criterion:e})))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){n.showMoreValues(),r(vo(xu(a())))},showLessValues(){n.showLessValues(),r(vo(Iu(a())))},get state(){return{...n.state,facetSearch:i.state}}}}var ig=e=>"selected"===e.state,og=(e,t)=>{let r={facetId:e,facetValue:`${t.start}..${t.end}`};return ig(t)?Eu(r):Au(r)};function sg(e,t){let{facetId:r,getRequest:n}=t,a=Cp(e),i=e.dispatch;return{...a,isValueSelected:ig,deselectAll(){i(Uu(r)),i(zs({freezeFacetOrder:!0}))},sortBy(e){i(dl({facetId:r,criterion:e})),i(zs({freezeFacetOrder:!0}))},isSortedBy(e){return this.state.sortCriterion===e},get state(){let t=n(),a=ia(e.state,r),i=t.sortCriteria,o=a?a.values:[],s=la(e.state),u=o.some((e=>"idle"!==e.state));return{facetId:r,values:o,sortCriterion:i,hasActiveValues:u,isLoading:s}}}}function ug(e,t){if(!e.generateAutomaticRanges&&void 0===e.currentValues){throw new Error(`currentValues should be specified for ${t} when generateAutomaticRanges is false.`)}}var lg=ir("rangeFacet/executeToggleSelect",(e=>Wa(e,cl(e.selection)))),cg={facetId:Us,selection:new ge({values:ll})},dg=wr("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,cg),t(wl(e)),t(lg(e)),t(zs({freezeFacetOrder:!0}))})),fg=["idle","selected"],pg=["ascending","descending"],gg=["even","equiprobable"],hg={start:new fe,end:new fe,endInclusive:new le,state:new fe({constrainTo:fg})},yg=new ne({facetId:Tp,field:Vp,generateAutomaticRanges:Np,filterFacetCount:Lp,injectionDepth:Dp,numberOfValues:_p,currentValues:new ye({each:new ge({values:hg})}),sortCriteria:new fe({constrainTo:pg}),rangeAlgorithm:new fe({constrainTo:gg})});function mg(e,t){Ka(e,yg,t,"buildDateFacet"),bl(t)}function vg(e,t){if(!function(e){return e.addReducers({configuration:wf,search:xf,dateFacetSet:Rf}),!0}(e))throw N;ug(t.options,"buildDateFacet");let r=e.dispatch,n=Wp(e,t.options),a={currentValues:[],...t.options,facetId:n};mg(e,a),r(Sl(a));let i=sg(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n]});return{...i,toggleSelect:e=>r(dg({facetId:n,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&r(Uu(n)),this.toggleSelect(e)},get state(){return i.state}}}function bg(e,t){let r=vg(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(vo(Fu(a())))},sortBy(e){r.sortBy(e),n(vo(Ru({facetId:a(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(vo(og(a(),e)))},get state(){return r.state}}}var Sg={facetId:Us,selection:new ge({values:ul})},wg=wr("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,Sg),t(_l(e)),t(lg(e)),t(zs({freezeFacetOrder:!0}))})),Cg={start:new se,end:new se,endInclusive:new le,state:new fe({constrainTo:fg})},Og=new ne({facetId:Tp,field:Vp,generateAutomaticRanges:Np,filterFacetCount:Lp,injectionDepth:Dp,numberOfValues:_p,currentValues:new ye({each:new ge({values:Cg})}),sortCriteria:new fe({constrainTo:pg}),rangeAlgorithm:new fe({constrainTo:gg})});function qg(e,t){Ka(e,Og,t,"buildNumericFacet"),Ll(t)}function xg(e){return{endInclusive:!1,state:"idle",...e}}function Ig(e,t){if(!function(e){return e.addReducers({numericFacetSet:Af,configuration:wf,search:xf}),!0}(e))throw N;ug(t.options,"buildNumericFacet");let r=e.dispatch,n=Wp(e,t.options),a={currentValues:[],...t.options,facetId:n};qg(e,a),r(Dl(a));let i=sg(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n]});return{...i,toggleSelect:e=>r(wg({facetId:n,selection:e})),toggleSingleSelect(e){"idle"===e.state&&r(Uu(n)),this.toggleSelect(e)},get state(){return i.state}}}function Rg(e,t){if(!function(e){return e.addReducers({numericFacetSet:Af,configuration:wf,search:xf}),!0}(e))throw N;let r=Ig(e,t),n=e.dispatch,a=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(vo(Fu(a())))},sortBy(e){r.sortBy(e),n(vo(Ru({facetId:a(),criterion:e})))},toggleSelect:e=>{r.toggleSelect(e),n(vo(og(a(),e)))},get state(){return{...r.state}}}}var Fg=(e,t)=>{let r=((e,t)=>{let r=ia(e,t);if(function(e,t){return!!t&&t.facetId in e.numericFacetSet}(e,r))return r})(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]};function Ag(e,t){var r;if(!function(e){return e.addReducers({numericFacetSet:Af,configuration:wf,search:xf}),!0}(e))throw N;let n=Cp(e),{dispatch:a}=e,i=()=>e.state,o=Wp(e,t.options),s={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};return qg(e,s),a(Dl(s)),{...n,clear:()=>{a(Nl({facetId:o,values:[]})),a(zs({freezeFacetOrder:!0}))},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=Nl({facetId:o,values:[t]});return!r.error&&(a(r),a(zs({freezeFacetOrder:!0})),!0)},get state(){let e=la(i()),t=Fg(i(),o),r=t.length?t[0]:void 0;return{facetId:o,isLoading:e,range:r}}}}function Eg(e,t){if(!function(e){return e.addReducers({numericFacetSet:Af,configuration:wf,search:xf}),!0}(e))throw N;let r=Ag(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(vo(Fu(a())))},setRange:e=>{let t=r.setRange(e);return t&&n(vo(Au({facetId:a(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}var jg=(e,t)=>{let r=((e,t)=>{let r=ia(e,t);if(function(e,t){return!!t&&t.facetId in e.dateFacetSet}(e,r))return r})(e,t);return r?r.values.filter((e=>"selected"===e.state)):[]};function kg(e,t){var r;if(!function(e){return e.addReducers({dateFacetSet:Rf,configuration:wf,search:xf}),!0}(e))throw N;let n=Cp(e),{dispatch:a}=e,i=()=>e.state,o=Wp(e,t.options),s={...t.options,currentValues:(null==(r=t.initialState)?void 0:r.range)?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:o};return mg(e,s),a(Sl(s)),{...n,clear:()=>{a(Cl({facetId:o,values:[]})),a(zs({freezeFacetOrder:!0}))},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=Cl({facetId:o,values:[t]});return!r.error&&(a(r),a(zs({freezeFacetOrder:!0})),!0)},get state(){let e=la(i()),t=jg(i(),o),r=t.length?t[0]:void 0;return{facetId:o,isLoading:e,range:r}}}}function Tg(e,t){if(!function(e){return e.addReducers({dateFacetSet:Rf,configuration:wf,search:xf}),!0}(e))throw N;let r=kg(e,t),{dispatch:n}=e,a=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(vo(Fu(a())))},setRange:e=>{let t=r.setRange(e);return t&&n(vo(Au({facetId:a(),facetValue:`${e.start}..${e.end}`}))),t},get state(){return{...r.state}}}}var Vg=ii("history/analytics/forward",ai.Search,(e=>e.logSearchEvent("historyForward"))),Pg=ii("history/analytics/backward",ai.Search,(e=>e.logSearchEvent("historyBackward"))),$g=ii("history/analytics/noresultsback",ai.Search,(e=>e.logNoResultsBack()));function Mg(e){if(!function(e){return e.addReducers({history:tp,configuration:wf,facetOrder:Ff}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e,n=e=>e.past.length>0&&!oe(e.present);return{...t,get state(){return e.state.history},async back(){!n(this.state)||(await r(Ci()),r(vo(Pg())))},async forward(){!this.state.future.length||!this.state.present||(await r(Oi()),r(vo(Vg())))},async backOnNoResults(){!n(this.state)||(await r(Ci()),r(vo($g())))}}}function Lg(e){return e.pagination.numberOfResults}var Dg=e=>{let t=function(e){return e.pagination.firstResult}(e);return jc(t,Lg(e))},_g=e=>{let t=function(e){return e.pagination.totalCountFiltered}(e);return kc(t,Lg(e))},Ng=(e,t)=>{let r=Dg(e),n=_g(e),a=function(e,t){let r=t%2==0,n=Math.floor(t/2);return{start:e-n,end:e+(r?n-1:n)}}(r,t);return a=function(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}(a),a=function(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),a=e.end-r;return{start:n,end:a}}(a,n),function(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}(a)};var zg=ii("analytics/pager/resize",ai.Search,((e,t)=>{var r;return e.logPagerResize({currentResultsPerPage:(null==(r=t.pagination)?void 0:r.numberOfResults)||10})})),Qg=ii("analytics/pager/number",ai.Search,((e,t)=>e.logPagerNumber({pagerNumber:Dg(t)}))),Ug=ii("analytics/pager/next",ai.Search,((e,t)=>e.logPagerNext({pagerNumber:Dg(t)}))),Bg=ii("analytics/pager/previous",ai.Search,((e,t)=>e.logPagerPrevious({pagerNumber:Dg(t)}))),Hg=new ne({numberOfPages:new se({default:5,min:0})}),Yg=new ne({page:new se({min:1})});function Wg(e,t={}){if(!function(e){return e.addReducers({configuration:wf,pagination:Cf}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e,a=Ka(e,Hg,t.options,"buildPager"),i=Ja(e,Yg,t.initialState,"buildPager").page;i&&n(no(i));let o=()=>{let{numberOfPages:t}=a;return Ng(e.state,t)};return{...r,get state(){let t=Dg(e.state),r=_g(e.state),n=t>1&&r>0,a=t<r;return{currentPage:t,currentPages:o(),maxPage:r,hasPreviousPage:n,hasNextPage:a}},selectPage(e){n(ao(e))},nextPage(){n(io())},previousPage(){n(oo())},isCurrentPage(e){return e===this.state.currentPage}}}function Jg(e,t={}){let{dispatch:r}=e,n=Wg(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(vo(Qg()))},nextPage(){n.nextPage(),r(vo(Ug()))},previousPage(){n.previousPage(),r(vo(Bg()))}}}function Kg(e){if(!function(e){return e.addReducers({search:xf}),!0}(e))throw N;let t=Cp(e),r=()=>e.state;return{...t,get state(){return{hasError:null!==r().search.error,error:r().search.error}}}}function Zg(e){if(!function(e){return e.addReducers({search:xf}),!0}(e))throw N;let t=Cp(e);return{...t,get state(){let t=e.state;return{hasError:null!==t.search.error,isLoading:t.search.isLoading,hasResults:!!t.search.results.length,firstSearchExecuted:bp(t)}}}}function Xg(e){if(!function(e){return e.addReducers({search:xf,pagination:Cf}),!0}(e))throw N;let t=Cp(e),r=Zg(e),n=()=>{let t=e.state.search.duration/1e3;return Math.round(100*(t+Number.EPSILON))/100};return{...t,get state(){let t=e.state;return{...r.state,durationInMilliseconds:t.search.duration,durationInSeconds:n(),firstResult:t.pagination.firstResult+1,hasDuration:0!==t.search.duration,hasQuery:""!==t.search.queryExecuted,lastResult:t.pagination.firstResult+t.search.results.length,query:t.search.queryExecuted,total:t.pagination.totalCountFiltered}}}}var Gg=new ne({fieldsToInclude:new ye({required:!1,each:new fe({required:!0,emptyAllowed:!1})})});function eh(e,t){if(!function(e){return e.addReducers({search:xf,configuration:wf,fields:Uf}),!0}(e))throw N;let r=Cp(e),n=Zg(e),{dispatch:a}=e,i=Ka(e,Gg,null==t?void 0:t.options,"buildResultList");i.fieldsToInclude&&a(Yl(i.fieldsToInclude));let o=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,s=0,u=0,l=!1;return{...r,get state(){let t=e.state;return{...n.state,results:t.search.results,searchUid:t.search.response.searchUid,moreResultsAvailable:o(),searchResponseId:t.search.searchResponseId}},fetchMoreResults:()=>{if(!e.state.search.isLoading)if(o()){if(Date.now()-s<200){if(u++,u>=5)return s=Date.now(),!l&&e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively 5 times, with little delay. Please verify the conditions under which the function is called.'),void(l=!0)}else u=0;l=!1,a(bo()).then((()=>s=Date.now()))}else e.logger.info("No more results are available for the result list to fetch.")}}}var th=e=>(e=>ii("analytics/result/open",ai.Click,((t,r)=>(pi(e),t.logDocumentOpen(oi(e,r),si(e))))))(e)();function rh(e,t,r){if(!function(e){return e.addReducers({configuration:wf}),!0}(e))throw N;let n,a={selectionDelay:1e3,debounceWait:1e3,...t.options};return{select:rp(r,a.debounceWait,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,a.selectionDelay)},cancelPendingSelect(){n&&clearTimeout(n)}}}function nh(e,t){let r=!1;return rh(e,t,(()=>{r||(r=!0,e.dispatch(th(t.options.result))),e.dispatch(ld(t.options.result))}))}var ah=new ne({numberOfResults:new se({min:0})});function ih(e,t={}){if(!function(e){return e.addReducers({pagination:Cf,configuration:wf}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e,a=Ja(e,ah,t.initialState,"buildResultsPerPage").numberOfResults;return void 0!==a&&n(to(a)),{...r,get state(){return{numberOfResults:e.state.pagination.numberOfResults}},set(e){n(ro(e))},isSetTo(e){return e===this.state.numberOfResults}}}function oh(e,t={}){if(!function(e){return e.addReducers({pagination:Cf,configuration:wf}),!0}(e))throw N;let r=ih(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(e){r.set(e),n(vo(zg()))}}}var sh=ii("analytics/searchbox/submit",ai.Search,(e=>e.logSearchboxSubmit())),uh={enableQuerySyntax:!1,numberOfSuggestions:5},lh={open:new fe,close:new fe},ch={id:Qa,numberOfSuggestions:new se({min:0}),enableQuerySyntax:new le,highlightOptions:new ge({values:{notMatchDelimiters:new ge({values:lh}),exactMatchDelimiters:new ge({values:lh}),correctionDelimiters:new ge({values:lh})}})},dh=new ne(ch),fh=e=>ii("analytics/querySuggest",ai.Search,((t,r)=>{let n=ph(r,e);return t.logOmniboxAnalytics(n)}))();function ph(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest&&e.querySuggest[r];if(!a)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let i=a.completions.map((e=>e.expression)),o=a.partialQueries.length-1,s=a.partialQueries[o]||"",u=a.responseId;return{suggestionRanking:i.indexOf(n),partialQuery:s,partialQueries:a.partialQueries,suggestions:i,querySuggestResponseId:u}}function gh(e,t={}){var r,n;if(!function(e){return e.addReducers({query:Tf,querySuggest:Df,configuration:wf,querySet:$f,search:xf}),!0}(e))throw N;let a=Cp(e),{dispatch:i}=e,o=(null==(r=t.options)?void 0:r.id)||Xa("search_box"),s={id:o,highlightOptions:{...null==(n=t.options)?void 0:n.highlightOptions},...uh,...t.options};Ka(e,dh,s,"buildSearchBox"),i($c({id:o,query:e.state.query.q})),s.numberOfSuggestions&&i(Dc({id:o,q:e.state.query.q,count:s.numberOfSuggestions}));let u=()=>e.state.querySet[s.id],l=async e=>{let{enableQuerySyntax:t}=s;i(mo({q:u(),enableQuerySyntax:t})),await i(vo(e))};return{...a,updateText(e){i(Mc({id:o,query:e})),this.showSuggestions()},clear(){i(Mc({id:o,query:""})),i(zc({id:o}))},showSuggestions(){s.numberOfSuggestions&&i(Qc({id:o}))},selectSuggestion(e){i(Nc({id:o,expression:e})),l(fh({id:o,suggestion:e})).then((()=>{i(zc({id:o}))}))},submit(){l(sh()),i(zc({id:o}))},get state(){let t=e.state,r=t.querySuggest[s.id],n=function(e,t){return e?e.completions.map((e=>({highlightedValue:ds(e.highlighted,t),rawValue:e.expression}))):[]}(r,s.highlightOptions),a=!!r&&r.isLoading;return{value:u(),suggestions:n,isLoading:t.search.isLoading,isLoadingSuggestions:a}}}}var hh=ii("analytics/sort/results",ai.Search,((e,t)=>e.logResultsSort({resultsSortBy:t.sortCriteria||Ee()})));function yh(e,t){if(!t)return;let r=new ne({criterion:new ye({each:Ae})}),n=function(e){return e.criterion?me(e.criterion)?e.criterion:[e.criterion]:[]}(t),a={...t,criterion:n};Ja(e,r,a,"buildSort")}function mh(e,t={}){var r;if(!function(e){return e.addReducers({configuration:wf,sortCriteria:_f}),!0}(e))throw N;let n=Cp(e),{dispatch:a}=e;yh(e,t.initialState);let i=null==(r=t.initialState)?void 0:r.criterion;return i&&a(Dd(i)),{...n,sortBy(e){a(_d(e)),a(ao(1)),a(vo(hh()))},isSortedBy(e){return this.state.sortCriteria===Oe(e)},get state(){return{sortCriteria:e.state.sortCriteria}}}}function vh(e){return{state:"idle",...e}}var bh=new ne({id:tf,values:nf});function Sh(e,t){if(!function(e){return e.addReducers({staticFilterSet:Pf}),!0}(e))throw N;Ka(e,bh,t.options,"buildStaticFilter");let r=Cp(e),{dispatch:n}=e,{id:a}=t.options;return n(af(t.options)),{...r,toggleSelect(e){let t=wh(a,e);n(of({id:a,value:e})),n(vo(t))},toggleSingleSelect(e){let t=wh(a,e);"idle"===e.state&&n(sf(a)),n(of({id:a,value:e})),n(vo(t))},deselectAll(){let e=cf({staticFilterId:a});n(sf(a)),n(vo(e))},isValueSelected:e=>"selected"===e.state,get state(){var t;let r=(null==(t=e.state.staticFilterSet[a])?void 0:t.values)||[],n=r.some((e=>"idle"!==e.state));return{id:a,values:r,hasActiveValues:n}}}}function wh(e,t){let{caption:r,expression:n,state:a}=t;return("idle"===a?uf:lf)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}var Ch=new ne({expression:Ba,id:Qa}),Oh=new ne({isActive:new le});function qh(e,t){if(function(e){let t=te().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}(t.options.id),!function(e){return e.addReducers({configuration:wf,tabSet:Mf}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e;Ka(e,Ch,t.options,"buildTab");let a=Ja(e,Oh,t.initialState,"buildTab"),{id:i,expression:o}=t.options;return n(Fs({id:i,expression:o})),a.isActive&&n(As(i)),{...r,select(){n(As(i)),n(vo(yp()))},get state(){return{isActive:e.state.tabSet[i].isActive}}}}function xh(e){if(!function(e){return e.addReducers({search:xf,facetOptions:jf}),!0}(e))throw N;let t=Cp(e);return{...t,sort(e){return so(e,this.state.facetIds)},get state(){return{facetIds:e.state.search.response.facets.map((e=>e.facetId))}}}}var Ih=()=>ii("analytics/facet/deselectAllBreadcrumbs",ai.Search,(e=>e.logBreadcrumbResetAll()))(),Rh={categoryFacetId:Us,categoryFacetPath:new ye({required:!0,each:Qa})},Fh=e=>ii("analytics/categoryFacet/breadcrumb",ai.Search,((t,r)=>(Wa(e,Rh),t.logBreadcrumbFacet(((e,{categoryFacetId:t,categoryFacetPath:r})=>{let n=e.categoryFacetSet[t],a=null==n?void 0:n.request.field;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:a,categoryFacetTitle:`${a}_${t}`}})(r,e)))))(),Ah=(e,{facetId:t,selection:r})=>{let n=e.dateFacetSet[t]||e.numericFacetSet[t];return{facetId:t,facetField:n.field,facetTitle:`${n.field}_${t}`,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},Eh=e=>ii("analytics/numericFacet/breadcrumb",ai.Search,((t,r)=>{Wa(e,cl(e.selection));let n=Ah(r,e);return t.logBreadcrumbFacet(n)}))(),jh=e=>ii("analytics/dateFacet/breadcrumb",ai.Search,((t,r)=>{Wa(e,cl(e.selection));let n=Ah(r,e);return t.logBreadcrumbFacet(n)}))();function kh(e){if(!function(e){return e.addReducers({configuration:wf,search:xf,facetSet:Of,numericFacetSet:Af,dateFacetSet:Rf,categoryFacetSet:Ef}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e,n=(t,r,n)=>Object.keys(t).map((a=>{let i=n(e.state,a).map((e=>({value:e,deselect:()=>r({facetId:a,selection:e})})));return{facetId:a,field:t[a].field,values:i}})).filter((e=>e.values.length)),a=()=>n(e.state.facetSet,(({facetId:e,selection:t})=>{let n=ju({facetId:e,facetValue:t.value});r(Qu({facetId:e,selection:t})),r(Wu({facetId:e,freezeCurrentValues:!1})),r(vo(n))}),ua),i=()=>n(e.state.numericFacetSet,(e=>{r(_l(e)),r(vo(Eh(e)))}),Fg),o=()=>n(e.state.dateFacetSet,(e=>{r(wl(e)),r(vo(jh(e)))}),jg),s=t=>{let n=fa(e.state,t);return{facetId:t,field:e.state.categoryFacetSet[t].request.field,path:n,deselect:()=>{r(Ks(t)),r(vo(Fh({categoryFacetPath:n.map((e=>e.value)),categoryFacetId:t})))}}},u=()=>Object.keys(e.state.categoryFacetSet).map(s).filter((e=>e.path.length)),l=()=>{let t=e.state.staticFilterSet||{};return Object.values(t).map(c)},c=e=>{let{id:t,values:r}=e,n=r.filter((e=>"selected"===e.state)).map((e=>d(t,e)));return{id:t,values:n}},d=(e,t)=>({value:t,deselect:()=>{let{caption:n,expression:a}=t,i=lf({staticFilterId:e,staticFilterValue:{caption:n,expression:a}});r(of({id:e,value:t})),r(vo(i))}});return{...t,get state(){return{facetBreadcrumbs:a(),categoryFacetBreadcrumbs:u(),numericFacetBreadcrumbs:i(),dateFacetBreadcrumbs:o(),staticFilterBreadcrumbs:l(),hasBreadcrumbs:!![...a(),...i(),...o(),...u(),...l()].length}},deselectAll:()=>{r(po()),r(vo(Ih()))},deselectBreadcrumb(e){e.deselect()}}}var Th=new ne({...ch,redirectionUrl:new fe({required:!0,emptyAllowed:!1})});function Vh(e,t){if(!function(e){return e.addReducers({standaloneSearchBoxSet:Xf,configuration:wf,query:Tf,querySuggest:Df,redirection:Lf}),!0}(e))throw N;let{dispatch:r}=e,n=()=>e.state,a=t.options.id||Xa("standalone_search_box"),i={id:a,highlightOptions:{...t.options.highlightOptions},...uh,...t.options};Ka(e,Th,i,"buildStandaloneSearchBox");let o=gh(e,{options:i});return r(Cd({id:a,redirectionUrl:i.redirectionUrl})),{...o,updateText(e){o.updateText(e),r(Od({id:a}))},selectSuggestion(e){let t=ph(n(),{id:a,suggestion:e});r(Nc({id:a,expression:e})),r(qd({id:a,metadata:t})),this.submit()},submit(){r(Ei({q:this.state.value,enableQuerySyntax:i.enableQuerySyntax})),r(xd({id:a}))},get state(){let e=n().standaloneSearchBoxSet[a];return{...o.state,isLoading:e.isLoading,redirectTo:e.redirectTo,analytics:e.analytics}}}}function Ph(e){var t,r,n,a;return{q:"",enableQuerySyntax:!1,aq:null!=(r=null==(t=e.advancedSearchQueries)?void 0:t.defaultFilters.aq)?r:"",cq:null!=(a=null==(n=e.advancedSearchQueries)?void 0:n.defaultFilters.cq)?a:"",firstResult:0,numberOfResults:10,sortCriteria:Ee(),f:{},cf:{},nf:{},df:{},debug:!1,sf:{},tab:""}}function $h(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Mh(e){let t={};return Object.keys(e).forEach((r=>t[r]=e[r].map((e=>`${e.start}..${e.end}`)))),t}function Lh(e={},t={}){let r=Object.keys(e),n=Object.keys(t),a=r.filter((e=>!n.includes(e)));if(a.length){let t=a[0];return e[t].length>1?Fu(t):Eu({facetId:t,facetValue:e[t][0]})}let i=n.filter((e=>!r.includes(e)));if(i.length){let e=i[0];return Au({facetId:e,facetValue:t[e][0]})}let o=n.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!o)return yp();let s=e[o],u=t[o],l=u.filter((e=>!s.includes(e)));if(l.length)return Au({facetId:o,facetValue:l[0]});let c=s.filter((e=>!u.includes(e)));return c.length?Eu({facetId:o,facetValue:c[0]}):yp()}function Dh(e={},t={}){return Lh(Mh(e),Mh(t))}var _h=new ne({parameters:new ge({options:{required:!0},values:xs})});function Nh(e,t){let{dispatch:r}=e,n=Cp(e);return Ja(e,_h,t.initialState,"buildSearchParameterManager"),r(Is(t.initialState.parameters)),{...n,synchronize(t){let n=Qh(e),a=zh(e,n),i=zh(e,t);uc(a,i)||(r(Is(i)),r(vo(function(e,t){return e.q!==t.q?sh():e.sortCriteria!==t.sortCriteria?hh():e.firstResult!==t.firstResult?Qg():e.numberOfResults!==t.numberOfResults?zg():$h(e.f,t.f)?Lh(e.f,t.f):$h(e.cf,t.cf)?Lh(e.cf,t.cf):$h(e.nf,t.nf)?Dh(e.nf,t.nf):$h(e.df,t.df)?Dh(e.df,t.df):yp()}(a,i))))},get state(){return{parameters:Qh(e)}}}}function zh(e,t){return{...Ph(e.state),...t}}function Qh(e){let t=e.state;return{...Uh(t),...Bh(t),...Hh(t),...Yh(t),...Wh(t),...Jh(t),...Kh(t),...Zh(t),...Gh(t),...ey(t),...ty(t),...ry(t),...ay(t),...Xh(t)}}function Uh(e){if(void 0===e.query)return{};let t=e.query.q;return""!==t?{q:t}:{}}function Bh(e){if(void 0===e.query)return{};let t=e.query.enableQuerySyntax;return!1!==t?{enableQuerySyntax:t}:{}}function Hh(e){if(void 0===e.advancedSearchQueries)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function Yh(e){if(void 0===e.advancedSearchQueries)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function Wh(e){let t=Object.values(e.tabSet||{}).find((e=>e.isActive));return t?{tab:t.id}:{}}function Jh(e){if(void 0===e.pagination)return{};let t=e.pagination.firstResult;return 0!==t?{firstResult:t}:{}}function Kh(e){if(void 0===e.pagination)return{};let t=e.pagination.numberOfResults;return 10!==t?{numberOfResults:t}:{}}function Zh(e){if(void 0===e.sortCriteria)return{};let t=e.sortCriteria;return t!==Ee()?{sortCriteria:t}:{}}function Xh(e){if(void 0===e.staticFilterSet)return{};let t=Object.entries(e.staticFilterSet).map((([e,t])=>{let r=function(e){return e.filter((e=>"selected"===e.state)).map((e=>e.caption))}(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{sf:t}:{}}function Gh(e){if(void 0===e.facetSet)return{};let t=Object.entries(e.facetSet).map((([e,t])=>{let r=function(e){return e.filter((e=>"selected"===e.state)).map((e=>e.value))}(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{f:t}:{}}function ey(e){if(void 0===e.categoryFacetSet)return{};let t=Object.entries(e.categoryFacetSet).map((([e,t])=>{let{parents:r}=ca(t.request.currentValues),n=r.map((e=>e.value));return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{cf:t}:{}}function ty(e){if(void 0===e.numericFacetSet)return{};let t=Object.entries(e.numericFacetSet).map((([e,t])=>{let r=ny(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{nf:t}:{}}function ry(e){if(void 0===e.dateFacetSet)return{};let t=Object.entries(e.dateFacetSet).map((([e,t])=>{let r=ny(t.currentValues);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{df:t}:{}}function ny(e){return e.filter((e=>"selected"===e.state))}function ay(e){if(void 0===e.debug)return{};let t=e.debug;return!1!==t?{debug:t}:{}}var iy="&",oy="=",sy="..";function uy(){return{serialize:ly,deserialize:py}}function ly(e){return Object.entries(e).map(cy).filter((e=>e)).join(iy)}function cy(e){let[t,r]=e;return yy(t)?"f"===t||"cf"===t||"sf"===t?function(e){return!!dy(e)&&fy(e,(e=>"string"==typeof e))}(r)?function(e,t){return Object.entries(t).map((([t,r])=>`${e}[${t}]=${r.map((e=>encodeURIComponent(e))).join(",")}`)).join(iy)}(t,r):"":"nf"===t||"df"===t?function(e){return!!dy(e)&&fy(e,(e=>dy(e)&&"start"in e&&"end"in e))}(r)?function(e,t){return Object.entries(t).map((([t,r])=>{let n=r.map((({start:e,end:t})=>`${e}..${t}`)).join(",");return`${e}[${t}]=${n}`})).join(iy)}(t,r):"":`${t}=${encodeURIComponent(r)}`:""}function dy(e){return!(!e||"object"!=typeof e)}function fy(e,t){return 0===Object.entries(e).filter((e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)})).length}function py(e){return e.split(iy).map((e=>function(e){let[t,...r]=e.split(oy),n=r.join(oy);return[t,n]}(e))).map(gy).filter(hy).map(my).reduce(((e,t)=>{let[r,n]=t;if(by(r)){let t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}}),{})}function gy(e){let[t,r]=e,n=/^(f|cf|nf|df|sf)\[(.+)\]$/.exec(t);if(!n)return e;let a=n[1],i=n[2],o=function(e,t){return"nf"===e?function(e){return e.map((e=>e.split(sy).map(parseFloat))).filter((e=>2===e.length&&e.every(Number.isFinite))).map((([e,t])=>xg({start:e,end:t,state:"selected"})))}(t):"df"===e?function(e){return e.map((e=>e.split(sy))).filter((e=>2===e.length&&e.every((t=>function(t){try{return function(e){return Mi((0,Vi.default)(e))===e}(t)?(Li(t,$i),!0):!!Yi(t)&&(Qi(t),!0)}catch(e){return!1}}(t))))).map((([e,t])=>gl({start:e,end:t,state:"selected"})))}(t):t}(a,r.split(",")),s={[i]:o};return[a,JSON.stringify(s)]}function hy(e){let t=yy(e[0]),r=2===e.length;return t&&r}function yy(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,f:!0,cf:!0,nf:!0,df:!0,debug:!0,sf:!0,tab:!0}}function my(e){let[t,r]=e;return"enableQuerySyntax"===t||"debug"===t?[t,"true"===r]:"firstResult"===t||"numberOfResults"===t?[t,parseInt(r)]:by(t)?[t,vy(r)]:[t,decodeURIComponent(r)]}function vy(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach((e=>{let[t,n]=e;r[t]=n.map((e=>pe(e)?decodeURIComponent(e):e))})),r}function by(e){return["f","cf","nf","df","sf"].includes(e)}var Sy=new ne({fragment:new fe});function wy(e,t){let r;function n(){r=e.state.search.requestId}if(!function(e){return e.addReducers({configuration:wf}),!0}(e))throw N;Ja(e,Sy,t.initialState,"buildUrlManager");let a=Cp(e),i=t.initialState.fragment;n();let o=Nh(e,{initialState:{parameters:Cy(i)}});return{...a,subscribe(t){let a=()=>{let a=this.state.fragment;!function(e,t){if(e===t)return!0;let r=Cy(e),n=Cy(t);return uc(r,n)}(i,a)&&r!==e.state.search.requestId&&(i=a,t()),n()};return a(),e.subscribe(a)},get state(){return{fragment:uy().serialize(o.state.parameters)}},synchronize(e){i=e;let t=Cy(e);o.synchronize(t)}}}function Cy(e){return uy().deserialize(e)}var Oy=e=>ii("analytics/resultPreview/open",ai.Click,((t,r)=>{pi(e);let n=oi(e,r),a=si(e);return t.logDocumentQuickview(n,a)}));function qy(e,t){if(!function(e){return e.addReducers({configuration:wf,resultPreview:Wf}),!0}(e))throw N;let{dispatch:r}=e,n=Cp(e),{result:a,maximumPreviewSize:i}=t.options,o=a.uniqueId;return{...n,fetchResultContent(){r(Ed({uniqueId:o,requestedOutputSize:i})),r((e=>Oy(e)())(a))},get state(){let t=a.hasHtmlVersion,r=e.state.resultPreview;return{content:o===r.uniqueId?r.content:"",resultHasPreview:t,isLoading:r.isLoading}}}}var xy=new ne(Zl);function Iy(e,t={}){var r;if(!function(e){return e.addReducers({search:xf,configuration:wf,folding:If,query:Tf}),!0}(e))throw N;let n=eh(e,t),{dispatch:a}=e,i=(null==(r=t.options)?void 0:r.folding)?Ka(e,xy,t.options.folding,"buildFoldedResultList"):{};return a(Xl({...i})),{...n,loadCollection:t=>{a(Gl(t.result.raw[e.state.folding.fields.collection]))},get state(){let t=e.state;return{...n.state,results:n.state.results.map((e=>{let r=e.raw[t.folding.fields.collection];return r&&t.folding.collections[r]?t.folding.collections[r]:{result:e,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}}))}}}}var Ry=ii("analytics/trigger/query",ai.Search,((e,t)=>{var r;if(null==(r=t.triggers)?void 0:r.query)return e.logTriggerQuery()})),Fy=ii("analytics/trigger/notify",ai.Search,((e,t)=>{var r;if(null==(r=t.triggers)?void 0:r.notification)return e.logTriggerNotify({notification:t.triggers.notification})})),Ay=ii("analytics/trigger/redirect",ai.Search,((e,t)=>{var r;if(null==(r=t.triggers)?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.triggers.redirectTo})})),Ey=ii("analytics/trigger/execute",ai.Search,((e,t)=>{var r;if(null==(r=t.triggers)?void 0:r.execute)return e.logTriggerExecute({executed:t.triggers.execute.functionName})}));function jy(e){if(!function(e){return e.addReducers({triggers:Kf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.redirectTo;return{...t,subscribe(t){let n=()=>{let e=a!==this.state.redirectTo;a=this.state.redirectTo,e&&this.state.redirectTo&&(t(),r(Ay()))};return n(),e.subscribe(n)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function ky(e){if(!function(e){return e.addReducers({triggers:Kf,query:Tf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.query,i=n().query.q;return{...t,subscribe(t){let o=()=>{let e=a!==this.state.newQuery;if(a=this.state.newQuery,e&&this.state.newQuery){i=n().query.q;let e={q:n().triggers.query};r(Ei(e)),t(),r(vo(Ry()))}};return o(),e.subscribe(o)},get state(){return{newQuery:n().triggers.query,originalQuery:i,wasQueryModified:""!==n().triggers.query}}}}function Ty(e){if(!function(e){return e.addReducers({triggers:Kf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.execute.functionName,i=n().triggers.execute.params;return{...t,subscribe(t){let n=()=>{let e=a!==this.state.functionName||i!==this.state.params;a=this.state.functionName,i=this.state.params,e&&this.state.functionName&&(t(),r(Ey()))};return n(),e.subscribe(n)},get state(){return{functionName:n().triggers.execute.functionName,params:n().triggers.execute.params}}}}function Vy(e){if(!function(e){return e.addReducers({triggers:Kf}),!0}(e))throw N;let t=Cp(e),{dispatch:r}=e,n=()=>e.state,a=n().triggers.notification;return{...t,subscribe(t){let i=()=>{let e=a!==this.state.notification;a=this.state.notification,e&&n().triggers.notification&&(t(),r(Fy()))};return i(),e.subscribe(i)},get state(){return{notification:n().triggers.notification}}}}var Py=ii("analytics/smartSnippet/expand",ai.Custom,(e=>e.logExpandSmartSnippet())),$y=ii("analytics/smartSnippet/collapse",ai.Custom,(e=>e.logCollapseSmartSnippet())),My=ii("analytics/smartSnippet/like",ai.Custom,(e=>e.logLikeSmartSnippet())),Ly=ii("analytics/smartSnippet/dislike",ai.Custom,(e=>e.logDislikeSmartSnippet())),Dy=e=>ii("analytics/smartSnippetSuggestion/expand",ai.Custom,(t=>(Wa(e,Xc()),t.logExpandSmartSnippetSuggestion(e))))(),_y=e=>ii("analytics/smartSnippetSuggestion/expand",ai.Custom,(t=>(Wa(e,Xc()),t.logCollapseSmartSnippetSuggestion(e))))();function Ny(e){if(!function(e){return e.addReducers({search:xf,questionAnswering:Zf}),!0}(e))throw N;let t=Cp(e);return{...t,get state(){let t=e.state;return{disliked:t.questionAnswering.disliked,liked:t.questionAnswering.liked,expanded:t.questionAnswering.expanded,answerFound:""!==t.search.response.questionAnswer.answerSnippet,question:t.search.response.questionAnswer.question,answer:t.search.response.questionAnswer.answerSnippet,documentId:t.search.response.questionAnswer.documentId}},expand(){e.dispatch(Py()),e.dispatch(Gc())},collapse(){e.dispatch($y()),e.dispatch(ed())},like(){e.dispatch(My()),e.dispatch(td())},dislike(){e.dispatch(Ly()),e.dispatch(rd())}}}function zy(e){if(!function(e){return e.addReducers({search:xf,questionAnswering:Zf}),!0}(e))throw N;let t=Cp(e),r=(e,t)=>{let r=id(t,e.documentId);return-1!==r&&t[r].expanded};return{...t,get state(){let t=e.state;return{questions:t.search.response.questionAnswer.relatedQuestions.map((e=>({question:e.question,answer:e.answerSnippet,documentId:e.documentId,expanded:r(e,t.questionAnswering.relatedQuestions)})))}},expand(t){e.dispatch(Dy(t)),e.dispatch(nd(t))},collapse(t){e.dispatch(_y(t)),e.dispatch(ad(t))}}}var Qy=ii("analytics/recentQueries/clear",ai.Custom,(e=>e.logClearRecentQueries())),Uy=ii("analytics/recentQueries/click",ai.Search,(e=>e.logRecentQueryClick())),By={initialState:{queries:[]},options:{maxLength:10}},Hy=new ne({queries:new ye({required:!0})}),Yy=new ne({maxLength:new se({required:!0,min:1})});function Wy(e,t){if(!function(e){return e.addReducers({search:xf,recentQueries:ep}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e,a={...By,...t};!function(e,t){Ka(e,Yy,null==t?void 0:t.options,"buildRecentQueriesList"),Ja(e,Hy,null==t?void 0:t.initialState,"buildRecentQueriesList")}(e,a);let i={queries:a.initialState.queries,maxLength:a.options.maxLength};return n(pd(i)),{...r,get state(){let t=e.state;return{...t.recentQueries,analyticsEnabled:t.configuration.analytics.enabled}},clear(){n(Qy()),n(gd())},executeRecentQuery(e){let t=new se({required:!0,min:0,max:this.state.queries.length}).validate(e);if(t)throw new Error(t);n(mo({q:this.state.queries[e]})),n(vo(Uy()))}}}var Jy=e=>(e=>ii("analytics/recentResults/click",ai.Custom,((t,r)=>{pi(e),t.logRecentResultClick(oi(e,r),si(e))})))(e)(),Ky=ii("analytics/recentResults/clear",ai.Custom,(e=>e.logClearRecentResults())),Zy={initialState:{results:[]},options:{maxLength:10}},Xy=new ne({results:new ye({required:!0})}),Gy=new ne({maxLength:new se({required:!0,min:1})});function em(e,t){if(!function(e){return e.addReducers({recentResults:Gf}),!0}(e))throw N;let r=Cp(e),{dispatch:n}=e,a={...Zy,...t};!function(e,t){Ka(e,Gy,null==t?void 0:t.options,"buildRecentResultsList"),Ja(e,Xy,null==t?void 0:t.initialState,"buildRecentResultsList")}(e,a);let i={results:a.initialState.results,maxLength:a.options.maxLength};return n(ud(i)),{...r,get state(){return e.state.recentResults},clear(){n(Ky()),n(cd())}}}function tm(e,t){return rh(e,t,(()=>e.dispatch(Jy(t.options.result))))}function rm(e){return e.addReducers({advancedSearchQueries:Vf}),{updateAdvancedSearchQueries:Os,registerAdvancedSearchQueries:qs}}function nm(e){return e.addReducers({categoryFacetSet:Ef}),{deselectAllCategoryFacetValues:Ks,registerCategoryFacet:Ws,toggleSelectCategoryFacetValue:Js,updateCategoryFacetNumberOfValues:Zs,updateCategoryFacetSortCriterion:Xs,updateFacetAutoSelection:ho}}function am(e){return e.addReducers({facetSet:Of}),{deselectAllFacetValues:Uu,registerFacet:zu,toggleSelectFacetValue:Qu,updateFacetIsFieldExpanded:Yu,updateFacetNumberOfValues:Hu,updateFacetSortCriterion:Bu,updateFreezeCurrentValues:Wu,updateFacetAutoSelection:ho}}function im(e){return e.addReducers({configuration:wf}),{disableAnalytics:bs,enableAnalytics:Ss,setOriginLevel2:ws,setOriginLevel3:Cs,updateAnalyticsConfiguration:vs,updateBasicConfiguration:ys}}function om(e){return e.addReducers({configuration:wf,pipeline:Bf,searchHub:Hf}),{updateSearchConfiguration:ms}}function sm(e){return e.addReducers({context:Nf}),{addContext:Vs,removeContext:Ps,setContext:Ts}}function um(e){return e.addReducers({dictionaryFieldContext:zf}),{addContext:Kd,removeContext:Zd,setContext:Jd}}function lm(e){return e.addReducers({debug:Yf}),{disableDebug:Ls,enableDebug:Ms}}function cm(e){return e.addReducers({dateFacetSet:Rf}),{deselectAllDateFacetValues:ql,registerDateFacet:Sl,toggleSelectDateFacetValue:wl,updateDateFacetSortCriterion:Ol,updateDateFacetValues:Cl}}function dm(e){return e.addReducers({facetOptions:jf}),{updateFacetOptions:zs}}function fm(e){return e.addReducers({didYouMean:Qf,query:Tf}),{applyDidYouMeanCorrection:Ai,disableDidYouMean:Fi,enableDidYouMean:Ri}}function pm(e){return e.addReducers({fields:Uf}),{registerFieldsToInclude:Yl,enableFetchAllFields:Wl,disableFetchAllFields:Jl,fetchFieldsDescription:Kl}}function gm(e){return e.addReducers({history:tp,facetOrder:Ff}),{back:Ci,forward:Oi}}function hm(e){return e.addReducers({numericFacetSet:Af}),{deselectAllNumericFacetValues:Ql,registerNumericFacet:Dl,toggleSelectNumericFacetValue:_l,updateNumericFacetSortCriterion:zl,updateNumericFacetValues:Nl}}function ym(e){return e.addReducers({folding:If}),{registerFolding:Xl,loadCollection:Gl}}function mm(e){return e.addReducers({pagination:Cf}),{nextPage:io,previousPage:oo,registerNumberOfResults:to,registerPage:no,updateNumberOfResults:ro,updatePage:ao}}function vm(e){return e.addReducers({pipeline:Bf}),{setPipeline:Tc}}function bm(e){return e.addReducers({query:Tf}),{updateQuery:Ei}}function Sm(e){return e.addReducers({querySet:$f}),{registerQuerySetQuery:$c,updateQuerySetQuery:Mc}}function wm(e){return e.addReducers({querySuggest:Df}),{clearQuerySuggest:zc,fetchQuerySuggestions:Qc,registerQuerySuggest:Dc,selectQuerySuggestion:Nc}}function Cm(e){return e.logger.warn('The "loadRedirectionActions" function is deprecated. Please use "loadStandaloneSearchBoxSetActions" instead.'),e.addReducers({redirection:Lf}),{checkForRedirection:Fd}}function Om(e){return e.addReducers({search:xf}),{executeSearch:vo,fetchMoreResults:bo}}function qm(e){return e.addReducers({searchHub:Hf}),{setSearchHub:kd}}function xm(e){return e.addReducers({sortCriteria:_f}),{registerSortCriterion:Dd,updateSortCriterion:_d}}function Im(e){return e.addReducers({standaloneSearchBoxSet:Xf}),{registerStandaloneSearchBox:Cd,fetchRedirectUrl:xd,updateAnalyticsToSearchFromLink:Od,updateAnalyticsToOmniboxFromLink:qd}}function Rm(e){return e.addReducers({staticFilterSet:Pf}),{registerStaticFilter:af,toggleSelectStaticFilterValue:of,deselectAllStaticFilterValues:sf}}function Fm(e){return e.addReducers({questionAnswering:Zf}),{collapseSmartSnippet:ed,expandSmartSnippet:Gc,dislikeSmartSnippet:rd,likeSmartSnippet:td}}function Am(e){return e.addReducers({}),{deselectAllFacets:go,deselectAllBreadcrumbs:po}}function Em(e){return e.addReducers({recentQueries:ep}),{registerRecentQueries:pd,clearRecentQueries:gd}}function jm(e){return e.addReducers({recentResults:Gf}),{registerRecentResults:ud,clearRecentResults:cd,pushRecentResult:ld}}var km=new ne({priority:new se({required:!1,default:0,min:0}),fields:new ye({required:!1,each:Qa})});function Tm(e){if(!function(e){return e.addReducers({fields:Uf}),!0}(e))throw N;let t=[];return{registerTemplates(...r){let n=[];try{(e=>{e.forEach((e=>{if(km.validate(e,"Check the arguments of registerTemplates"),!e.conditions.every((e=>e instanceof Function)))throw new re("Each result template conditions should be a function that takes a result as an argument and returns a boolean")}))})(r)}catch(ve){return void e.logger.error(ve,"Result template manager error")}r.forEach((e=>{let r={...e,priority:e.priority||0,fields:e.fields||[]};t.push(r),n.push(...r.fields)})),t.sort(((e,t)=>t.priority-e.priority)),n.length&&e.dispatch(Yl(n))},selectTemplate(e){let r=t.find((t=>t.conditions.every((t=>t(e)))));return r?r.content:null}}}var Vm,Pm=(e,t)=>{let r=e;return oe(r[t])?oe(e.raw[t])?null:e.raw[t]:r[t]},$m=e=>t=>e.every((e=>!oe(Pm(t,e)))),Mm=e=>t=>e.every((e=>oe(Pm(t,e)))),Lm=(e,t)=>r=>{let n=_m(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},Dm=(e,t)=>r=>{let n=_m(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},_m=(e,t)=>{let r=Pm(t,e);return Ga(r)?r:[r]};function Nm(e){return e.addReducers({}),{logClearBreadcrumbs:Ih,logInterfaceLoad:hp,logSearchFromLink:mp,logOmniboxFromLink:vp,logInterfaceChange:yp,logDidYouMeanClick:xi,logCategoryFacetBreadcrumb:Fh,logFacetBreadcrumb:ju,logFacetClearAll:Fu,logFacetDeselect:Eu,logFacetSelect:Au,logFacetShowLess:Iu,logFacetShowMore:xu,logFacetUpdateSort:Ru,logDateFacetBreadcrumb:jh,logNumericFacetBreadcrumb:Eh,logNavigateBackward:Pg,logNavigateForward:Vg,logPageNext:Ug,logPageNumber:Qg,logPagePrevious:Bg,logPagerResize:zg,logSearchboxSubmit:sh,logQuerySuggestionClick:fh,logResultsSort:hh,logDislikeSmartSnippet:Ly,logLikeSmartSnippet:My,logExpandSmartSnippet:Py,logCollapseSmartSnippet:$y,logExpandSmartSnippetSuggestion:Dy,logCollapseSmartSnippetSuggestion:_y,logNoResultsBack:$g,logStaticFilterSelect:uf,logStaticFilterDeselect:lf,logStaticFilterClearAll:cf}}function zm(e){return e.addReducers({}),{logDocumentOpen:th}}function Qm(e){return e.addReducers({}),{logSearchEvent:fp,logClickEvent:pp,logCustomEvent:gp}}function Um(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map((t=>{let n=t.trim().split(" "),a=n[0].toLowerCase(),i=n[1]&&n[1].toLowerCase();if(n.length>2||""===a)throw r;if(!function(e){return void 0===e||e===we.Ascending||e===we.Descending}(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "${we.Ascending}" or "${we.Descending}"`);return function(e){let{by:t,order:r}=e;switch(t){case Ce.Relevancy:return qe();case Ce.QRE:return Re();case Ce.NoSort:return Fe();case Ce.Date:if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return xe(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Ie(t,r)}}({by:a,order:i})}))}function Bm(e){return e.negate?"NOT ":""}function Hm(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function Ym(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,n=function(e){return Object.entries(e).map((e=>{let[t,r]=e;return`${t}: ${"string"==typeof r?r:r.toQuerySyntax()}`})).join(", ")}(r);return`$${t}(${n})`}}}function Wm(){let e=[],t="and";return{addExpression(t){return e.push(t),this},addKeyword(t){return e.push(function(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}(t)),this},addNear(t){return e.push(function(e){return{toQuerySyntax(){let t=Bm(e),{startTerm:r,otherTerms:n}=e,a=function(e){return e.map((e=>{let{endTerm:t,maxKeywordsBetween:r}=e;return`near:${r} ${t}`})).join(" ")}(n),i=`${r} ${a}`;return e.negate?`${t}(${i})`:i}}}(t)),this},addExactMatch(t){return e.push(function(e){return{toQuerySyntax(){let t=Bm(e),{expression:r}=e;return`${t}"${r}"`}}}(t)),this},addFieldExists(t){return e.push(function(e){return{toQuerySyntax(){let t=Bm(e),{field:r}=e;return`${t}@${r}`}}}(t)),this},addStringField(t){return e.push(function(e){return{toQuerySyntax(){let{field:t}=e,r=Bm(e),n=Hm(e.operator),a=e.values.map((e=>`"${e}"`));return`${r}@${t}${n}${1===a.length?a[0]:`(${a.join(",")})`}`}}}(t)),this},addStringFacetField(t){return e.push(function(e){return{toQuerySyntax(){let t=Bm(e),{field:r,operator:n,value:a}=e;return`${t}@${r}${Hm(n)}${"fuzzyMatch"===n?` $quoteVar(value: ${a})`:`("${a}")`}`}}}(t)),this},addNumericField(t){return e.push(function(e){return{toQuerySyntax(){let{field:t,value:r}=e;return`${Bm(e)}@${t}${Hm(e.operator)}${r}`}}}(t)),this},addNumericRangeField(t){return e.push(function(e){return{toQuerySyntax(){let t=Bm(e),{field:r,from:n,to:a}=e;return`${t}@${r}${Hm("isExactly")}${n}..${a}`}}}(t)),this},addDateField(t){return e.push(function(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Hm(e.operator);return`${Bm(e)}@${t}${n}${r}`}}}(t)),this},addDateRangeField(t){return e.push(function(e){return{toQuerySyntax(){let t=Bm(e),{field:r,from:n,to:a}=e;return`${t}@${r}${Hm("isExactly")}${n}..${a}`}}}(t)),this},addQueryExtension(t){return e.push(Ym(t)),this},joinUsing(e){return t=e,this},toQuerySyntax(){let r=function(e){return"and"===e?"AND":"OR"}(t),n=e.map((e=>e.toQuerySyntax())).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}(e=>{e.getResultProperty=Pm,e.fieldsMustBeDefined=$m,e.fieldsMustNotBeDefined=Mm,e.fieldMustMatch=Lm,e.fieldMustNotMatch=Dm})(Vm||(Vm={}))}}]);