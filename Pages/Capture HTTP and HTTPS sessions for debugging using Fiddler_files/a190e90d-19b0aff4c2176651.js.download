"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{9461:function(e,t,r){r.r(t),r.d(t,{buildContext:function(){return Dc},buildController:function(){return Vc},buildDictionaryFieldContext:function(){return Lc},buildRecommendationEngine:function(){return xc},buildRecommendationList:function(){return Mc},getSampleRecommendationEngineConfiguration:function(){return mc},loadAdvancedSearchQueryActions:function(){return Ec},loadClickAnalyticsActions:function(){return $c},loadConfigurationActions:function(){return Ic},loadContextActions:function(){return jc},loadDebugActions:function(){return Tc},loadDictionaryFieldContextActions:function(){return Ac},loadFieldActions:function(){return Rc},loadPipelineActions:function(){return kc},loadRecommendationActions:function(){return Pc},loadSearchHubActions:function(){return Fc}}),e=r.hmd(e);var n=Object.create,a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>((e,t,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of o(t))!l.call(e,n)&&"default"!==n&&a(e,n,{get:()=>t[n],enumerable:!(r=i(t,n))||r.enumerable});return e})((e=>a(e,"__esModule",{value:!0}))(a(null!=e?n(s(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),d=u(((e,t)=>{t.exports=fetch})),f=u((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}})),p=u((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){var t=Math.random()*e;return Math.round(t)}})),h=u((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}})),g=u((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=p(),r=h();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}})),y=u((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=g(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r})),m=u((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(t){i(t)}}function s(e){try{l(n.throw(e))}catch(t){i(t)}}function l(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t(a,e),a.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]}))}))},Object.defineProperty(a.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),a}(y().Delay);e.SkipFirstDelay=a})),v=u((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(y().Delay);e.AlwaysDelay=r})),b=u((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=m(),r=v();e.DelayFactory=function(e,n){var a=function(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}(e);return a.setAttemptNumber(n),a}})),w=u((e=>{var t=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(t){i(t)}}function s(e){try{l(n.throw(e))}catch(t){i(t)}}function l(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=f(),a=b();e.backOff=function(e,a){return void 0===a&&(a={}),t(this,void 0,void 0,(function(){var t;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(a),[4,new i(e,t).execute()];case 1:return[2,r.sent()]}}))}))};var i=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,a.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}}))}))},e}()})),S=u(((e,t)=>{var n,a;n=e,a=function(){var e=6e4,t=36e5,r="millisecond",n="second",a="minute",i="hour",o="day",s="week",l="month",u="quarter",c="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:y,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,l),i=r-a<0,o=t.clone().add(n+(i?-1:1),l);return+(-(n+(r-a)/(i?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:c,w:s,d:o,D:d,h:i,m:a,s:n,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",b={};b[v]=g;var w=function(e){return e instanceof q},S=function(e,t,r){var n;if(!e)return v;if("string"==typeof e)b[e]&&(n=e),t&&(b[e]=t,n=e);else{var a=e.name;b[a]=e,n=a}return!r&&n&&(v=n),n||!r&&v},C=function(e,t){if(w(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new q(r)},O=m;O.l=S,O.i=w,O.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var q=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e)}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return O},y.isValid=function(){return this.$d.toString()!==f},y.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},y.isAfter=function(e,t){return C(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<C(e)},y.$g=function(e,t,r){return O.u(e)?this[t]:this.set(r,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var r=this,u=!!O.u(t)||t,f=O.p(e),p=function(e,t){var n=O.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return u?n:n.endOf(o)},h=function(e,t){return O.w(r.toDate()[e].apply(r.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,y=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(f){case c:return u?p(1,0):p(31,11);case l:return u?p(1,y):p(0,y+1);case s:var b=this.$locale().weekStart||0,w=(g<b?g+7:g)-b;return p(u?m-w:m+(6-w),y);case o:case d:return h(v+"Hours",0);case i:return h(v+"Minutes",1);case a:return h(v+"Seconds",2);case n:return h(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var s,u=O.p(e),f="set"+(this.$u?"UTC":""),p=(s={},s[o]=f+"Date",s[d]=f+"Date",s[l]=f+"Month",s[c]=f+"FullYear",s[i]=f+"Hours",s[a]=f+"Minutes",s[n]=f+"Seconds",s[r]=f+"Milliseconds",s)[u],h=u===o?this.$D+(t-this.$W):t;if(u===l||u===c){var g=this.clone().set(d,1);g.$d[p](h),g.init(),this.$d=g.set(d,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[O.p(e)]()},y.add=function(r,u){var d,f=this;r=Number(r);var p=O.p(u),h=function(e){var t=C(f);return O.w(t.date(t.date()+Math.round(e*r)),f)};if(p===l)return this.set(l,this.$M+r);if(p===c)return this.set(c,this.$y+r);if(p===o)return h(1);if(p===s)return h(7);var g=(d={},d[a]=e,d[i]=t,d[n]=1e3,d)[p]||1,y=this.$d.getTime()+r*g;return O.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this;if(!this.isValid())return f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=O.z(this),a=this.$locale(),i=this.$H,o=this.$m,s=this.$M,l=a.weekdays,u=a.months,c=function(e,n,a,i){return e&&(e[n]||e(t,r))||a[n].substr(0,i)},d=function(e){return O.s(i%12||12,e,"0")},p=a.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:O.s(s+1,2,"0"),MMM:c(a.monthsShort,s,u,3),MMMM:c(u,s),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:c(a.weekdaysMin,this.$W,l,2),ddd:c(a.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(i),HH:O.s(i,2,"0"),h:d(1),hh:d(2),a:p(i,o,!0),A:p(i,o,!1),m:String(o),mm:O.s(o,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:n};return r.replace(h,(function(e,t){return t||g[e]||n.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,d,f){var p,h=O.p(d),g=C(r),y=(g.utcOffset()-this.utcOffset())*e,m=this-g,v=O.m(this,g);return v=(p={},p[c]=v/12,p[l]=v,p[u]=v/3,p[s]=(m-y)/6048e5,p[o]=(m-y)/864e5,p[i]=m/t,p[a]=m/e,p[n]=m/1e3,p)[h]||m,f?v:O.a(v)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return b[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=S(e,t,!0);return n&&(r.$L=n),r},y.clone=function(){return O.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),x=q.prototype;return C.prototype=x,[["$ms",r],["$s",n],["$m",a],["$H",i],["$W",o],["$M",l],["$y",c],["$D",d]].forEach((function(e){x[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,q,C),e.$i=!0),C},C.locale=S,C.isDayjs=w,C.unix=function(e){return C(1e3*e)},C.en=b[v],C.Ls=b,C.p={},C},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs=a()})),C=u(((e,t)=>{var n,a;n=e,a=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(e){var t={date:e,utc:!0,args:arguments};return new a(t)},o.utc=function(t){var r=i(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=o.utcOffset;o.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(n)))return this;var o=Math.abs(n)<=16?60*n:n,s=this;if(a)return s.$offset=o,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+l,e)).$offset=o,s.$x.$localOffset=l}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),a=i(e).local();return f.call(n,a,t,r)}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_utc=a()})),O=u(((e,t)=>{var n,a;n=e,a=function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var i,o=function(e,r,n){void 0===n&&(n={});var a=new Date(e);return function(e,r){void 0===r&&(r={});var n=r.timeZoneName||"short",a=e+"|"+n,i=t[a];return i||(i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[a]=i),i}(r,n).formatToParts(a)},s=function(t,r){for(var n=o(t,r),i=[],s=0;s<n.length;s+=1){var l=n[s],u=l.type,c=l.value,d=e[u];d>=0&&(i[d]=parseInt(c,10))}var f=i[3],p=24===f?0:f,h=i[0]+"-"+i[1]+"-"+i[2]+" "+p+":"+i[4]+":"+i[5]+":000",g=+t;return(a.utc(h).valueOf()-(g-=g%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=i);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),l=a(o).$set("millisecond",this.$ms).utcOffset(15*-Math.round(n.getTimezoneOffset()/15)-s,!0);if(t){var u=l.utcOffset();l=l.add(r-u,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find((function(e){return"timezonename"===e.type.toLowerCase()}));return r&&r.value};var u=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var r=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return u.call(r,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,r){var n=r&&t,o=r||t||i,l=s(+a(),o);if("string"!=typeof e)return a(e).tz(o);var u=function(e,t,r){var n=e-60*t*1e3,a=s(n,r);if(t===a)return[n,t];var i=s(n-=60*(a-t)*1e3,r);return a===i?[n,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,n).valueOf(),l,o),c=u[0],d=u[1],f=a(c).utcOffset(d);return f.$x.$timezone=o,f},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_timezone=a()})),q=u(((e,t)=>{var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports=r.AbortController,t.exports.default=r.AbortController})),x=u(((e,t)=>{var n,a;n=e,a=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^\s\d-_:/()]+/,i={},o=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],l=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var r,n=i.meridiem;if(n){for(var a=1;a<=24;a+=1)if(e.indexOf(n(a,0,t))>-1){r=a>12;break}}else r=e===(t?"pm":"PM");return r},c={A:[a,function(e){this.afternoon=u(e,!1)}],a:[a,function(e){this.afternoon=u(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,o("seconds")],ss:[n,o("seconds")],m:[n,o("minutes")],mm:[n,o("minutes")],H:[n,o("hours")],h:[n,o("hours")],HH:[n,o("hours")],hh:[n,o("hours")],D:[n,o("day")],DD:[r,o("day")],Do:[a,function(e){var t=i.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,o("month")],MM:[r,o("month")],MMM:[a,function(e){var t=l("months"),r=(l("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[a,function(e){var t=l("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[r,function(e){e=+e,this.year=e+(e>68?1900:2e3)}],YYYY:[/\d{4}/,o("year")],Z:s,ZZ:s};return function(r,n,a){a.p.customParseFormat=!0;var o=n.prototype,s=o.parse;o.parse=function(r){var n=r.date,o=r.utc,l=r.args;this.$u=o;var u=l[1];if("string"==typeof u){var d=!0===l[2],f=!0===l[3],p=d||f,h=l[2];f&&(h=l[2]),i=this.$locale(),!d&&h&&(i=a.Ls[h]),this.$d=function(r,n,a){try{var o=function(r){var n,a;n=r,a=i&&i.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var i=n&&n.toUpperCase();return r||a[n]||e[n]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),s=o.length,l=0;l<s;l+=1){var u=o[l],d=c[u],f=d&&d[0],p=d&&d[1];o[l]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var a=o[r];if("string"==typeof a)n+=a.length;else{var i=a.regex,l=a.parser,u=e.substr(n),c=i.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}}(n)(r),s=o.year,l=o.month,u=o.day,d=o.hours,f=o.minutes,p=o.seconds,h=o.milliseconds,g=o.zone,y=new Date,m=u||(s||l?1:y.getDate()),v=s||y.getFullYear(),b=0;s&&!l||(b=l>0?l-1:y.getMonth());var w=d||0,S=f||0,C=p||0,O=h||0;return g?new Date(Date.UTC(v,b,m,w,S,C,O+60*g.offset*1e3)):a?new Date(Date.UTC(v,b,m,w,S,C,O)):new Date(v,b,m,w,S,C,O)}catch{return new Date("")}}(n,u,o),this.init(),h&&!0!==h&&(this.$L=this.locale(h).$L),p&&n!==this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var g=u.length,y=1;y<=g;y+=1){l[1]=u[y-1];var m=a.apply(this,l);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}y===g&&(this.$d=new Date(""))}else s.call(this,r)}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_customParseFormat=a()})),I=u(((e,t)=>{var n,a;n=e,a=function(){var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=a.add;a.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var o=a.startOf;a.startOf=function(r,n){var a=this.$utils(),i=!!a.u(n)||n;if(a.p(r)===t){var s=this.quarter()-1;return i?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}},"object"==typeof e&&"undefined"!=typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_quarterOfYear=a()})),E=u(((e,t)=>{var n,a;n=e,a=function(e){var t="function"==typeof WeakSet,r=Object.keys;function n(e,t){return e===t||e!==e&&t!==t}function a(e){return e.constructor===Object||null==e.constructor}function i(e){return!!e&&"function"==typeof e.then}function o(e){return!(!e||!e.$$typeof)}function s(){var e=[];return{add:function(t){e.push(t)},has:function(t){return-1!==e.indexOf(t)}}}var l=t?function(){return new WeakSet}:s;function u(e){return function(t){var r=e||t;return function(e,t,n){void 0===n&&(n=l());var a=!!e&&"object"==typeof e,i=!!t&&"object"==typeof t;if(a||i){var o=a&&n.has(e),s=i&&n.has(t);if(o||s)return o&&s;a&&n.add(e),i&&n.add(t)}return r(e,t,n)}}}var c=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function d(e,t,n,a){var i=r(e),s=i.length;if(r(t).length!==s)return!1;if(s)for(var l=void 0;s-- >0;){if("_owner"===(l=i[s])){var u=o(e),d=o(t);if((u||d)&&u!==d)return!1}if(!c(t,l)||!n(e[l],t[l],a))return!1}return!0}var f="function"==typeof Map,p="function"==typeof Set;function h(e){var t="function"==typeof e?e(r):r;function r(e,r,o){if(e===r)return!0;if(e&&r&&"object"==typeof e&&"object"==typeof r){if(a(e)&&a(r))return d(e,r,t,o);var s=Array.isArray(e),l=Array.isArray(r);return s||l?s===l&&function(e,t,r,n){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r(e[a],t[a],n))return!1;return!0}(e,r,t,o):(s=e instanceof Date,l=r instanceof Date,s||l?s===l&&n(e.getTime(),r.getTime()):(s=e instanceof RegExp,l=r instanceof RegExp,s||l?s===l&&function(e,t){return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.unicode===t.unicode&&e.sticky===t.sticky&&e.lastIndex===t.lastIndex}(e,r):i(e)||i(r)?e===r:f&&(s=e instanceof Map,l=r instanceof Map,s||l)?s===l&&function(e,t,r,n){var a=e.size===t.size;return a&&e.size&&e.forEach((function(e,i){a&&(a=!1,t.forEach((function(t,o){!a&&r(i,o,n)&&(a=r(e,t,n))})))})),a}(e,r,t,o):p&&(s=e instanceof Set,l=r instanceof Set,s||l)?s===l&&function(e,t,r,n){var a=e.size===t.size;return a&&e.size&&e.forEach((function(e){a&&(a=!1,t.forEach((function(t){a||(a=r(e,t,n))})))})),a}(e,r,t,o):d(e,r,t,o)))}return e!==e&&r!==r}return r}var g=h(),y=h((function(){return n})),m=h(u()),v=h(u(n));e.circularDeepEqual=m,e.circularShallowEqual=v,e.createCustomEqual=h,e.deepEqual=g,e.sameValueZeroEqual=n,e.shallowEqual=y,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&"undefined"!=typeof t?a(e):"function"==typeof define&&r.amdO?define(["exports"],a):a((n="undefined"!=typeof globalThis?globalThis:n||self)["fast-equals"]={})})),j=u(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var a=n&&n.stringify||r;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=new Array(i);o[0]=a(e);for(var s=1;s<i;s++)o[s]=a(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var u="",c=0,d=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(c>=l||(d<p&&(u+=e.slice(d,p)),null==t[c]))break;u+=Number(t[c]),d=p+=2;break;case 105:if(c>=l||(d<p&&(u+=e.slice(d,p)),null==t[c]))break;u+=Math.floor(Number(t[c])),d=p+=2;break;case 79:case 111:case 106:if(c>=l||(d<p&&(u+=e.slice(d,p)),void 0===t[c]))break;var h=typeof t[c];if("string"===h){u+="'"+t[c]+"'",d=p+2,p++;break}if("function"===h){u+=t[c].name||"<anonymous>",d=p+2,p++;break}u+=a(t[c]),d=p+2,p++;break;case 115:if(c>=l)break;d<p&&(u+=e.slice(d,p)),u+=String(t[c]),d=p+2,p++;break;case 37:d<p&&(u+=e.slice(d,p)),u+="%",d=p+2,p++,c--}++c}++p}return-1===d?e:(d<f&&(u+=e.slice(d)),u)}})),A=u(((e,t)=>{var r=j();t.exports=i;var n=function(){function e(e){return"undefined"!=typeof e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{},a={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:p,res:p,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function i(e){(e=e||{}).browser=e.browser||{};let t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let a=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,a),c=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(c=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");let p=e.level||"info",h=Object.create(r);h.log||(h.log=g),Object.defineProperty(h,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(h,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(y,h,"error","log"),o(y,h,"fatal","error"),o(y,h,"warn","error"),o(y,h,"info","log"),o(y,h,"debug","log"),o(y,h,"trace","log")}});let y={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:f(e)};return h.levels=i.levels,h.level=p,h.setMaxListeners=h.getMaxListeners=h.emit=h.addListener=h.on=h.prependListener=h.once=h.prependOnceListener=h.removeListener=h.removeAllListeners=h.listeners=h.listenerCount=h.eventNames=h.write=h.flush=g,h.serializers=a,h._serialize=s,h._stdErrSerialize=c,h.child=function(r){if(!r)throw new Error("missing bindings for child Pino");let n=r.serializers;if(s&&n){var i=Object.assign({},a,n),o=!0===e.browser.serialize?Object.keys(i):s;delete r.serializers,l([r],o,i,this._stdErrSerialize)}function c(e){this._childLevel=1+(0|e._childLevel),this.error=u(e,r,"error"),this.fatal=u(e,r,"fatal"),this.warn=u(e,r,"warn"),this.info=u(e,r,"info"),this.debug=u(e,r,"debug"),this.trace=u(e,r,"trace"),i&&(this.serializers=i,this._serialize=o),t&&(this._logEvent=d([].concat(e._logEvent.bindings,r)))}return c.prototype=this,new c(this)},t&&(h._logEvent=d()),h}function o(e,t,r,a){let o=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?g:o[r]?o[r]:n[r]||n[a]||g,function(e,t,r){!e.transmit&&t[r]===g||(t[r]=function(a){return function(){let o=e.timestamp(),u=new Array(arguments.length),d=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var f=0;f<u.length;f++)u[f]=arguments[f];if(e.serialize&&!e.asObject&&l(u,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?a.call(d,s(this,r,u,o)):a.apply(d,u),e.transmit){let n=e.transmit.level||t.level,a=i.levels.values[n],s=i.levels.values[r];if(s<a)return;c(this,{ts:o,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:i.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},u)}}}(t[r]))}(e,t,r)}function s(e,t,n,a){e._serialize&&l(n,e._serialize,e.serializers,e._stdErrSerialize);let o=n.slice(),s=o[0],u={};a&&(u.time=a),u.level=i.levels.values[t];let c=1+(0|e._childLevel);if(c<1&&(c=1),null!==s&&"object"==typeof s){for(;c--&&"object"==typeof o[0];)Object.assign(u,o.shift());s=o.length?r(o.shift(),o):void 0}else"string"==typeof s&&(s=r(o.shift(),o));return void 0!==s&&(u.msg=s),u}function l(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=i.stdSerializers.err(e[a]);else if("object"==typeof e[a]&&!Array.isArray(e[a]))for(let n in e[a])t&&t.indexOf(n)>-1&&n in r&&(e[a][n]=r[n](e[a][n]))}function u(e,t,r){return function(){let n=new Array(1+arguments.length);n[0]=t;for(var a=1;a<n.length;a++)n[a]=arguments[a-1];return e[r].apply(this,n)}}function c(e,t,r){let n=t.send,a=t.ts,i=t.methodLevel,o=t.methodValue,s=t.val,u=e._logEvent.bindings;l(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=r.filter((function(e){return-1===u.indexOf(e)})),e._logEvent.level.label=i,e._logEvent.level.value=o,n(i,e._logEvent,s),e._logEvent=d(u)}function d(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function f(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?y:m}function p(){return{}}function h(e){return e}function g(){}function y(){return!1}function m(){return Date.now()}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=a,i.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}));function R(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function k(e){return!!e&&!!e[me]}function F(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[ye]||!!e.constructor[ye]||M(e)||D(e))}function T(e,t,r){void 0===r&&(r=!1),0===P(e)?(r?Object.keys:ve)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function P(e){var t=e[me];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:M(e)?2:D(e)?3:0}function $(e,t){return 2===P(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function V(e,t,r){var n=P(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function _(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function M(e){return fe&&e instanceof Map}function D(e){return pe&&e instanceof Set}function L(e){return e.o||e.t}function z(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=be(e);delete t[me];for(var r=ve(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function U(e,t){return void 0===t&&(t=!1),Q(e)||k(e)||!F(e)||(P(e)>1&&(e.set=e.add=e.clear=e.delete=N),Object.freeze(e),t&&T(e,(function(e,t){return U(t,!0)}),!0)),e}function N(){R(2)}function Q(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function H(e){var t=we[e];return t||R(18,e),t}function Y(){return ce}function B(e,t){t&&(H("Patches"),e.u=[],e.s=[],e.v=t)}function W(e){J(e),e.p.forEach(Z),e.p=null}function J(e){e===ce&&(ce=e.l)}function K(e){return ce={p:[],l:ce,h:e,m:!0,_:0}}function Z(e){var t=e[me];0===t.i||1===t.i?t.j():t.g=!0}function X(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||H("ES5").S(t,e,n),n?(r[me].P&&(W(t),R(4)),F(e)&&(e=G(t,e),t.l||te(t,e)),t.u&&H("Patches").M(r[me],e,t.u,t.s)):e=G(t,r,[]),W(t),t.u&&t.v(t.u,t.s),e!==ge?e:void 0}function G(e,t,r){if(Q(t))return t;var n=t[me];if(!n)return T(t,(function(a,i){return ee(e,n,t,a,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return te(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=z(n.k):n.o;T(3===n.i?new Set(a):a,(function(t,i){return ee(e,n,a,t,i,r)})),te(e,a,!1),r&&e.u&&H("Patches").R(n,r,e.u,e.s)}return n.o}function ee(e,t,r,n,a,i){if(k(a)){var o=G(e,a,i&&t&&3!==t.i&&!$(t.D,n)?i.concat(n):void 0);if(V(r,n,o),!k(o))return;e.m=!1}if(F(a)&&!Q(a)){if(!e.h.N&&e._<1)return;G(e,a),t&&t.A.l||te(e,a)}}function te(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&U(t,r)}function re(e,t){var r=e[me];return(r?L(r):e)[t]}function ne(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function ae(e){e.P||(e.P=!0,e.l&&ae(e.l))}function ie(e){e.o||(e.o=z(e.t))}function oe(e,t,r){var n=M(t)?H("MapSet").T(t,r):D(t)?H("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:Y(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,i=Se;r&&(a=[n],i=Ce);var o=Proxy.revocable(a,i),s=o.revoke,l=o.proxy;return n.k=l,n.j=s,l}(t,r):H("ES5").J(t,r);return(r?r.A:Y()).p.push(n),n}function se(e){return k(e)||R(22,e),function e(t){if(!F(t))return t;var r,n=t[me],a=P(t);if(n){if(!n.P&&(n.i<4||!H("ES5").K(n)))return n.t;n.I=!0,r=le(t,a),n.I=!1}else r=le(t,a);return T(r,(function(t,a){n&&function(e,t){return 2===P(e)?e.get(t):e[t]}(n.t,t)===a||V(r,t,e(a))})),3===a?new Set(r):r}(e)}function le(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return z(e)}var ue,ce,de="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),fe="undefined"!=typeof Map,pe="undefined"!=typeof Set,he="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ge=de?Symbol.for("immer-nothing"):((ue={})["immer-nothing"]=!0,ue),ye=de?Symbol.for("immer-draftable"):"__$immer_draftable",me=de?Symbol.for("immer-state"):"__$immer_state",ve=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames),be=Object.getOwnPropertyDescriptors||function(e){var t={};return ve(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},we={},Se={get:function(e,t){if(t===me)return e;var r=L(e);if(!$(r,t))return function(e,t,r){var n,a=ne(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!F(n)?n:n===re(e.t,t)?(ie(e),e.o[t]=oe(e.A.h,n,e)):n},has:function(e,t){return t in L(e)},ownKeys:function(e){return Reflect.ownKeys(L(e))},set:function(e,t,r){var n=ne(L(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=re(L(e),t),i=null==a?void 0:a[me];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(_(r,a)&&(void 0!==r||$(e.t,t)))return!0;ie(e),ae(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==re(e.t,t)||t in e.t?(e.D[t]=!1,ie(e),ae(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=L(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){R(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){R(12)}},Ce={};T(Se,(function(e,t){Ce[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ce.deleteProperty=function(e,t){return Se.deleteProperty.call(this,e[0],t)},Ce.set=function(e,t,r){return Se.set.call(this,e[0],t,r,e[0])};var Oe=function(){function e(e){this.O=he,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var n=t;t=e;var a=this;return function(e){var r=this;void 0===e&&(e=n);for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var n;return(n=t).call.apply(n,[r,e].concat(o))}))}}var i;if("function"!=typeof t&&R(6),void 0!==r&&"function"!=typeof r&&R(7),F(e)){var o=K(this),s=oe(this,e,void 0),l=!0;try{i=t(s),l=!1}finally{l?W(o):J(o)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return B(o,r),X(e,o)}),(function(e){throw W(o),e})):(B(o,r),X(i,o))}if(!e||"object"!=typeof e)return(i=t(e))===ge?void 0:(void 0===i&&(i=e),this.N&&U(i,!0),i);R(21,e)},t.produceWithPatches=function(e,t){var r,n,a=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return a.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},t.createDraft=function(e){F(e)||R(8),k(e)&&(e=se(e));var t=K(this),r=oe(this,e,void 0);return r[me].C=!0,J(t),r},t.finishDraft=function(e,t){var r=(e&&e[me]).A;return B(r,t),X(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!he&&R(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var a=H("Patches").$;return k(e)?a(e,t):this.produce(e,(function(e){return a(e,t.slice(r+1))}))},e}(),qe=new Oe,xe=qe.produce,Ie=(qe.produceWithPatches.bind(qe),qe.setAutoFreeze.bind(qe),qe.setUseProxies.bind(qe),qe.applyPatches.bind(qe),qe.createDraft.bind(qe),qe.finishDraft.bind(qe),xe);var Ee=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:e),je=Ee,Ae=function(){return Math.random().toString(36).substring(7).split("").join(".")},Re={INIT:"@@redux/INIT"+Ae(),REPLACE:"@@redux/REPLACE"+Ae(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ae()}};function ke(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Fe(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&"undefined"==typeof r&&(r=t,t=void 0),"undefined"!=typeof r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(Fe)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var a=e,i=t,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function d(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return u(),s.push(e),function(){if(t){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,u();var r=s.indexOf(e);s.splice(r,1),o=null}}}function f(e){if(!ke(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"==typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,i=a(i,e)}finally{l=!1}for(var t=o=s,r=0;r<t.length;r++){(0,t[r])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");a=e,f({type:Re.REPLACE})}function h(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(c())}return r(),{unsubscribe:t(r)}}})[je]=function(){return this},e}return f({type:Re.INIT}),(n={dispatch:f,subscribe:d,getState:c,replaceReducer:p})[je]=h,n}function Te(e,t){var r=t&&t.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Pe(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}var i,o=Object.keys(r);try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if("undefined"==typeof r(void 0,{type:Re.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"==typeof r(void 0,{type:Re.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Re.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(s){i=s}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,a={},s=0;s<o.length;s++){var l=o[s],u=r[l],c=e[l],d=u(c,t);if("undefined"==typeof d){var f=Te(l,t);throw new Error(f)}a[l]=d,n=n||d!==c}return(n=n||o.length!==Object.keys(e).length)?a:e}}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e,t){var r=Object.keys(e);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(e)),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(r,!0).forEach((function(t){$e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Me(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function De(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=t.map((function(e){return e(a)}));return _e({},r,{dispatch:n=Me.apply(void 0,i)(r.dispatch)})}}}function Le(e,t){return e===t}function ze(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var n=t.length,a=0;a<n;a++)if(!e(t[a],r[a]))return!1;return!0}function Ue(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le,r=null,n=null;return function(){return ze(t,r,arguments)||(n=e.apply(null,arguments)),r=arguments,n}}));function Ne(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var Qe=Ne();Qe.withExtraArgument=Ne;var He=Qe;function Ye(){return Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ye.apply(this,arguments)}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}}function Ke(e,t,r){return(Ke=Je()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&We(a,r.prototype),a}).apply(null,arguments)}function Ze(e){var t="function"==typeof Map?new Map:void 0;return Ze=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ke(e,arguments,Be(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),We(r,e)},Ze(e)}var Xe="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Me:Me.apply(null,arguments)};var Ge=function(e){function t(){return e.apply(this,arguments)||this}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var r=t.prototype;return r.concat=function(){for(var r,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Ke(t,(r=e.prototype.concat).call.apply(r,[this].concat(a)))},r.prepend=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?Ke(t,r[0].concat(this)):Ke(t,r.concat(this))},t}(Ze(Array));function et(){return function(e){return function(e){void 0===e&&(e={});var t=e,r=t.thunk,n=void 0===r||r,a=(t.immutableCheck,t.serializableCheck,new Ge);n&&(function(e){return"boolean"==typeof e}(n)?a.push(He):a.push(He.withExtraArgument(n.extraArgument)));return a}(e)}}function tt(e){var t,r=et(),n=e||{},a=n.reducer,i=void 0===a?void 0:a,o=n.middleware,s=void 0===o?r():o,l=n.devTools,u=void 0===l||l,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)t=i;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Pe(i)}var h=De.apply(void 0,"function"==typeof s?s(r):s),g=Me;u&&(g=Xe(Ye({trace:!1},"object"==typeof u&&u)));var y=[h];return Array.isArray(p)?y=[h].concat(p):"function"==typeof p&&(y=p(y)),Fe(t,d,g.apply(void 0,y))}function rt(e,t){function r(){if(t){var r=t.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return Ye({type:e,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function nt(e,t,r,n){void 0===r&&(r=[]);var a="function"==typeof t?function(e){var t,r={},n=[],a={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=t,a},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[r,n,t]}(t):[t,r,n],i=a[0],o=a[1],s=a[2];return function(t,r){void 0===t&&(t=e);var n=[i[r.type]].concat(o.filter((function(e){return(0,e.matcher)(r)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,t){if(t){if(k(e)){var n=t(e,r);return"undefined"==typeof n?e:n}if(F(e))return Ie(e,(function(e){return t(e,r)}));var a=t(e,r);if("undefined"==typeof a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),t)}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var at=["name","message","stack","code"],it=function(e){this.payload=e,this.name="RejectWithValue",this.message="Rejected"},ot=function(e){if("object"==typeof e&&null!==e){var t={},r=at,n=Array.isArray(r),a=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(a>=r.length)break;i=r[a++]}else{if((a=r.next()).done)break;i=a.value}var o=i;"string"==typeof e[o]&&(t[o]=e[o])}return t}return{message:String(e)}};function st(e,t,r){var n=rt(e+"/fulfilled",(function(e,t,r){return{payload:e,meta:{arg:r,requestId:t,requestStatus:"fulfilled"}}})),a=rt(e+"/pending",(function(e,t){return{payload:void 0,meta:{arg:t,requestId:e,requestStatus:"pending"}}})),i=rt(e+"/rejected",(function(e,t,n){var a=e instanceof it,i=!!e&&"AbortError"===e.name,o=!!e&&"ConditionError"===e.name;return{payload:e instanceof it?e.payload:void 0,error:(r&&r.serializeError||ot)(e||"Rejected"),meta:{arg:n,requestId:t,rejectedWithValue:a,requestStatus:"rejected",aborted:i,condition:o}}})),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign((function(e){return function(s,l,u){var c,d=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t}(),f=new o,p=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),h=!1;var g=function(){try{var o,c=function(e){return g?e:(r&&!r.dispatchConditionRejection&&i.match(o)&&o.meta.condition||s(o),o)},g=!1,y=function(e,t){try{var r=e()}catch(n){return t(n)}return r&&r.then?r.then(void 0,t):r}((function(){if(r&&r.condition&&!1===r.condition(e,{getState:l,extra:u}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return h=!0,s(a(d,e)),Promise.resolve(Promise.race([p,Promise.resolve(t(e,{dispatch:s,getState:l,extra:u,requestId:d,signal:f.signal,rejectWithValue:function(e){return new it(e)}})).then((function(t){return t instanceof it?i(t,d,e):n(t,d,e)}))])).then((function(e){o=e}))}),(function(t){o=i(t,d,e)}));return Promise.resolve(y&&y.then?y.then(c):c(y))}catch(m){return Promise.reject(m)}}();return Object.assign(g,{abort:function(e){h&&(c=e,f.abort())},requestId:d,arg:e})}}),{pending:a,rejected:i,fulfilled:n,typePrefix:e})}!function(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[me];return Se.get(t,e)},set:function(t){var r=this[me];Se.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][me];if(!a.P)switch(a.i){case 5:n(a)&&ae(a);break;case 4:r(a)&&ae(a)}}}function r(e){for(var t=e.t,r=e.k,n=ve(r),a=n.length-1;a>=0;a--){var i=n[a];if(i!==me){var o=t[i];if(void 0===o&&!$(t,i))return!0;var s=r[i],l=s&&s[me];if(l?l.t!==o:!_(s,o))return!0}}var u=!!t[me];return n.length!==ve(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var a={};!function(e,t){we[e]||(we[e]=t)}("ES5",{J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var i=be(r);delete i[me];for(var o=ve(i),s=0;s<o.length;s++){var l=o[s];i[l]=e(l,t||!!i[l].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:Y(),P:!1,I:!1,D:{},l:r,t:t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,me,{value:i,writable:!0}),a},S:function(e,r,a){a?k(r)&&r[me].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[me];if(r){var a=r.t,i=r.k,o=r.D,s=r.i;if(4===s)T(i,(function(t){t!==me&&(void 0!==a[t]||$(a,t)?o[t]||e(i[t]):(o[t]=!0,ae(r)))})),T(a,(function(e){void 0!==i[e]||$(i,e)||(o[e]=!1,ae(r))}));else if(5===s){if(n(r)&&(ae(r),o.length=!0),i.length<a.length)for(var l=i.length;l<a.length;l++)o[l]=!1;else for(var u=a.length;u<i.length;u++)o[u]=!0;for(var c=Math.min(i.length,a.length),d=0;d<c;d++)void 0===o[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}();var lt=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ut=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let a in this.definition){let e=this.definition[a].validate(r[a]);e&&n.push(`${a}: ${e}`)}if(n.length)throw function(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join("\n\t")}\n  \n  ${t}\n  `;return new lt(r)}(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},ct=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&ft(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function dt(e){return void 0===e}function ft(e){return dt(e)||function(e){return null===e}(e)}var pt=class{constructor(e={}){this.config=e,this.value=new ct(e)}validate(e){return this.value.validate(e)||(function(e){return dt(e)||ht(e)}(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function ht(e){return"number"==typeof e&&!isNaN(e)}var gt=class{constructor(e={}){this.value=new ct(e)}validate(e){return this.value.validate(e)||(function(e){return dt(e)||yt(e)}(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function yt(e){return"boolean"==typeof e}var mt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,vt=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new ct(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(dt(e)?null:bt(e)?t||e.length?r&&!mt.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function bt(e){return"[object String]"===Object.prototype.toString.call(e)}var wt=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(dt(e))return this.config.options.required?"value is required and is currently undefined":null;if(!St(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&ft(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);null!==i&&(t+=" "+i)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function St(e){return void 0!==e&&"object"==typeof e}var Ct=class{constructor(e={}){this.config=e,this.value=new ct(this.config)}validate(e){if(!ft(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(ft(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach((r=>{this.config.each.required&&ft(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)})),""===t?null:t}return null}validatePrimitiveValue(e,t){return yt(e)||bt(e)||ht(e)||St(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Ot(e){return Array.isArray(e)}var qt=class{constructor(e){this.config=e,this.value=new ct(e)}validate(e){let t=this.value.validate(e);return null!==t?t:dt(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},xt=new vt({required:!0,emptyAllowed:!1}),It=new vt({required:!1,emptyAllowed:!1}),Et=new vt({required:!0,emptyAllowed:!0}),jt=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),At=(e,t)=>{if("required"in t)return{payload:new ut({value:t}).validate({value:e}).value};let r=new wt({options:{required:!0},values:t}).validate(e);if(r)throw new lt(r);return{payload:e}},Rt=(e,t)=>{try{return At(e,t)}catch(Qa){return{payload:e,error:jt(Qa)}}},kt=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(Na){throw e.logger.error(Na,a),Na}},Ft=()=>It,Tt=()=>xt,Pt=rt("configuration/updateBasicConfiguration",(e=>Rt(e,{accessToken:It,organizationId:It,platformUrl:It}))),$t=rt("configuration/updateSearchConfiguration",(e=>Rt(e,{apiBaseUrl:It,pipeline:It,searchHub:It,timezone:It,locale:It}))),Vt=rt("configuration/updateAnalyticsConfiguration",(e=>Rt(e,{enabled:new gt({default:!0}),originLevel2:Ft(),originLevel3:Ft(),apiBaseUrl:It,runtimeEnvironment:new ct,anonymous:new gt({default:!1})}))),_t=rt("configuration/analytics/disable"),Mt=rt("configuration/analytics/enable"),Dt=rt("configuration/analytics/originlevel2",(e=>Rt(e,{originLevel2:Tt()}))),Lt=rt("configuration/analytics/originlevel3",(e=>Rt(e,{originLevel3:Tt()})));var zt=e=>()=>t=>r=>{if(!r.error)return t(r);let n=r.error;return e.error(n.stack||n.message||n.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name?t(r):void 0},Ut=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));var Nt=rt("history/undo"),Qt=rt("history/redo"),Ht=rt("history/snapshot"),Yt=(st("history/back",(async(e,{dispatch:t})=>{t(Nt()),await t(Yt())})),st("history/forward",(async(e,{dispatch:t})=>{t(Qt()),await t(Yt())})),st("history/change",(async(e,{getState:t})=>t().history.present))),Bt=rt("advancedSearchQueries/update",(e=>Rt(e,{aq:new vt({required:!1,emptyAllowed:!0}),cq:new vt({required:!1,emptyAllowed:!0}),lq:new vt({required:!1,emptyAllowed:!0})}))),Wt=rt("advancedSearchQueries/register",(e=>Rt(e,{aq:new vt({required:!1,emptyAllowed:!0}),cq:new vt({required:!1,emptyAllowed:!0}),lq:new vt({required:!1,emptyAllowed:!0})}))),Jt={q:new vt,enableQuerySyntax:new gt,aq:new vt,cq:new vt,firstResult:new pt({min:0}),numberOfResults:new pt({min:0}),sortCriteria:new vt,f:new wt,cf:new wt,nf:new wt,df:new wt,debug:new gt,sf:new wt,tab:new vt},Kt=rt("searchParameters/restore",(e=>Rt(e,Jt))),Zt=nt({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:""}},(e=>{e.addCase(Bt,((e,t)=>{let{aq:r,cq:n,lq:a}=t.payload;dt(r)||(e.aq=r,e.aqWasSet=!0),dt(n)||(e.cq=n,e.cqWasSet=!0),dt(a)||(e.lq=a,e.lqWasSet=!0)})).addCase(Wt,((e,t)=>{let{aq:r,cq:n,lq:a}=t.payload;dt(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),dt(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),dt(a)||(e.defaultFilters.lq=a,e.lqWasSet||(e.lq=a))})).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e})).addCase(Kt,((e,t)=>{let{aq:r,cq:n}=t.payload;dt(r)||(e.aq=r,e.aqWasSet=!0),dt(n)||(e.cq=n,e.cqWasSet=!0)}))})),Xt=rt("tab/register",(e=>{let t=new wt({values:{id:xt,expression:Et}});return Rt(e,t)})),Gt=rt("tab/updateActiveTab",(e=>Rt(e,xt))),er=c(d()),tr=c(w()),rr=new Error("Failed to load reducers."),nr=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},ar=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}};function ir(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}function or(e){return 429===e}var sr=class{static async call(e){let t=function(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s="POST"===e.method||"PUT"===e.method,l=function(e,t){return"application/x-www-form-urlencoded"===t?function(e){return!("object"!=typeof e||!e)&&Object.values(e).every(ir)}(e)?function(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}(e):"":JSON.stringify(e)}(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:`Bearer ${i}`,...e.headers},...s&&{body:l},signal:o}}(e),{preprocessRequest:r,logger:n}=e,a={...t,...r?await r(t,"searchApiFetch"):{}};n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let e=await(0,er.default)(i,o);if(or(e.status))throw e;return e};try{let e=await(0,tr.backOff)(s,{retry:e=>{let t=e&&or(e.status);return t&&n.info("Platform retrying request"),t}});if(419===e.status)throw n.info("Platform renewing token"),new nr;if(404===e.status)throw new ar(i,e.status);return n.info({response:e,requestInfo:a},"Platform response"),e}catch(l){return"Failed to fetch"===l.message?new ar(i):l}}};function lr(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function ur(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:lr("platform",e)}var cr=c(S()),dr=c(C()),fr=c(O());cr.default.extend(dr.default),cr.default.extend(fr.default);var pr="/rest/search/v2",hr="/rest/ua";var gr=nt((()=>{return{organizationId:"",accessToken:"",platformUrl:ur(),search:{apiBaseUrl:`${ur()}${pr}`,locale:"en-US",timezone:cr.default.tz.guess()},analytics:{enabled:!0,apiBaseUrl:`${lr("analytics",e)}${hr}`,originLevel2:"default",originLevel3:"default",anonymous:!1}};var e})(),(e=>e.addCase(Pt,((e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${pr}`,e.analytics.apiBaseUrl=function(e,t){if(/^https:\/\/platform(dev|qa|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+hr;let r=e.match(new RegExp(`^https://(${t}\\.org)\\.coveo.com`));return r?e.replace(r[1],"analytics.cloud")+hr:e}(t.payload.platformUrl,e.organizationId))})).addCase($t,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone)})).addCase(Vt,((e,t)=>{ft(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),ft(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),ft(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),ft(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),ft(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),ft(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous)})).addCase(_t,(e=>{e.analytics.enabled=!1})).addCase(Mt,(e=>{e.analytics.enabled=!0})).addCase(Dt,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(Lt,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(Gt,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(Kt,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2})))),yr=new Ct({each:xt,required:!0}),mr=(e,t)=>(Rt(e,xt),bt(t)?Rt(t,xt):Rt(t,yr),{payload:{contextKey:e,contextValue:t}}),vr=rt("context/set",(e=>{for(let[t,r]of Object.entries(e))mr(t,r);return{payload:e}})),br=rt("context/add",(e=>mr(e.contextKey,e.contextValue))),wr=rt("context/remove",(e=>Rt(e,xt)));var Sr=nt({contextValues:{}},(e=>{e.addCase(vr,((e,t)=>{e.contextValues=t.payload})).addCase(br,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(wr,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Yt.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.context.contextValues)}))})),Cr=rt("debug/enable"),Or=rt("debug/disable"),qr=nt(!1,(e=>{e.addCase(Cr,(()=>!0)).addCase(Or,(()=>!1)).addCase(Kt,((e,t)=>{var r;return null!=(r=t.payload.debug)?r:e}))})),xr="1.42.0",Ir=nt(xr,(e=>e)),Er=rt("didYouMean/enable"),jr=rt("didYouMean/disable"),Ar=rt("didYouMean/correction",(e=>Rt(e,xt)));function Rr(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function kr(e){if(e instanceof ar)return{error:Rr(e)};throw e}var Fr=(e,t,r,n)=>({accessToken:e.accessToken,method:t,contentType:r,url:`${e.url}${n}?${Tr(e)}`}),Tr=e=>`organizationId=${e.organizationId}`;var Pr=TextDecoder;var $r=e=>{let{response:t}=e;return t.body?Vr(e):_r(t)},Vr=e=>function(e){return void 0!==e.body.exception}(e)?Mr(e):function(e){return void 0!==e.body.statusCode}(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},_r=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}},Mr=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),Dr=e=>void 0!==e.error;function Lr(e){return void 0!==e.results}function zr(e){let{url:t,accessToken:r,organizationId:n,...a}=e;return a}var Ur,Nr;function Qr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}function Hr(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(t){i(t)}}function s(e){try{l(n.throw(e))}catch(t){i(t)}}function l(e){e.done?a(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,s)}l((n=n.apply(e,t||[])).next())}))}function Yr(){return"undefined"!=typeof navigator}function Br(){return"undefined"!=typeof document}function Wr(){try{return"undefined"!=typeof localStorage}catch{return!1}}function Jr(){return Yr()&&navigator.cookieEnabled}function Kr(){return"undefined"!=typeof crypto&&"undefined"!=typeof crypto.getRandomValues}(Nr=Ur||(Ur={})).search="search",Nr.click="click",Nr.custom="custom",Nr.view="view",Nr.collect="collect";var Zr=[Ur.click,Ur.custom,Ur.search,Ur.view],Xr=(e,t)=>-1!==Zr.indexOf(e)?Object.assign({language:Br()?document.documentElement.lang:"unknown",userAgent:Yr()?navigator.userAgent:"unknown"},t):t,Gr=class{static set(e,t,r){var n,a,i,o;r?((a=new Date).setTime(a.getTime()+r),i="; expires="+a.toGMTString()):i="",-1===(o=location.hostname).indexOf(".")?document.cookie=e+"="+t+i+"; path=/":((n=o.split(".")).shift(),en({name:e,value:t,expires:i,domain:"."+n.join(".")}),(null==Gr.get(e)||Gr.get(e)!=t)&&en({name:e,value:t,expires:i,domain:"."+o}))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(0==(a=a.replace(/^\s+/,"")).indexOf(t))return a.substring(t.length,a.length)}return null}static erase(e){Gr.set(e,"",-1)}};function en(e){let{name:t,value:r,expires:n,domain:a}=e;document.cookie=`${t}=${r}${n}; path=/; domain=${a}; SameSite=Lax`}function tn(){return Wr()?localStorage:Jr()?new rn:function(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}()?sessionStorage:new nn}var rn=class{getItem(e){return Gr.get(`${rn.prefix}${e}`)}removeItem(e){Gr.erase(`${rn.prefix}${e}`)}setItem(e,t){Gr.set(`${rn.prefix}${e}`,t)}};rn.prefix="coveo_";var nn=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},an="__coveo.analytics.history",on=class{constructor(e){this.store=e||tn()}addElement(e){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Hr(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),this.cropQueryElement(e);let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripInternalTime(e)}getHistoryAsync(){return Hr(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripInternalTime(e)}))}getHistoryWithInternalTime(){try{let e=this.store.getItem(an);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Hr(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem(an);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem(an,JSON.stringify(e.slice(0,20)))}catch{}}clear(){try{this.store.removeItem(an)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return null!=e?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){e.name&&"query"==e.name.toLowerCase()&&null!=e.value&&(e.value=e.value.slice(0,75))}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}}))}},sn=Object.freeze({__proto__:null,STORE_KEY:an,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,MAX_VALUE_SIZE:75,HistoryStore:on,default:on}),ln=(e,t)=>Hr(void 0,void 0,void 0,(function*(){return e===Ur.view?(yield un(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),un=e=>Hr(void 0,void 0,void 0,(function*(){let t=new on,r={name:"PageView",value:e,time:JSON.stringify(new Date)};yield t.addElementAsync(r)})),cn=e=>e?(Number(e)^dn(new Uint8Array(1))[0]%16>>Number(e)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,cn),dn=e=>{if(Kr())return crypto.getRandomValues(e);for(var t=0,r=0;t<e.length;t++)0==(3&t)&&(r=4294967296*Math.random()),e[t]=r>>>((3&t)<<3)&255;return e},fn=Object.keys,pn={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},hn=fn(pn).map((e=>pn[e])),gn=[...hn].join("|"),yn=new RegExp(`^(${gn}$)`),mn=[e=>yn.test(e)],vn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},bn={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},wn={action:"pa",list:"pal",listSource:"pls"},Sn={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Cn={id:"quoteId",affiliation:"quoteAffiliation"},On={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},qn={add:wn,bookmark_add:wn,bookmark_remove:wn,click:wn,checkout:wn,checkout_option:wn,detail:wn,impression:wn,remove:wn,refund:Object.assign(Object.assign({},wn),Sn),purchase:Object.assign(Object.assign({},wn),Sn),quickview:wn,quote:Object.assign(Object.assign({},wn),Cn),review:Object.assign(Object.assign({},wn),On)},xn=fn(vn).map((e=>vn[e])),In=fn(bn).map((e=>bn[e])),En=fn(wn).map((e=>wn[e])),jn=fn(Sn).map((e=>Sn[e])),An=fn(On).map((e=>On[e])),Rn=fn(Cn).map((e=>Cn[e])),kn=[...xn,"custom"].join("|"),Fn=[...In,"custom"].join("|"),Tn="(pr[0-9]+)",Pn="(il[0-9]+pi[0-9]+)",$n=new RegExp(`^${Tn}(${kn})$`),Vn=new RegExp(`^(${Pn}(${Fn}))|(il[0-9]+nm)$`),_n=new RegExp(`^(${En.join("|")})$`),Mn=new RegExp(`^(${jn.join("|")})$`),Dn=new RegExp(`^${Tn}custom$`),Ln=new RegExp(`^${Pn}custom$`),zn=new RegExp(`^(${["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...An,...Rn].join("|")})$`),Un=[e=>Vn.test(e),e=>$n.test(e),e=>_n.test(e),e=>Mn.test(e),e=>zn.test(e)],Nn=[Dn,Ln],Qn=Object.assign(Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale"].reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),Hn=Object.assign(Object.assign({},Qn),{svcAction:"svc_action",svcActionData:"svc_action_data"}),Yn=fn(Hn).map((e=>Hn[e])),Bn=e=>-1!==Yn.indexOf(e),Wn=e=>"custom"===e,Jn=e=>{let t;return[...Nn].every((r=>{var n;return t=null===(n=r.exec(e))||void 0===n?void 0:n[1],!Boolean(t)})),t},Kn=(e,t)=>fn(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),Zn=window.fetch,Xn=class{constructor(e){this.opts=e}sendEvent(e,t){return Hr(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:`${r}/analytics/${e}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:l}=s,u=Qr(s,["url"]),c=yield Zn(l,u);if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,c,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}))}shouldAppendVisitorId(e){return-1!==[Ur.click,Ur.custom,Ur.search,Ur.view].indexOf(e)}getVisitorIdParam(){return Hr(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}};var Gn,ea="https://analytics.cloud.coveo.com/rest/ua",ta=class{constructor(e){if(!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[ln,Xr].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),Yr()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>!!e))&&(this.clear(),this.runtime.storage=new nn)}get defaultOptions(){return{endpoint:ea,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}initRuntime(e){return"undefined"!=typeof window&&Br()?new class{constructor(e,t){Wr()&&Jr()?this.storage=new class{constructor(){this.cookieStorage=new rn}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t)}}:Wr()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new nn),this.client=new Xn(e),this.beaconClient=new class{constructor(e){this.opts=e}sendEvent(e,t){return Hr(this,void 0,void 0,(function*(){if(!navigator.sendBeacon)throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=this.encodeForEventType(e,t),i=yield this.getQueryParamsForEventType(e),o={url:`${r}/analytics/${e}?${i}`,body:new Blob([a],{type:"application/x-www-form-urlencoded"})},{url:s,body:l}=Object.assign(Object.assign({},o),n?yield n(o,"analyticsBeacon"):{});console.log(`Sending beacon for "${e}" with: `,JSON.stringify(t)),navigator.sendBeacon(s,l)}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return Hr(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return-1!==[Ur.click,Ur.custom,Ur.search,Ur.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter((t=>!!e[t])).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`)).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}}(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}}(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please install @react-native-async-storage/async-storage and instantiate \n        your analytics client as follows:\n        \n        import {ReactNativeRuntime} from 'coveo.analytics/react-native';\n        \n        const analytics = new CoveoAnalytics({\n            ...your options,\n            runtimeEnvironment: new ReactNativeRuntime();\n        })\n    "),new class{constructor(e,t){this.storage=t||new nn,this.client=new Xn(e)}}(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Hr(this,void 0,void 0,(function*(){try{return(yield this.storage.getItem("visitorId"))||cn()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),cn()}}))}getCurrentVisitorId(){return Hr(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Hr(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}getParameters(e,...t){return Hr(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Hr(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(cn()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}resolveParameters(e,...t){return Hr(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Hr(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>a?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Hr(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Hr(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Hr(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[t=>this.removeEmptyPayloadValues(t,e),e=>this.validateParams(e),e=>r?(e=>{let t=!!e.action&&qn[e.action]||{};return fn(e).reduce(((r,n)=>{let a=t[n]||Hn[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})}),{})})(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):e].reduce(((e,t)=>Hr(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}sendEvent(e,...t){return Hr(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return this.bufferedRequests.push({eventType:r,payload:a}),yield Promise.all(this.afterSendHooks.map((t=>t(e,n)))),yield this.deferExecution(),yield this.sendFromBufferWithFetch()}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBufferWithFetch(){return Hr(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.client.sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new on).clear()}sendSearchEvent(e){return Hr(this,void 0,void 0,(function*(){return this.sendEvent(Ur.search,e)}))}sendClickEvent(e){return Hr(this,void 0,void 0,(function*(){return this.sendEvent(Ur.click,e)}))}sendCustomEvent(e){return Hr(this,void 0,void 0,(function*(){return this.sendEvent(Ur.custom,e)}))}sendViewEvent(e){return Hr(this,void 0,void 0,(function*(){return this.sendEvent(Ur.view,e)}))}getVisit(){return Hr(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Hr(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let a=t[n];if("string"==typeof a)r[e[n]]=a;else if("object"==typeof a)return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return-1!==({[Ur.search]:["queryText"]}[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){return Object.keys(e).filter((r=>this.isKeyAllowedEmpty(t,r)||(e=>"undefined"!=typeof e&&null!==e&&""!==e)(e[r]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if((e=>[...Un,...mn,Bn,Wn].some((t=>t(e))))(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Qr(e,["custom"]),n=this.lowercaseKeys(t),a=(e=>fn(e).reduce(((t,r)=>{let n=Jn(r);return n?Object.assign(Object.assign({},t),Kn(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}))(r);return Object.assign(Object.assign({},n),a)}lowercaseKeys(e){return Object.keys(e||{}).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r.toLowerCase()]:e[r]})),{})}validateParams(e){let{anonymizeIp:t}=e,r=Qr(e,["anonymizeIp"]);return void 0!==t&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${t}`.toLowerCase())&&(r.anonymizeIp=1),r}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Qr(e,["userId"]);return(e=>(null==e?void 0:e.startsWith("xx"))||!1)(this.options.token)&&!t?(r.userId="anonymous",r):e}get baseUrl(){let{version:e,endpoint:t}=this.options,r=-1!==t.indexOf(".cloud.coveo.com");return`${t}${r?"":"/rest"}/${e}`}};!function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack"}(Gn||(Gn={}));var ra,na={[Gn.triggerNotify]:"queryPipelineTriggers",[Gn.triggerExecute]:"queryPipelineTriggers",[Gn.triggerQuery]:"queryPipelineTriggers",[Gn.triggerRedirect]:"queryPipelineTriggers",[Gn.queryError]:"errors",[Gn.queryErrorBack]:"errors",[Gn.queryErrorClear]:"errors",[Gn.queryErrorRetry]:"errors",[Gn.pagerNext]:"getMoreResults",[Gn.pagerPrevious]:"getMoreResults",[Gn.pagerNumber]:"getMoreResults",[Gn.pagerResize]:"getMoreResults",[Gn.pagerScrolling]:"getMoreResults",[Gn.facetSearch]:"facet",[Gn.facetShowLess]:"facet",[Gn.facetShowMore]:"facet",[Gn.recommendation]:"recommendation",[Gn.likeSmartSnippet]:"smartSnippet",[Gn.dislikeSmartSnippet]:"smartSnippet",[Gn.expandSmartSnippet]:"smartSnippet",[Gn.collapseSmartSnippet]:"smartSnippet",[Gn.openSmartSnippetFeedbackModal]:"smartSnippet",[Gn.closeSmartSnippetFeedbackModal]:"smartSnippet",[Gn.sendSmartSnippetReason]:"smartSnippet",[Gn.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Gn.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Gn.clearRecentQueries]:"recentQueries",[Gn.recentResultClick]:"recentlyClickedDocuments",[Gn.clearRecentResults]:"recentlyClickedDocuments"};!function(e){e.DoesNotAnswer="does_not_answer",e.PartiallyAnswers="partially_answers",e.WasNotAQuestion="was_not_a_question",e.Other="other"}(ra||(ra={}));var aa=class{constructor(){this.runtime=new class{constructor(){this.storage=new nn,this.client=new class{sendEvent(e,t){return Hr(this,void 0,void 0,(function*(){return Promise.resolve()}))}}}},this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}sendEvent(){return Promise.resolve()}sendSearchEvent(){return Promise.resolve()}sendClickEvent(){return Promise.resolve()}sendCustomEvent(){return Promise.resolve()}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}};function ia(e){let t=e.join(";");return t.length<=256?t:ia(e.slice(1))}var oa=e=>{let t=function(e){return e.map((e=>e.replace(/;/g,"")))}(e),r=function(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}(t);return ia(r)};function sa(e){let t="string"==typeof e.partialQueries?e.partialQueries:oa(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:oa(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var la,ua,ca,da={pageview:"pageview",event:"event"},fa=Object.assign({},da);Object.keys(fa).map((e=>fa[e]));!function(e){e.click="click",e.flowStart="flowStart"}(la||(la={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(ua||(ua={})),function(e){e.quit="Quit",e.solved="Solved"}(ca||(ca={}));var pa=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"};function ha(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find((e=>"selected"===e.state));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}var ga=(e,t)=>{let r=((e,t)=>{let r=((e,t)=>"productListing"in e&&e.productListing?e.productListing.facets.results.find((e=>e.facetId===t)):"search"in e&&e.search?e.search.response.facets.find((e=>e.facetId===t)):void 0)(e,t);if(function(e,t){return!!t&&t.facetId in e.categoryFacetSet}(e,r))return r})(e,t);return ha(null==r?void 0:r.values).parents};function ya(e){return{facetSet:e.facetSet||{},categoryFacetSet:e.categoryFacetSet||{},dateFacetSet:e.dateFacetSet||{},numericFacetSet:e.numericFacetSet||{},..."search"in e&&{search:e.search?e.search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""}},..."productListing"in e&&{productListing:e.productListing?e.productListing:{url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}}}}var ma=e=>"productListing"in e&&e.productListing?e.productListing.facets.results:"search"in e&&e.search?e.search.response.facets:[],va=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),ba=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),wa=e=>({displayValue:e.value,value:e.value}),Sa=(e,t)=>{let r=((e,t)=>ga(e,t).map((e=>e.value)).join(";"))(e,t);return{value:r,valuePosition:1,displayValue:r}},Ca=(e,t)=>({title:`${e.field}_${e.facetId}`,field:e.field,id:e.facetId,facetPosition:t}),Oa=(e,t)=>{var r;return e.facetSet[t]||(null==(r=e.categoryFacetSet[t])?void 0:r.request)||e.dateFacetSet[t]||e.numericFacetSet[t]},qa=(e,t)=>{let r=Oa(e,t);return r?r.type:"specific"},xa=class{constructor(e){this.state=e}getLanguage(){return pa(this.state)}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[n,a]of Object.entries(t)){r[`context_${n}`]=a}return r.coveoHeadlessVersion=xr,r}getSearchUID(){var e,t,r;return(null==(e=this.state.search)?void 0:e.response.searchUid)||(null==(t=this.state.recommendation)?void 0:t.searchUid)||(null==(r=this.state.productListing)?void 0:r.responseId)||""}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||"default"}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}getFacetState(){return(e=>{let t=[];return ma(e).forEach(((r,n)=>{let a=qa(e,r.facetId),i=Ca(r,n+1);if("hierarchical"!==a)r.values.forEach(((e,r)=>{if("idle"===e.state)return;let n=va(e,r+1,a),o="specific"===a?wa(e):ba(e);t.push({...i,...n,...o})}));else{if(!ga(e,r.facetId).length)return;t.push({...i,...Sa(e,r.facetId),facetType:a,state:"selected"})}})),t})(ya(this.state))}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.search)?void 0:e.response.results.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||""}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||0}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.results.length)||[].length}},Ia=({logger:e,state:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:a=new xa(t)})=>{let i=t.configuration.accessToken,o=t.configuration.analytics.apiBaseUrl,s=t.configuration.analytics.runtimeEnvironment,l=t.configuration.analytics.enabled,u=new class{constructor(e,t){this.opts=e,this.provider=t,this.coveoAnalyticsClient=!1===e.enableAnalytics?new aa:new ta(e)}disable(){this.coveoAnalyticsClient instanceof ta&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new aa}enable(){this.coveoAnalyticsClient=new ta(this.opts)}logInterfaceLoad(){return this.logSearchEvent(Gn.interfaceLoad)}logRecommendationInterfaceLoad(){return this.logSearchEvent(Gn.recommendationInterfaceLoad)}logRecommendation(){return this.logCustomEvent(Gn.recommendation)}logRecommendationOpen(e,t){return this.logClickEvent(Gn.recommendationOpen,e,t)}logStaticFilterClearAll(e){return this.logSearchEvent(Gn.staticFilterClearAll,e)}logStaticFilterSelect(e){return this.logSearchEvent(Gn.staticFilterSelect,e)}logStaticFilterDeselect(e){return this.logSearchEvent(Gn.staticFilterDeselect,e)}logFetchMoreResults(){return this.logCustomEvent(Gn.pagerScrolling,{type:"getMoreResults"})}logInterfaceChange(e){return this.logSearchEvent(Gn.interfaceChange,e)}logDidYouMeanAutomatic(){return this.logSearchEvent(Gn.didyoumeanAutomatic)}logDidYouMeanClick(){return this.logSearchEvent(Gn.didyoumeanClick)}logResultsSort(e){return this.logSearchEvent(Gn.resultsSort,e)}logSearchboxSubmit(){return this.logSearchEvent(Gn.searchboxSubmit)}logSearchboxClear(){return this.logSearchEvent(Gn.searchboxClear)}logSearchboxAsYouType(){return this.logSearchEvent(Gn.searchboxAsYouType)}logBreadcrumbFacet(e){return this.logSearchEvent(Gn.breadcrumbFacet,e)}logBreadcrumbResetAll(){return this.logSearchEvent(Gn.breadcrumbResetAll)}logDocumentQuickview(e,t){return this.logClickEvent(Gn.documentQuickview,e,t)}logDocumentOpen(e,t){return this.logClickEvent(Gn.documentOpen,e,t)}logOmniboxAnalytics(e){return this.logSearchEvent(Gn.omniboxAnalytics,sa(e))}logOmniboxFromLink(e){return this.logSearchEvent(Gn.omniboxFromLink,sa(e))}logSearchFromLink(){return this.logSearchEvent(Gn.searchFromLink)}logTriggerNotify(e){return this.logCustomEvent(Gn.triggerNotify,e)}logTriggerExecute(e){return this.logCustomEvent(Gn.triggerExecute,e)}logTriggerQuery(){let e={query:this.provider.getSearchEventRequestPayload().queryText};return this.logCustomEvent(Gn.triggerQuery,e)}logTriggerRedirect(e){let t=Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText});return this.logCustomEvent(Gn.triggerRedirect,t)}logPagerResize(e){return this.logCustomEvent(Gn.pagerResize,e)}logPagerNumber(e){return this.logCustomEvent(Gn.pagerNumber,e)}logPagerNext(e){return this.logCustomEvent(Gn.pagerNext,e)}logPagerPrevious(e){return this.logCustomEvent(Gn.pagerPrevious,e)}logPagerScrolling(){return this.logCustomEvent(Gn.pagerScrolling)}logFacetClearAll(e){return this.logSearchEvent(Gn.facetClearAll,e)}logFacetSearch(e){return this.logSearchEvent(Gn.facetSearch,e)}logFacetSelect(e){return this.logSearchEvent(Gn.facetSelect,e)}logFacetDeselect(e){return this.logSearchEvent(Gn.facetDeselect,e)}logFacetExclude(e){return this.logSearchEvent(Gn.facetExclude,e)}logFacetUnexclude(e){return this.logSearchEvent(Gn.facetUnexclude,e)}logFacetSelectAll(e){return this.logSearchEvent(Gn.facetSelectAll,e)}logFacetUpdateSort(e){return this.logSearchEvent(Gn.facetUpdateSort,e)}logFacetShowMore(e){return this.logCustomEvent(Gn.facetShowMore,e)}logFacetShowLess(e){return this.logCustomEvent(Gn.facetShowLess,e)}logQueryError(e){return this.logCustomEvent(Gn.queryError,e)}logQueryErrorBack(){return Hr(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Gn.queryErrorBack),this.logSearchEvent(Gn.queryErrorBack)}))}logQueryErrorRetry(){return Hr(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Gn.queryErrorRetry),this.logSearchEvent(Gn.queryErrorRetry)}))}logQueryErrorClear(){return Hr(this,void 0,void 0,(function*(){return yield this.logCustomEvent(Gn.queryErrorClear),this.logSearchEvent(Gn.queryErrorClear)}))}logLikeSmartSnippet(){return this.logCustomEvent(Gn.likeSmartSnippet)}logDislikeSmartSnippet(){return this.logCustomEvent(Gn.dislikeSmartSnippet)}logExpandSmartSnippet(){return this.logCustomEvent(Gn.expandSmartSnippet)}logCollapseSmartSnippet(){return this.logCustomEvent(Gn.collapseSmartSnippet)}logOpenSmartSnippetFeedbackModal(){return this.logCustomEvent(Gn.openSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return this.logCustomEvent(Gn.closeSmartSnippetFeedbackModal)}logSmartSnippetFeedbackReason(e,t){return this.logCustomEvent(Gn.sendSmartSnippetReason,{reason:e,details:t})}logExpandSmartSnippetSuggestion(e){return this.logCustomEvent(Gn.expandSmartSnippetSuggestion,{documentId:e})}logCollapseSmartSnippetSuggestion(e){return this.logCustomEvent(Gn.collapseSmartSnippetSuggestion,{documentId:e})}logRecentQueryClick(){return this.logSearchEvent(Gn.recentQueryClick)}logClearRecentQueries(){return this.logCustomEvent(Gn.clearRecentQueries)}logRecentResultClick(e,t){return this.logCustomEvent(Gn.recentResultClick,{info:e,identifier:t})}logClearRecentResults(){return this.logCustomEvent(Gn.clearRecentResults)}logNoResultsBack(){return this.logSearchEvent(Gn.noResultsBack)}logCustomEvent(e,t){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},this.getBaseCustomEventRequest(r)),{eventType:na[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)}logCustomEventWithType(e,t,r){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},this.getBaseCustomEventRequest(n)),{eventType:t,eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(a)}logSearchEvent(e,t){return this.coveoAnalyticsClient.sendSearchEvent(this.getBaseSearchEventRequest(e,t))}logClickEvent(e,t,r,n){let a=Object.assign(Object.assign(Object.assign({},t),this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)}getBaseSearchEventRequest(e,t){return Object.assign(Object.assign(Object.assign({},this.getBaseEventRequest(t)),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})}getBaseCustomEventRequest(e){return Object.assign(Object.assign({},this.getBaseEventRequest(e)),{lastSearchQueryUid:this.provider.getSearchUID()})}getBaseEventRequest(e){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous()})}getOrigins(){return{originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}}({token:i,endpoint:o,runtimeEnvironment:s,preprocessRequest:n,beforeSendHooks:[r,(t,r)=>(e.info({...r,type:t,endpoint:o,token:i},"Analytics request"),r)]},a);return l||u.disable(),u},Ea=()=>new ta({}).getCurrentVisitorId(),ja=new sn.HistoryStore;function Aa(e){let t=Ra(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return function(e,t){return Object.values(e.reduce(((e,r,n)=>({...e,[t(r,n)]:r})),{}))}([e,...t,...r],(e=>e.uniqueId))}function Ra(e){return e.childResults?e.childResults.flatMap((e=>[e,...Ra(e)])):[]}var ka,Fa=((ka=Fa||{})[ka.Search=0]="Search",ka[ka.Custom=1]="Custom",ka[ka.Click=2]="Click",ka),Ta=(e,t,r,n=(e=>new xa(e)))=>st(e,(async(e,{getState:a,extra:{analyticsClientMiddleware:i,preprocessRequest:o,logger:s}})=>{let l=(e=>e())(a),u=Ia({state:l,logger:s,analyticsClientMiddleware:i,preprocessRequest:o,provider:n(l)}),c=await r(u,l);return s.info({client:u.coveoAnalyticsClient,response:c},"Analytics response"),{analyticsType:t}})),Pa=((e=>{st("analytics/noop",(async()=>({analyticsType:e})))})(0),(e,t)=>{var r;let n=(null==(r=t.recommendation)?void 0:r.recommendations.findIndex((({uniqueId:t})=>e.uniqueId===t)))||0;return function(e,t,r){let n=e.raw.collection;return{collectionName:"string"==typeof n?n:"default",documentAuthor:Ma(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:Da(e),queryPipeline:r.pipeline||""}}(e,n,t)});var $a={urihash:new vt,sourcetype:new vt,permanentid:new vt},Va={uniqueId:xt,raw:new wt({values:$a}),title:xt,uri:xt,clickUri:xt,rankingModifier:new vt({required:!1,emptyAllowed:!0})};function _a(e){return Object.assign({},...Object.keys($a).map((t=>({[t]:e[t]}))))}function Ma(e){let t=e.raw.author;return ft(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function Da(e){let t=e.raw.source;return ft(t)?"unknown":t}var La=e=>new ut(Va).validate(function(e){return Object.assign({},...Object.keys(Va).map((t=>({[t]:e[t]}))),{raw:_a(e.raw)})}(e)),za=(Ta("analytics/didyoumean/click",Fa.Search,(e=>e.logDidYouMeanClick())),Ta("analytics/didyoumean/automatic",Fa.Search,(e=>e.logDidYouMeanAutomatic()))),Ua=rt("query/updateQuery",(e=>Rt(e,{q:new vt,enableQuerySyntax:new gt})));var Na,Qa,Ha=((Qa=Ha||{}).Ascending="ascending",Qa.Descending="descending",Qa),Ya=((Na=Ya||{}).Relevancy="relevancy",Na.QRE="qre",Na.Date="date",Na.Field="field",Na.NoSort="nosort",Na),Ba=e=>{if(Ot(e))return e.map((e=>Ba(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}};new wt({values:{by:new qt({enum:Ya,required:!0}),order:new qt({enum:Ha}),field:new vt}});function Wa(){return Ba({by:"relevancy"})}function Ja(e){var t,r;return{context:e.context||{contextValues:{}},dictionaryFieldContext:e.dictionaryFieldContext||{contextValues:{}},facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},pagination:e.pagination||{firstResult:0,numberOfResults:10,totalCountFiltered:0},query:e.query||{q:"",enableQuerySyntax:!1},tabSet:e.tabSet||{},advancedSearchQueries:e.advancedSearchQueries||{cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:""}},staticFilterSet:e.staticFilterSet||{},querySet:e.querySet||{},sortCriteria:e.sortCriteria||Wa(),pipeline:e.pipeline||"",searchHub:e.searchHub||"default",facetOptions:e.facetOptions||{freezeFacetOrder:!1},facetOrder:null!=(t=e.facetOrder)?t:[],debug:null!=(r=e.debug)&&r}}var Ka=Ta("search/logFetchMoreResults",Fa.Search,(e=>e.logFetchMoreResults())),Za=e=>Ta("search/queryError",Fa.Search,((t,r)=>{var n,a,i;return t.logQueryError({query:(null==(n=r.query)?void 0:n.q)||"",aq:(null==(a=r.advancedSearchQueries)?void 0:a.aq)||"",cq:(null==(i=r.advancedSearchQueries)?void 0:i.cq)||"",dq:"",errorType:e.type,errorMessage:e.message})}))(),Xa=c(S()),Ga=c(S()),ei=c(x());Ga.default.extend(ei.default);function ti(e){return e.format("YYYY/MM/DD@HH:mm:ss")}function ri(e){if(e.isBefore("1401-01-01"))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}var ni=c(I());Xa.default.extend(ni.default);var ai=["past","now","next"],ii=["minute","hour","day","week","month","quarter","year"];function oi(e){if("string"==typeof e&&!ci(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?di(e):e;new ut((e=>{let t="now"===e;return{amount:new pt({required:!t,min:1}),unit:new vt({required:!t,constrainTo:ii}),period:new vt({required:!0,constrainTo:ai})}})(t.period)).validate(t);let r=si(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);ri(r)}function si(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Xa.default)().subtract(r,n);case"next":return(0,Xa.default)().add(r,n);case"now":return(0,Xa.default)()}}function li(e){return ti(si(di(e)))}function ui(e){return e.toLocaleLowerCase().split("-")}function ci(e){let[t,r,n]=ui(e);if("now"===t)return!0;if(!ai.includes(t)||!ii.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function di(e){let[t,r,n]=ui(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function fi(e){return`start${e}`}function pi(e){return`end${e}`}function hi(e,t){if(function(e){return"dateRange"===e.type}(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>function(e,t,r){let n=e.start,a=e.end;return ci(n)&&(n=li(n),r.dateFacetValueMap[t][fi(n)]=e.start),ci(a)&&(a=li(a),r.dateFacetValueMap[t][pi(a)]=e.end),{...e,start:n,end:a}}(e,r,t)))}}return e}function gi(e,t){return function(e,t){return e.facetId in t.dateFacetValueMap}(e,t)?{...e,values:e.values.map((r=>function(e,t,r){return{...e,start:r.dateFacetValueMap[t][fi(e.start)]||e.start,end:r.dateFacetValueMap[t][pi(e.end)]||e.end}}(r,e.facetId,t)))}:e}var yi=new pt({required:!0,min:0}),mi=rt("pagination/registerNumberOfResults",(e=>Rt(e,yi))),vi=rt("pagination/updateNumberOfResults",(e=>Rt(e,yi))),bi=rt("pagination/registerPage",(e=>Rt(e,yi))),wi=rt("pagination/updatePage",(e=>Rt(e,yi))),Si=rt("pagination/nextPage"),Ci=rt("pagination/previousPage");function Oi(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let a=Object.values(r);return[...n,...a]}var qi=async e=>{var t,r,n;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Ea()},...(null==(t=e.advancedSearchQueries)?void 0:t.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(r=e.advancedSearchQueries)?void 0:r.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(n=e.advancedSearchQueries)?void 0:n.lq)&&{lq:e.advancedSearchQueries.lq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria}}},xi=async e=>{var t;let r=function(e){var t;let r=(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",n=Object.values(e.tabSet||{}).find((e=>e.isActive)),a=(null==n?void 0:n.expression.trim())||"",i=function(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>"selected"===e.state&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}(e);return[r,a,...i].filter((e=>!!e)).join(" AND ")}(e),n=function(e){var t;return Oi(function(e){return[...Ei(e.facetSet),...Ei(e.numericFacetSet),...Ei(e.dateFacetSet),...Ii(e.categoryFacetSet)]}(e),null!=(t=e.facetOrder)?t:[])}(e);return function(e){var t;let r={dateFacetValueMap:{}};return{request:{...e,facets:null==(t=e.facets)?void 0:t.map((e=>hi(e,r)))},mappings:r}}({...await qi(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:e.pagination.numberOfResults,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:e.facetOptions},...(null==(t=e.folding)?void 0:t.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange}})};function Ii(e){return Object.values(e||{}).map((e=>e.request))}function Ei(e={}){return Object.keys(e).map((t=>e[t]))}var ji=rt("breadcrumb/deselectAll"),Ai=rt("facet/deselectAllFacets"),Ri=rt("facet/updateFacetAutoSelection",(e=>Rt(e,{allow:new gt({required:!0})}))),ki=async(e,t,{request:r,mappings:n})=>{var a;let i=(new Date).getTime(),o=function(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map((e=>gi(e,t)))}}:e}(await e.search(r),n);return{response:o,duration:(new Date).getTime()-i,queryExecuted:(null==(a=t.query)?void 0:a.q)||"",requestExecuted:r}},Fi=(st("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Rt(e,{q:new vt,enableQuerySyntax:new gt}),r(ji()),r(Ri({allow:!0})),r(Ua(e)),r(wi(1))})),st("search/executeSearch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t();Mi(i);let o=await ki(a.apiClient,i,await xi(i));if(Dr(o.response))return r(Za(o.response.error)),n(o.response.error);if(!Vi(i,o.response.success))return r(Ht(Ja(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Di(i),analyticsAction:e};let{correctedQuery:s}=o.response.success.queryCorrections[0],l=await $i(a.apiClient,s,t,r);if(Dr(l.response))return r(Za(l.response.error)),n(l.response.error);let u=o.response.success;return e(r,(()=>Pi(o.queryExecuted,o.duration,i,u)),a),r(Ht(Ja(t()))),{...l,response:{...l.response.success,queryCorrections:o.response.success.queryCorrections},automaticallyCorrected:!0,originalQuery:Di(i),analyticsAction:za()}}))),Ti=st("search/fetchMoreResults",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:{apiClient:a}})=>{let i=t(),o=await ki(a,i,await _i(i));return Dr(o.response)?(r(Za(o.response.error)),n(o.response.error)):(r(Ht(Ja(i))),{...o,response:o.response.success,automaticallyCorrected:!1,originalQuery:Di(i),analyticsAction:Ka()})})),Pi=(e,t,r,n)=>{var a,i;return{...r,query:{q:e,enableQuerySyntax:null!=(i=null==(a=r.query)?void 0:a.enableQuerySyntax)&&i},search:{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",duration:t,response:n,results:n.results}}},$i=async(e,t,r,n)=>{n(Ua({q:t}));let a=await ki(e,r(),await xi(r()));return n(Ar(t)),a},Vi=(e,t)=>{var r;return!0===(null==(r=e.didYouMean)?void 0:r.enableDidYouMean)&&0===t.results.length&&0!==t.queryCorrections.length},_i=async e=>{var t,r,n,a;let i=await xi(e);return i.request={...i.request,firstResult:(null!=(r=null==(t=e.pagination)?void 0:t.firstResult)?r:0)+(null!=(a=null==(n=e.search)?void 0:n.results.length)?a:0)},i},Mi=e=>{var t;e.configuration.analytics.enabled&&ja.addElement({name:"Query",value:(null==(t=e.query)?void 0:t.q)||"",time:JSON.stringify(new Date)})},Di=e=>{var t;return void 0!==(null==(t=e.query)?void 0:t.q)?e.query.q:""};nt({enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:{correctedQuery:"",wordCorrections:[],originalQuery:""},originalQuery:""},(e=>{e.addCase(Er,(e=>{e.enableDidYouMean=!0})).addCase(jr,(e=>{e.enableDidYouMean=!1})).addCase(Fi.pending,(e=>{e.queryCorrection={correctedQuery:"",wordCorrections:[],originalQuery:""},e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(Fi.fulfilled,((e,t)=>{e.queryCorrection=t.payload.response.queryCorrections[0]||{correctedQuery:"",wordCorrections:[],originalQuery:""},e.originalQuery=t.payload.originalQuery,e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected})).addCase(Ar,((e,t)=>{e.wasCorrectedTo=t.payload}))}));var Li=rt("facetOptions/update",(e=>Rt(e,{freezeFacetOrder:new gt({required:!1})}))),zi=(nt({freezeFacetOrder:!1},(e=>{e.addCase(Li,((e,t)=>({...e,...t.payload}))).addCase(Fi.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(Fi.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e}))})),xt),Ui={state:new ct({required:!0}),numberOfResults:new pt({required:!0,min:0}),value:new vt({required:!0,emptyAllowed:!0}),path:new Ct({required:!0,each:xt}),moreValuesAvailable:new gt({required:!1})};function Ni(e){e.children.forEach((e=>{Ni(e)})),At({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},Ui)}var Qi={facetId:zi,field:xt,delimitingCharacter:new vt({required:!1,emptyAllowed:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new pt({required:!1,min:0}),numberOfValues:new pt({required:!1,min:1}),sortCriteria:new ct({required:!1}),basePath:new Ct({required:!1,each:xt}),filterByBasePath:new gt({required:!1})},Hi=rt("categoryFacet/register",(e=>Rt(e,Qi))),Yi=rt("categoryFacet/toggleSelectValue",(e=>{try{return At(e.facetId,xt),Ni(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:jt(t)}}})),Bi=rt("categoryFacet/deselectAll",(e=>Rt(e,zi))),Wi=rt("categoryFacet/updateNumberOfValues",(e=>Rt(e,{facetId:zi,numberOfValues:new pt({required:!0,min:1})}))),Ji=rt("categoryFacet/updateSortCriterion",(e=>Rt(e,{facetId:zi,criterion:new ct})));function Ki(e,t){let{facetId:r,criterion:n}=t,a=e[r];!a||(a.sortCriteria=n)}function Zi(e){!e||(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function Xi(e,t){!e||(e.numberOfValues=t)}var Gi={facetId:zi,captions:new wt({options:{required:!1}}),numberOfValues:new pt({required:!1,min:1}),query:new vt({required:!1,emptyAllowed:!0})},eo={path:new Ct({required:!0,each:xt}),displayValue:Et,rawValue:Et,count:new pt({required:!0,min:0})},to=rt("categoryFacet/selectSearchResult",(e=>Rt(e,{facetId:zi,value:new wt({values:eo})}))),ro=rt("categoryFacetSearch/register",(e=>Rt(e,Gi)));function no(e,t){let r=e[t];!r||(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function ao(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];let r=io(e[0],t),n=r;for(let a of e.splice(1)){let e=io(a,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function io(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}nt({},(e=>{e.addCase(Hi,((e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let a=function(e){return{...oo,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}(r),i=a.numberOfValues;e[n]={request:a,initialNumberOfValues:i}})).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e})).addCase(Kt,((e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach((t=>{let n=e[t].request,a=r[t]||[];(a.length||n.currentValues.length)&&ao(n,a,e[t].initialNumberOfValues)}))})).addCase(Ji,((e,t)=>{var r;let{facetId:n,criterion:a}=t.payload,i=null==(r=e[n])?void 0:r.request;!i||(i.sortCriteria=a)})).addCase(Yi,((e,t)=>{var r;let{facetId:n,selection:a,retrieveCount:i}=t.payload,o=null==(r=e[n])?void 0:r.request;if(!o)return;let{path:s}=a,l=function(e,t,r){let n=e.currentValues;for(let a of t){let e=n[0];(!e||a!==e.value)&&(e=so(a,r),n.length=0,n.push(e)),e.retrieveChildren=!1,e.state="idle",n=e.children}return n}(o,s.slice(0,s.length-1),i);if(l.length){let e=l[0];return e.retrieveChildren=!0,e.state="selected",void(e.children=[])}let u=so(a.value,i);u.state="selected",l.push(u),o.numberOfValues=1})).addCase(Bi,((e,t)=>{no(e,t.payload)})).addCase(Ai,(e=>{Object.keys(e).forEach((t=>no(e,t)))})).addCase(ji,(e=>{Object.keys(e).forEach((t=>no(e,t)))})).addCase(Ri,((e,t)=>Object.keys(e).forEach((r=>{e[r].request.preventAutoSelect=!t.payload.allow})))).addCase(Wi,((e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(i){if(!i.currentValues.length)return Xi(i,a);!function(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=null==(r=e[n])?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&"selected"!==(null==i?void 0:i.state);)i=i.children[0];i.retrieveCount=a}}(e,t.payload)}})).addCase(to,((e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let i=[...n.path,n.rawValue];ao(a.request,i,a.initialNumberOfValues)})).addCase(Fi.fulfilled,((e,t)=>{let{facets:r}=t.payload.response;r.forEach((t=>{var r;if(!function(e,t){return t.facetId in e}(e,t))return;let n=t.facetId,a=null==(r=e[n])?void 0:r.request;if(!a)return;let i=function(e,t){let r=ha(e.currentValues).parents,n=ha(t.values).parents;return r.length!==n.length}(a,t);a.currentValues=i?[]:a.currentValues,a.preventAutoSelect=!1}))}))}));var oo={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0};function so(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}nt([],(e=>{e.addCase(Fi.fulfilled,((e,t)=>t.payload.response.facets.map((e=>e.facetId)))).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e}))}));function lo(e,t,r){let{facetId:n}=t;if(e[n])return;let a={...yo,...t},i=r();e[n]={options:a,isLoading:!1,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function uo(e,t){let{facetId:r,...n}=t,a=e[r];!a||(a.options={...a.options,...n})}function co(e,t,r){let n=e[t];!n||(n.requestId=r,n.isLoading=!0)}function fo(e,t){let r=e[t];!r||(r.isLoading=!1)}function po(e,t,r){let{facetId:n,response:a}=t,i=e[n];!i||i.requestId===r&&(i.isLoading=!1,i.response=a)}function ho(e,t,r){let{facetId:n}=t,a=e[n];!a||(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=yo.query)}function go(e,t){Object.keys(e).forEach((r=>ho(e,{facetId:r},t)))}var yo={captions:{},numberOfValues:10,query:""},mo={facetId:zi,value:new wt({values:{displayValue:Et,rawValue:Et,count:new pt({required:!0,min:0})}})},vo=rt("facetSearch/register",(e=>Rt(e,Gi))),bo=rt("facetSearch/update",(e=>Rt(e,Gi))),wo=rt("facetSearch/toggleSelectValue",(e=>Rt(e,mo)));var So=e=>Ta("analytics/facet/search",Fa.Search,((t,r)=>{Rt(e,zi);let n=ya(r),a=((e,t)=>{let r=Oa(t,e),n=r?r.field:"";return{facetId:e,facetField:n,facetTitle:`${n}_${e}`}})(e,n);return t.logFacetSearch(a)}))(),Co=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},Oo=st("facetSearch/executeSearch",(async(e,{dispatch:t,getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i,o=r();a(e,xt),i=xo(o,e)?await(async(e,t)=>{let{captions:r,query:n,numberOfValues:a}=t.facetSearchSet[e].options,{field:i,currentValues:o,filterFacetCount:s}=t.facetSet[e],l=(await xi(t)).request,u=o.filter((e=>"idle"!==e.state)).map((e=>e.value)),c=`*${n}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,captions:r,numberOfValues:a,query:c,field:i,ignoreValues:u,searchContext:l,filterFacetCount:s,type:"specific"}})(e,o):await(async(e,t)=>{let r=t.categoryFacetSearchSet[e].options,n=t.categoryFacetSet[e].request,{captions:a,query:i,numberOfValues:o}=r,{field:s,delimitingCharacter:l,basePath:u,filterFacetCount:c}=n,d=(await xi(t)).request,f=Co(n),p=f.length?[f]:[],h=`*${i}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,basePath:u,captions:a,numberOfValues:o,query:h,field:s,delimitingCharacter:l,ignorePaths:p,searchContext:d,filterFacetCount:c,type:"hierarchical"}})(e,o);let s=await n.facetSearch(i);return t(So(e)),{facetId:e,response:s}})),qo=rt("facetSearch/clearResults",(e=>Rt(e,{facetId:zi}))),xo=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t];nt({},(e=>{e.addCase(ro,((e,t)=>{lo(e,t.payload,Io)})).addCase(bo,((e,t)=>{uo(e,t.payload)})).addCase(Oo.pending,((e,t)=>{co(e,t.meta.arg,t.meta.requestId)})).addCase(Oo.rejected,((e,t)=>{fo(e,t.meta.arg)})).addCase(Oo.fulfilled,((e,t)=>{po(e,t.payload,t.meta.requestId)})).addCase(qo,((e,{payload:{facetId:t}})=>{ho(e,{facetId:t},Io)})).addCase(Fi.fulfilled,(e=>{go(e,Io)}))}));function Io(){return{moreValuesAvailable:!1,values:[]}}nt({},(e=>{e.addCase(vo,((e,t)=>{lo(e,t.payload,Eo)})).addCase(bo,((e,t)=>{uo(e,t.payload)})).addCase(Oo.pending,((e,t)=>{co(e,t.meta.arg,t.meta.requestId)})).addCase(Oo.rejected,((e,t)=>{fo(e,t.meta.arg)})).addCase(Oo.fulfilled,((e,t)=>{po(e,t.payload,t.meta.requestId)})).addCase(qo,((e,{payload:t})=>{ho(e,t,Eo)})).addCase(Fi.fulfilled,(e=>{go(e,Eo)}))}));function Eo(){return{moreValuesAvailable:!1,values:[]}}var jo={value:xt,numberOfResults:new pt({min:0}),state:xt},Ao={facetId:zi,field:new vt({required:!0,emptyAllowed:!0}),delimitingCharacter:new vt({required:!1,emptyAllowed:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new pt({required:!1,min:0}),numberOfValues:new pt({required:!1,min:1}),sortCriteria:new ct({required:!1})},Ro=rt("facet/register",(e=>Rt(e,Ao))),ko=rt("facet/toggleSelectValue",(e=>Rt(e,{facetId:zi,selection:new wt({values:jo})}))),Fo=rt("facet/deselectAll",(e=>Rt(e,zi))),To=rt("facet/updateSortCriterion",(e=>Rt(e,{facetId:zi,criterion:new ct({required:!0})}))),Po=rt("facet/updateNumberOfValues",(e=>Rt(e,{facetId:zi,numberOfValues:new pt({required:!0,min:1})}))),$o=rt("facet/updateIsFieldExpanded",(e=>Rt(e,{facetId:zi,isFieldExpanded:new gt({required:!0})}))),Vo=rt("facet/updateFreezeCurrentValues",(e=>Rt(e,{facetId:zi,freezeCurrentValues:new gt({required:!0})}))),_o=(e=>(e.Relevance="relevance",e.Fields="fields",e))(_o||{}),Mo=(e=>(e.Ascending="asc",e.Descending="desc",e))(Mo||{}),Do=(new wt({options:{required:!1},values:{by:new qt({enum:_o,required:!0}),fields:new Ct({each:new wt({values:{name:new vt,direction:new qt({enum:Mo})}})})}}),rt("productlisting/setUrl",(e=>Rt(e,{url:new vt({required:!0,url:!0})})))),Lo=rt("productlisting/setAdditionalFields",(e=>Rt(e,{additionalFields:new Ct({required:!0,each:new vt({required:!0,emptyAllowed:!1})})}))),zo=st("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await Uo(i));return Dr(s)?(r(Za(s.error)),n(s.error)):{response:s.success}})),Uo=async e=>{var t,r,n;let a=function(e){var t;return Oi(function(e){return[...Ho(e.facetSet),...Ho(e.numericFacetSet),...Ho(e.dateFacetSet),...Qo(e.categoryFacetSet)]}(e),null!=(t=e.facetOrder)?t:[])}(e),i=await Ea();return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&No(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||_o.Relevance)!==_o.Relevance&&{sort:e.sort}}};function No(e){return e.debug}function Qo(e){return Object.values(e||{}).map((e=>e.request))}function Ho(e={}){return Object.keys(e).map((t=>e[t]))}nt({},(e=>{e.addCase(Ro,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=function(e){return{...Bo,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}(t.payload))})).addCase(Yt.fulfilled,((e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet})).addCase(Kt,((e,t)=>{let r=t.payload.f||{};Object.keys(e).forEach((t=>{let n=e[t],a=r[t]||[];n.currentValues=a.map(Jo),n.preventAutoSelect=a.length>0,n.numberOfValues=Math.max(a.length,n.numberOfValues)}))})).addCase(ko,((e,t)=>{let{facetId:r,selection:n}=t.payload,a=e[r];if(!a)return;let i=a.currentValues.find((e=>e.value===n.value));if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected",a.freezeCurrentValues=!0,a.preventAutoSelect=!0})).addCase(Vo,((e,t)=>{let{facetId:r,freezeCurrentValues:n}=t.payload,a=e[r];!a||(a.freezeCurrentValues=n)})).addCase(Fo,((e,t)=>{Zi(e[t.payload])})).addCase(Ai,(e=>{Object.keys(e).forEach((t=>{Zi(e[t])}))})).addCase(ji,(e=>{Object.keys(e).forEach((t=>{Zi(e[t])}))})).addCase(Ri,((e,t)=>Object.keys(e).forEach((r=>{e[r].preventAutoSelect=!t.payload.allow})))).addCase(To,((e,t)=>{Ki(e,t.payload)})).addCase(Po,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload;Xi(e[r],n)})).addCase($o,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,a=e[r];!a||(a.isFieldExpanded=n)})).addCase(Fi.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>Yo(e[t.facetId],t)))})).addCase(zo.fulfilled,((e,t)=>{var r,n;((null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[]).forEach((t=>Yo(e[t.facetId],t)))})).addCase(wo,((e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let{rawValue:i}=n,{currentValues:o}=a,s=o.find((e=>e.value===i));if(s)return void(s.state="selected");let l=Jo(i),u=o.findIndex((e=>"idle"===e.state)),c=-1===u?o.length:u,d=o.slice(0,c),f=o.slice(c+1);a.currentValues=[...d,l,...f],a.numberOfValues=a.currentValues.length,a.freezeCurrentValues=!0,a.preventAutoSelect=!0}))}));function Yo(e,t){!e||(e.currentValues=t.values.map(Wo),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Bo={delimitingCharacter:">",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic"};function Wo(e){let{value:t,state:r}=e;return{value:t,state:r}}function Jo(e){return{value:e,state:"selected"}}var Ko=c(S()),Zo={state:xt,start:new pt({required:!0}),end:new pt({required:!0}),endInclusive:new gt({required:!0}),numberOfResults:new pt({required:!0,min:0})},Xo={start:xt,end:xt,endInclusive:new gt({required:!0}),state:xt,numberOfResults:new pt({required:!0,min:0})},Go=rt("rangeFacet/updateSortCriterion",(e=>Rt(e,{facetId:zi,criterion:new ct({required:!0})}))),es=c(S()),ts=c(x());function rs(e,t){let{dateFormat:r}=t;return function(e){return!!e&&"object"==typeof e&&"period"in e}(e)?(oi(e),function(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}(e)):"string"==typeof e&&ci(e)?(oi(e),e):(function(e,t){let r=(0,Ga.default)(e,t);if(!r.isValid()){let r=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}""`;throw new Error(`Could not parse the provided date "${e}"${t?n:r}`)}ri(r)}(e,r),ti((0,es.default)(e,r)))}es.default.extend(ts.default);var ns={start:xt,end:xt,endInclusive:new gt({required:!0}),state:xt},as={facetId:zi,field:xt,currentValues:new Ct({required:!1,each:new wt({values:ns})}),generateAutomaticRanges:new gt({required:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new pt({required:!1,min:0}),numberOfValues:new pt({required:!1,min:1}),sortCriteria:new ct({required:!1}),rangeAlgorithm:new ct({required:!1})};function is(e){return ci(e)?li(e):e}function os(e){!e.currentValues||e.currentValues.forEach((e=>{let{start:t,end:r}=function(e){var t,r;return dt(e.useLocalTime)||console.warn('The "useLocalTime" option for "buildDateRange" is deprecated. Please use the "timezone" engine configuration option instead.'),{start:rs(e.start,e),end:rs(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}(e);if((0,Ko.default)(is(t)).isAfter((0,Ko.default)(is(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var ss=rt("dateFacet/register",(e=>{try{return At(e,as),os(e),{payload:e,error:null}}catch(t){return{payload:e,error:jt(t)}}})),ls=rt("dateFacet/toggleSelectValue",(e=>Rt(e,{facetId:zi,selection:new wt({values:Xo})}))),us=rt("dateFacet/updateFacetValues",(e=>{try{return At(e,{facetId:zi,values:new Ct({each:new wt({values:Xo})})}),os({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:jt(t)}}})),cs=Go,ds=Fo,fs={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even"};function ps(e,t){let{facetId:r}=t;if(r in e)return;let n=ws(t);e[r]={...t,numberOfValues:n}}function hs(e,t,r){let n=e[t];!n||(n.currentValues=r,n.numberOfValues=ws(n))}function gs(e,t,r){let n=e[t];if(!n)return;let a=bs(n.currentValues,r);if(!a)return;let i="selected"===a.state;a.state=i?"idle":"selected",n.preventAutoSelect=!0}function ys(e,t){let r=e[t];!r||r.currentValues.forEach((e=>e.state="idle"))}function ms(e,t){Object.entries(e).forEach((([e,r])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!bs(n,e);return e.state=t?"selected":"idle",e}));let a=n.filter((e=>!bs(r.currentValues,e))),i=r.currentValues;i.push(...a),r.numberOfValues=Math.max(r.numberOfValues,i.length)}))}function vs(e,t,r){t.forEach((t=>{let n=t.facetId,a=e[n];if(!a)return;let i=r(t.values);a.currentValues=i,a.preventAutoSelect=!1}))}function bs(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function ws(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}nt({},(e=>{e.addCase(ss,((e,t)=>{let{payload:r}=t,n=function(e){return{...fs,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}(r);ps(e,n)})).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e})).addCase(Kt,((e,t)=>{ms(e,t.payload.df||{})})).addCase(ls,((e,t)=>{let{facetId:r,selection:n}=t.payload;gs(e,r,n)})).addCase(us,((e,t)=>{let{facetId:r,values:n}=t.payload;hs(e,r,n)})).addCase(ds,((e,t)=>{ys(e,t.payload)})).addCase(Ai,(e=>{Object.keys(e).forEach((t=>{ys(e,t)}))})).addCase(ji,(e=>{Object.keys(e).forEach((t=>{ys(e,t)}))})).addCase(cs,((e,t)=>{Ki(e,t.payload)})).addCase(Fi.fulfilled,((e,t)=>{vs(e,t.payload.response.facets,Ss)}))}));function Ss(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var Cs={state:xt,start:new pt({required:!0}),end:new pt({required:!0}),endInclusive:new gt({required:!0})},Os={facetId:zi,field:xt,currentValues:new Ct({required:!1,each:new wt({values:Cs})}),generateAutomaticRanges:new gt({required:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new pt({required:!1,min:0}),numberOfValues:new pt({required:!1,min:1}),sortCriteria:new ct({required:!1}),rangeAlgorithm:new ct({required:!1})};function qs(e){!e.currentValues||e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var xs=rt("numericFacet/register",(e=>{try{return Rt(e,Os),qs(e),{payload:e,error:null}}catch(t){return{payload:e,error:jt(t)}}})),Is=rt("numericFacet/toggleSelectValue",(e=>Rt(e,{facetId:zi,selection:new wt({values:Zo})}))),Es=rt("numericFacet/updateFacetValues",(e=>{try{return At(e,{facetId:zi,values:new Ct({each:new wt({values:Zo})})}),qs({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:jt(t)}}})),js=Go,As=Fo;nt({},(e=>{e.addCase(xs,((e,t)=>{let{payload:r}=t,n=function(e){return{...fs,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}(r);ps(e,n)})).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e})).addCase(Kt,((e,t)=>{ms(e,t.payload.nf||{})})).addCase(Is,((e,t)=>{let{facetId:r,selection:n}=t.payload;gs(e,r,n)})).addCase(Es,((e,t)=>{let{facetId:r,values:n}=t.payload;hs(e,r,n)})).addCase(As,((e,t)=>{ys(e,t.payload)})).addCase(Ai,(e=>{Object.keys(e).forEach((t=>{ys(e,t)}))})).addCase(ji,(e=>{Object.keys(e).forEach((t=>{ys(e,t)}))})).addCase(js,((e,t)=>{Ki(e,t.payload)})).addCase(Fi.fulfilled,((e,t)=>{vs(e,t.payload.response.facets,Rs)}))}));function Rs(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var ks=new Ct({each:xt,required:!0}),Fs=rt("fields/registerFieldsToInclude",(e=>Rt(e,ks))),Ts=rt("fields/fetchall/enable"),Ps=rt("fields/fetchall/disable"),$s=st("fields/description",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,l=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return Dr(l)?n(l.error):l.success.fields})),Vs={collectionField:new vt,parentField:new vt,childField:new vt,numberOfFoldedResults:new pt({min:0})},_s=rt("folding/register",(e=>Rt(e,Vs))),Ms=st("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await qi(a),o=await n.search({...i,q:Ds(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}=${e}`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100});return Dr(o)?r(o.error):{collectionId:e,results:o.success.results}}));function Ds(e){return""===e.query.q?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var Ls=nt({fieldsToInclude:["author","language","urihash","objecttype","collection","source","permanentid"],fetchAllFields:!1,fieldsDescription:[]},(e=>e.addCase(Fs,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(Ts,(e=>{e.fetchAllFields=!0})).addCase(Ps,(e=>{e.fetchAllFields=!1})).addCase($s.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(_s,((e,{payload:t})=>{var r,n,a;let i={collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"};e.fieldsToInclude.push(null!=(r=t.collectionField)?r:i.collection,null!=(n=t.parentField)?n:i.parent,null!=(a=t.childField)?a:i.child)}))));function zs(e,t){return e.raw[t.parent]}function Us(e,t){let r=e.raw[t.child];return function(e){return Array.isArray(e)}(r)?r[0]:r}function Ns(e,t,r,n=[]){let a=Us(e,r);return a?-1!==n.indexOf(a)?[]:t.filter((t=>{let n=Us(t,r)===Us(e,r);return zs(t,r)===a&&!n})).map((e=>({result:e,children:Ns(e,t,r,[...n,a])}))):[]}function Qs(e,t){var r;let n=Aa(e),a=null!=(r=function(e,t){return e.find((e=>{let r=void 0===zs(e,t),n=function(e,t){return void 0!==(e||t)&&e===t}(zs(e,t),Us(e,t));return r||n}))}(n,t))?r:e;return{result:a,children:Ns(a,n,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Hs(e,t){let r={};return e.forEach((e=>{let n=function(e,t){return e.raw[t.collection]}(e,t);!n||!Us(e,t)||(r[n]=Qs(e,t))})),r}nt({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}},(e=>e.addCase(Fi.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?Hs(t.response.results,e.fields):{}})).addCase(Ti.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...Hs(t.response.results,e.fields)}:{}})).addCase(_s,((e,{payload:t})=>{var r,n,a,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=t.collectionField)?r:e.fields.collection,parent:null!=(n=t.parentField)?n:e.fields.parent,child:null!=(a=t.childField)?a:e.fields.child},filterFieldRange:null!=(i=t.numberOfFoldedResults)?i:e.filterFieldRange}})).addCase(Ms.pending,((e,{meta:t})=>{let r=t.arg;e.collections[r].isLoadingMoreResults=!0})).addCase(Ms.rejected,((e,{meta:t})=>{let r=t.arg;e.collections[r].isLoadingMoreResults=!1})).addCase(Ms.fulfilled,((e,{payload:{collectionId:t,results:r}})=>{let n=Hs(r,e.fields);e.collections[t]=n[t],e.collections[t].moreResultsAvailable=!1}))));(0,c(E()).createCustomEqual)((e=>(t,r)=>Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t=>-1!==r.findIndex((r=>e(t,r))))):e(t,r)));var Ys=nt(Ja({}),(e=>{e.addCase(Ht,((e,t)=>Bs(e,t.payload)?void 0:t.payload))})),Bs=(e,t)=>Ws(e.context,t.context)&&Js(e.dictionaryFieldContext,t.dictionaryFieldContext)&&al(e.advancedSearchQueries,t.advancedSearchQueries)&&Ks(e.tabSet,t.tabSet)&&Xs(e.staticFilterSet,t.staticFilterSet)&&el(e.facetSet,t.facetSet)&&el(e.dateFacetSet,t.dateFacetSet)&&el(e.numericFacetSet,t.numericFacetSet)&&tl(e.categoryFacetSet,t.categoryFacetSet)&&rl(e.pagination,t.pagination)&&nl(e.query,t.query)&&il(e,t)&&ol(e.pipeline,t.pipeline)&&sl(e.searchHub,t.searchHub)&&ll(e.facetOrder,t.facetOrder)&&ul(e.debug,t.debug),Ws=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Js=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Ks=(e,t)=>{let r=Zs(e),n=Zs(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},Zs=e=>Object.values(e).find((e=>e.isActive)),Xs=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=Gs(e[r]),a=Gs(n);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},Gs=e=>e.values.filter((e=>"idle"!==e.state)),el=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].currentValues.filter((e=>"selected"===e.state)),a=n.currentValues.filter((e=>"selected"===e.state));if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},tl=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let t=ha(null==(r=e[n])?void 0:r.request.currentValues).parents.map((({value:e})=>e)),i=ha(null==a?void 0:a.request.currentValues).parents.map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},rl=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,nl=(e,t)=>JSON.stringify(e)===JSON.stringify(t),al=(e,t)=>JSON.stringify(e)===JSON.stringify(t),il=(e,t)=>e.sortCriteria===t.sortCriteria,ol=(e,t)=>e===t,sl=(e,t)=>e===t,ll=(e,t)=>function(e,t){return e.length===t.length&&-1===e.findIndex(((e,r)=>t[r]!==e))}(e,t),ul=(e,t)=>e===t;nt({firstResult:0,numberOfResults:10,totalCountFiltered:0},(e=>{e.addCase(mi,((e,t)=>{let r=dl(e),n=t.payload;e.numberOfResults=n,e.firstResult=fl(r,n)})).addCase(vi,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(bi,((e,t)=>{let r=t.payload;e.firstResult=fl(r,e.numberOfResults)})).addCase(wi,((e,t)=>{let r=t.payload;e.firstResult=fl(r,e.numberOfResults)})).addCase(Ci,(e=>{let t=dl(e),r=Math.max(t-1,1);e.firstResult=fl(r,e.numberOfResults)})).addCase(Si,(e=>{let t=dl(e),r=function(e){let{totalCountFiltered:t,numberOfResults:r}=e;return function(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}(t,r)}(e),n=Math.min(t+1,r);e.firstResult=fl(n,e.numberOfResults)})).addCase(Yt.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(Kt,((e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.numberOfResults})).addCase(Fi.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(zo.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(Fo,(e=>{cl(e)})).addCase(ko,(e=>{cl(e)})).addCase(Bi,(e=>{cl(e)})).addCase(Yi,(e=>{cl(e)})).addCase(to,(e=>{cl(e)})).addCase(ls,(e=>{cl(e)})).addCase(Is,(e=>{cl(e)})).addCase(Ai,(e=>{cl(e)})).addCase(ji,(e=>{cl(e)})).addCase(us,(e=>{cl(e)})).addCase(Es,(e=>{cl(e)})).addCase(wo,(e=>{cl(e)}))}));function cl(e){e.firstResult=0}function dl(e){let{firstResult:t,numberOfResults:r}=e;return function(e,t){return e/t+1}(t,r)}function fl(e,t){return(e-1)*t}var pl=rt("pipeline/set",(e=>Rt(e,new vt({required:!0,emptyAllowed:!0})))),hl=nt("",(e=>{e.addCase(pl,((e,t)=>t.payload)).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e})).addCase($t,((e,t)=>t.payload.pipeline||e))})),gl=(nt({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""},(e=>{e.addCase(Do,((e,t)=>{e.url=t.payload.url})).addCase(Lo,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(zo.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(zo.fulfilled,((e,t)=>{e.error=null,e.facets=t.payload.response.facets,e.products=t.payload.response.products,e.responseId=t.payload.response.responseId,e.isLoading=!1})).addCase(zo.pending,(e=>{e.isLoading=!0}))})),["permanentid","ec_name","ec_brand","ec_category","ec_price","ec_promo_price","ec_shortdesc","ec_thumbnails","ec_images","ec_in_stock","ec_rating"]),yl=Ta("analytics/productrecommendations/load",Fa.Search,(e=>e.logRecommendationInterfaceLoad()),(e=>new class{constructor(e){this.state=e,this.initialState={id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0}}getLanguage(){return pa(this.state)}getSearchEventRequestPayload(){return{queryText:"",responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getBaseMetadata(){var e;return{recommendation:(null==(e=this.state.productRecommendations)?void 0:e.id)||this.initialState.id}}getSearchUID(){var e;return(null==(e=this.state.productRecommendations)?void 0:e.searchUid)||this.initialState.searchUid}getPipeline(){return""}getOriginLevel1(){return this.state.searchHub||"default"}getOriginLevel2(){return this.state.configuration.analytics.originLevel2||"default"}getOriginLevel3(){return this.state.configuration.analytics.originLevel3||"default"}getIsAnonymous(){return this.state.configuration.analytics.anonymous}mapResultsToAnalyticsDocument(){return[]}get responseTime(){var e;return(null==(e=this.state.productRecommendations)?void 0:e.duration)||this.initialState.duration}get numberOfResults(){var e;return(null==(e=this.state.productRecommendations)?void 0:e.recommendations.length)||this.initialState.recommendations.length}}(e))),ml=rt("productrecommendations/setId",(e=>Rt(e,{id:xt}))),vl=rt("productrecommendations/setSku",(e=>Rt(e,{skus:new Ct({required:!0,min:1,each:It})}))),bl=rt("productrecommendations/setBrand",(e=>Rt(e,{brand:new vt({required:!0,emptyAllowed:!0})}))),wl=rt("productrecommendations/setCategory",(e=>Rt(e,{category:new vt({required:!0,emptyAllowed:!0})}))),Sl=rt("productrecommendations/setAdditionalFields",(e=>Rt(e,{additionalFields:new Ct({required:!0,each:It})}))),Cl=rt("productrecommendations/setMaxNumberOfRecommendations",(e=>Rt(e,{number:new pt({required:!0,max:50,min:1})}))),Ol=st("productrecommendations/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=(new Date).getTime(),o=await n.productRecommendations(await xl(a)),s=(new Date).getTime()-i;if(Dr(o))return r(o.error);let l=a.productRecommendations.additionalFields||[];return{recommendations:o.success.results.map((e=>ql(e,{additionalFields:l}))),analyticsAction:yl(),searchUid:o.success.searchUid,duration:s}})),ql=(e,{additionalFields:t})=>{let r=e.raw.ec_price,n=e.raw.ec_promo_price,a=e.raw.ec_in_stock;return{permanentid:e.raw.permanentid,clickUri:e.clickUri,ec_name:e.raw.ec_name,ec_brand:e.raw.ec_brand,ec_category:e.raw.ec_category,ec_price:r,ec_shortdesc:e.raw.ec_shortdesc,ec_thumbnails:e.raw.ec_thumbnails,ec_images:e.raw.ec_images,ec_promo_price:void 0===n||void 0!==r&&n>=r?void 0:n,ec_in_stock:void 0===a?void 0:"yes"===a.toLowerCase()||"true"===a.toLowerCase(),ec_rating:e.raw.ec_rating,additionalFields:t.reduce(((t,r)=>({...t,[r]:e.raw[r]})),{})}},xl=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await Ea()},recommendation:e.productRecommendations.id,numberOfResults:e.productRecommendations.maxNumberOfRecommendations,fieldsToInclude:[...gl,...e.productRecommendations.additionalFields||[]],mlParameters:{...e.productRecommendations.skus&&e.productRecommendations.skus.length>0&&{itemIds:e.productRecommendations.skus},...e.productRecommendations.filter.brand&&{brandFilter:e.productRecommendations.filter.brand},...e.productRecommendations.filter.category&&{categoryFilter:e.productRecommendations.filter.category}},actionsHistory:e.configuration.analytics.enabled?ja.getHistory():[],...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.searchHub&&{searchHub:e.searchHub}}),Il=(nt({id:"",skus:[],maxNumberOfRecommendations:5,filter:{brand:"",category:""},additionalFields:[],recommendations:[],error:null,isLoading:!1,searchUid:"",duration:0},(e=>{e.addCase(ml,((e,t)=>{e.id=t.payload.id})).addCase(vl,((e,t)=>{e.skus=t.payload.skus})).addCase(bl,((e,t)=>{e.filter.brand=t.payload.brand})).addCase(wl,((e,t)=>{e.filter.category=t.payload.category})).addCase(Cl,((e,t)=>{e.maxNumberOfRecommendations=t.payload.number})).addCase(Sl,((e,t)=>{e.additionalFields=t.payload.additionalFields})).addCase(Ol.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(Ol.fulfilled,((e,t)=>{e.error=null,e.searchUid=t.payload.searchUid,e.recommendations=t.payload.recommendations,e.isLoading=!1})).addCase(Ol.pending,(e=>{e.isLoading=!0}))})),{id:xt,query:Et}),El=rt("querySet/register",(e=>Rt(e,Il))),jl=rt("querySet/update",(e=>Rt(e,Il))),Al={id:xt},Rl=rt("querySuggest/register",(e=>Rt(e,{...Al,q:new vt,count:new pt({min:0})}))),kl=rt("querySuggest/unregister",(e=>Rt(e,Al))),Fl=rt("querySuggest/selectSuggestion",(e=>Rt(e,{...Al,expression:Et}))),Tl=rt("querySuggest/clear",(e=>Rt(e,Al))),Pl=st("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,Al);let i=e.id,o=await $l(i,t()),s=await n.querySuggest(o);return Dr(s)?r(s.error):{id:i,q:o.q,...s.success}})),$l=async(e,t)=>{var r;return{accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:null==(r=t.querySet)?void 0:r[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?ja.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await Ea()}}};nt({},(e=>{e.addCase(El,((e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)})).addCase(jl,((e,t)=>{let{id:r,query:n}=t.payload;_l(e,r,n)})).addCase(Fl,((e,t)=>{let{id:r,expression:n}=t.payload;_l(e,r,n)})).addCase(Fi.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;Vl(e,r)})).addCase(Kt,((e,t)=>{ft(t.payload.q)||Vl(e,t.payload.q)})).addCase(Yt.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))_l(e,r,n)}))}));function Vl(e,t){Object.keys(e).forEach((r=>e[r]=t))}var _l=(e,t,r)=>{t in e&&(e[t]=r)};nt({},(e=>e.addCase(Rl,((e,t)=>{let r=t.payload.id;r in e||(e[r]=function(e){return{id:"",completions:[],responseId:"",count:5,q:"",currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}(t.payload))})).addCase(kl,((e,t)=>{delete e[t.payload.id]})).addCase(Pl.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.currentRequestId=t.meta.requestId,r.isLoading=!0)})).addCase(Pl.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(Pl.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.error=t.payload||null,r.isLoading=!1)})).addCase(jl,((e,t)=>{let{id:r,query:n}=t.payload;r in e&&Ml(e[r],n)})).addCase(Tl,((e,t)=>{let r=e[t.payload.id];!r||(r.responseId="",r.completions=[],r.partialQueries=[])})).addCase(Fl,((e,t)=>{let{id:r,expression:n}=t.payload,a=e[r];!a||(a.q=n)})).addCase(Kt,((e,t)=>{ft(t.payload.q)||Dl(e,t.payload.q)})).addCase(Fi.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;Dl(e,r)}))));function Ml(e,t){e.q=t}function Dl(e,t){Object.keys(e).forEach((r=>Ml(e[r],t)))}nt({q:"",enableQuerySyntax:!1},(e=>e.addCase(Ua,((e,t)=>({...e,...t.payload}))).addCase(Ar,((e,t)=>{e.q=t.payload})).addCase(Fl,((e,t)=>{e.q=t.payload.expression})).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e})).addCase(Kt,((e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax}))));var Ll=()=>new wt({values:{documentId:new wt({values:{contentIdKey:xt,contentIdValue:xt}})},options:{required:!0}}),zl=rt("smartSnippet/expand"),Ul=rt("smartSnippet/collapse"),Nl=rt("smartSnippet/like"),Ql=rt("smartSnippet/dislike"),Hl=rt("smartSnippet/related/expand",(e=>Rt(e,Ll()))),Yl=rt("smartSnippet/related/collapse",(e=>Rt(e,Ll()))),Bl=(e,t)=>e.findIndex((e=>e.contentIdValue===t.contentIdValue&&e.contentIdKey===t.contentIdKey)),Wl=(nt({liked:!1,disliked:!1,expanded:!1,relatedQuestions:[]},(e=>e.addCase(zl,(e=>{e.expanded=!0})).addCase(Ul,(e=>{e.expanded=!1})).addCase(Nl,(e=>{e.liked=!0,e.disliked=!1})).addCase(Ql,(e=>{e.liked=!1,e.disliked=!0})).addCase(Fi.fulfilled,((e,t)=>{e.relatedQuestions=t.payload.response.questionAnswer.relatedQuestions.map((e=>({contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1})))})).addCase(Hl,((e,t)=>{let r=Bl(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)})).addCase(Yl,((e,t)=>{let r=Bl(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)})))),{results:new Ct({required:!0,each:new wt({values:Va})}),maxLength:new pt({required:!0,min:1,default:10})}),Jl=rt("recentResults/registerRecentResults",(e=>Rt(e,Wl))),Kl=rt("recentResults/pushRecentResult",(e=>(La(e),{payload:e}))),Zl=rt("recentResults/clearRecentResults");nt({results:[],maxLength:10},(e=>{e.addCase(Jl,((e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(Zl,(e=>{e.results=[]})).addCase(Kl,((e,t)=>{let r=t.payload;e.results=e.results.filter((e=>e.uniqueId!==r.uniqueId));let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]}))}));var Xl={queries:new Ct({required:!0,each:new vt({emptyAllowed:!1})}),maxLength:new pt({required:!0,min:1,default:10})},Gl=rt("recentQueries/registerRecentQueries",(e=>Rt(e,Xl))),eu=rt("recentQueries/clearRecentQueries");nt({queries:[],maxLength:10},(e=>{e.addCase(Gl,((e,t)=>{e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase(eu,(e=>{e.queries=[]})).addCase(Fi.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim();if(!r.length)return;e.queries=e.queries.filter((e=>e!==r));let n=e.queries.slice(0,e.maxLength-1);e.queries=[r,...n]}))}));var tu=Ta("analytics/recommendation/update",Fa.Search,(e=>e.logRecommendationInterfaceLoad())),ru=e=>Ta("analytics/recommendation/open",Fa.Click,((t,r)=>(La(e),t.logRecommendationOpen(Pa(e,r),(e=>({contentIDKey:"@permanentid",contentIDValue:e.raw.permanentid||""}))(e)))))(),nu=rt("recommendation/set",(e=>Rt(e,{id:xt}))),au=st("recommendation/get",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=(new Date).getTime(),o=await n.recommendations(await iu(a)),s=(new Date).getTime()-i;return Dr(o)?r(o.error):{recommendations:o.success.results,analyticsAction:tu(),duration:s,searchUid:o.success.searchUid}})),iu=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,recommendation:e.recommendation.id,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,locale:e.configuration.search.locale,actionsHistory:e.configuration.analytics.enabled?ja.getHistory():[],...e.advancedSearchQueries&&{aq:e.advancedSearchQueries.aq,cq:e.advancedSearchQueries.cq},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.context&&{context:e.context.contextValues},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.configuration.analytics.enabled&&{visitorId:await Ea()}}),ou=nt({duration:0,error:null,isLoading:!1,id:"Recommendation",recommendations:[],searchUid:""},(e=>{e.addCase(nu,((e,t)=>{e.id=t.payload.id})).addCase(au.rejected,((e,t)=>{e.error=t.payload?t.payload:null,e.isLoading=!1})).addCase(au.fulfilled,((e,t)=>{e.error=null,e.recommendations=t.payload.recommendations,e.duration=t.payload.duration,e.isLoading=!1,e.searchUid=t.payload.searchUid})).addCase(au.pending,(e=>{e.isLoading=!0}))}));function su(e){return"notify"===e.type}function lu(e){return"redirect"===e.type}function uu(e){return"query"===e.type}function cu(e){return"execute"===e.type}var du=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(lu);return e.length?e[0].content:null}},fu=Ta("analytics/redirection",Fa.Search,((e,t)=>{var r;if(null==(r=t.redirection)?void 0:r.redirectTo)return e.logTriggerRedirect({redirectedTo:t.redirection.redirectTo})})),pu=rt("standaloneSearchBox/register",(e=>Rt(e,{id:xt,redirectionUrl:xt}))),hu=rt("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>Rt(e,{id:xt}))),gu=rt("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),yu=st("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new vt({emptyAllowed:!1})});let o=await vu(r()),s=await a.plan(o);if(Dr(s))return n(s.error);let{redirectionUrl:l}=new du(s.success);return l&&t(mu(l)),l||""})),mu=e=>Ta("analytics/standaloneSearchBox/redirect",Fa.Custom,(t=>t.logTriggerRedirect({redirectedTo:e})))(),vu=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await Ea()}}),bu=st("redirection/check",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{defaultRedirectionUrl:new vt({emptyAllowed:!1})});let o=await a.plan(await vu(r()));if(Dr(o))return n(o.error);let s=new du(o.success).redirectionUrl;return s&&t(fu()),s||e.defaultRedirectionUrl}));nt({redirectTo:null},(e=>e.addCase(bu.fulfilled,((e,t)=>{e.redirectTo=t.payload}))));var wu=st("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await async function(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await Ea()},q:s,...t,requestedOutputSize:t.requestedOutputSize||0}}(a,e),o=await t.apiClient.html(i);return Dr(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}}));nt({uniqueId:"",content:"",isLoading:!1},(e=>{e.addCase(wu.pending,(e=>{e.isLoading=!0})).addCase(wu.fulfilled,((e,t)=>{let{content:r,uniqueId:n}=t.payload;e.content=r,e.uniqueId=n,e.isLoading=!1}))}));var Su=rt("searchHub/set",(e=>Rt(e,new vt({required:!0,emptyAllowed:!0})))),Cu=nt("default",(e=>{e.addCase(Su,((e,t)=>t.payload)).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e})).addCase($t,((e,t)=>t.payload.searchHub||e))}));function Ou(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response={results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},e.results=[]),e.error=n,e.isLoading=!1}function qu(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function xu(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}nt({response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],queryCorrections:[],triggers:[],questionAnswer:{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0},pipeline:""},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:""},(e=>{e.addCase(Fi.rejected,((e,t)=>Ou(e,t))),e.addCase(Ti.rejected,((e,t)=>Ou(e,t))),e.addCase(Fi.fulfilled,((e,t)=>{qu(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid})),e.addCase(Ti.fulfilled,((e,t)=>{qu(e,t),e.results=[...e.results,...t.payload.response.results]})),e.addCase(Fi.pending,xu),e.addCase(Ti.pending,xu)}));var Iu={by:new qt({enum:Ya,required:!0})},Eu=rt("sortCriteria/register",(e=>Au(e))),ju=rt("sortCriteria/update",(e=>Au(e))),Au=e=>Ot(e)?(e.forEach((e=>Rt(e,Iu))),{payload:e}):Rt(e,Iu);nt(Wa(),(e=>{e.addCase(Eu,((e,t)=>Ba(t.payload))).addCase(ju,((e,t)=>Ba(t.payload))).addCase(Yt.fulfilled,((e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e})).addCase(Kt,((e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e}))}));nt({},(e=>e.addCase(pu,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=function(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}(n))})).addCase(yu.pending,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!0)})).addCase(yu.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];!n||(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(yu.rejected,((e,t)=>{let r=e[t.meta.arg.id];!r||(r.isLoading=!1)})).addCase(hu,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="searchFromLink")})).addCase(gu,((e,t)=>{let r=e[t.payload.id];!r||(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));nt({redirectTo:"",query:"",execute:{functionName:"",params:[]},notification:""},(e=>e.addCase(Fi.fulfilled,((e,t)=>{let r=t.payload.response.triggers.filter(lu);e.redirectTo=r.length?r[0].content:"";let n=t.payload.response.triggers.filter(uu);e.query=n.length?n[0].content:"";let a=t.payload.response.triggers.filter(cu);e.execute=a.length?{functionName:a[0].content.name,params:a[0].content.params}:{functionName:"",params:[]};let i=t.payload.response.triggers.filter(su);e.notification=i.length?i[0].content:""}))));var Ru=e=>({past:[],present:e,future:[]});var ku={by:new qt({enum:_o,required:!0})},Fu=rt("sort/register",(e=>Pu(e))),Tu=rt("sort/update",(e=>Pu(e))),Pu=e=>Rt(e,ku),$u=(nt({by:"relevance"},(e=>{e.addCase(Fu,((e,t)=>t.payload)).addCase(Tu,((e,t)=>t.payload))})),rt("dictionaryFieldContext/set",(e=>{let t=new wt({options:{required:!0}}),r=Rt(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),a=new Ct({each:Et}),i=Rt(n,a).error;return i?{payload:e,error:i}:{payload:e}}))),Vu=rt("dictionaryFieldContext/add",(e=>{let t=new wt({options:{required:!0},values:{field:Et,key:Et}});return Rt(e,t)})),_u=rt("dictionaryFieldContext/remove",(e=>Rt(e,Et))),Mu=nt({contextValues:{}},(e=>{e.addCase($u,((e,t)=>{e.contextValues=t.payload})).addCase(Vu,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(_u,((e,t)=>{delete e.contextValues[t.payload]})).addCase(Yt.fulfilled,((e,t)=>{!t.payload||(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));nt({},(e=>{e.addCase(Xt,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})})).addCase(Gt,((e,t)=>{Du(e,t.payload)})).addCase(Kt,((e,t)=>{Du(e,t.payload.tab||"")}))}));function Du(e,t){t in e&&Object.keys(e).forEach((r=>{e[r].isActive=r===t}))}var Lu=xt,zu=new wt({options:{required:!0},values:{caption:Et,expression:Et,state:new vt({constrainTo:["idle","selected"]})}}),Uu=new Ct({required:!0,each:zu}),Nu=rt("staticFilter/register",(e=>Rt(e,{id:Lu,values:Uu}))),Qu=rt("staticFilter/toggleSelect",(e=>Rt(e,{id:Lu,value:zu}))),Hu=rt("staticFilter/deselectAllFilterValues",(e=>Rt(e,Lu))),Yu=(nt({},(e=>e.addCase(Nu,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)})).addCase(Qu,((e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find((e=>e.caption===n.caption));if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected"})).addCase(Hu,((e,t)=>{let r=e[t.payload];!r||r.values.forEach((e=>e.state="idle"))})).addCase(ji,(e=>{Object.values(e).forEach((e=>{e.values.forEach((e=>e.state="idle"))}))})).addCase(Kt,((e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach((([e,t])=>{let n=r[e]||[];t.values.forEach((e=>{e.state=n.includes(e.caption)?"selected":"idle"}))}))})))),rt("caseAssistConfiguration/set",(e=>Rt(e,{caseAssistId:xt,locale:It})))),Bu=(nt({caseAssistId:"",locale:"en-US"},(e=>{e.addCase(Yu,((e,t)=>{e.caseAssistId=t.payload.caseAssistId,e.locale=t.payload.locale}))})),rt("caseAssist/caseInput/update",(e=>Rt(e,{fieldName:xt,fieldValue:Et})))),Wu=(nt({},(e=>{e.addCase(Bu,((e,t)=>{e[t.payload.fieldName]={value:t.payload.fieldValue}}))})),e=>Object.keys(e).filter((t=>""!==e[t].value)).reduce(((t,r)=>({...t,[r]:e[r].value})),{})),Ju=rt("caseAssist/caseField/register",(e=>Rt(e,{fieldName:xt,fieldValue:Et}))),Ku=rt("caseAssist/caseField/update",(e=>Rt(e,{fieldName:xt,fieldValue:Et}))),Zu=st("caseAssist/classifications/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getCaseClassifications(await Xu(a));return Dr(i)?r(i.error):{response:i.success}})),Xu=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Ea()},fields:e.caseInput,context:e.caseField?Wu(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),Gu=(nt({status:{loading:!1,error:null,lastResponseId:""},fields:{}},(e=>{e.addCase(Ju,((e,t)=>{let{fieldName:r,fieldValue:n}=t.payload;e.fields[r]={value:n,suggestions:[]}})).addCase(Ku,((e,t)=>{let{fieldName:r,fieldValue:n}=t.payload;e.fields[r].value=n})).addCase(Zu.rejected,((e,t)=>{var r;e.status.error=null!=(r=t.payload)?r:null,e.status.loading=!1})).addCase(Zu.fulfilled,((e,t)=>{let r={value:"",suggestions:[]};Object.entries(t.payload.response.fields).forEach((([t,n])=>{e.fields[t]||(e.fields[t]={...r}),e.fields[t].suggestions=n.predictions})),e.status.lastResponseId=t.payload.response.responseId,e.status.error=null,e.status.loading=!1})).addCase(Zu.pending,(e=>{e.status.loading=!0}))})),st("caseAssist/documentSuggestions/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await n.getDocumentSuggestions(await ec(a));return Dr(i)?r(i.error):{response:i.success}}))),ec=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,caseAssistId:e.caseAssistConfiguration.caseAssistId,...e.configuration.analytics.enabled&&{visitorId:await Ea()},fields:e.caseInput,context:e.caseField?Wu(e.caseField.fields):void 0,locale:e.caseAssistConfiguration.locale,debug:e.debug}),tc=(nt({status:{loading:!1,error:null,lastResponseId:""},documents:[]},(e=>{e.addCase(Gu.rejected,((e,t)=>{var r;e.status.error=null!=(r=t.payload)?r:null,e.status.loading=!1})).addCase(Gu.fulfilled,((e,t)=>{e.documents=t.payload.response.documents,e.status.lastResponseId=t.payload.response.responseId,e.status.error=null,e.status.loading=!1})).addCase(Gu.pending,(e=>{e.status.loading=!0}))})),gr),rc=Zt,nc=Sr,ac=Mu,ic=Ls,oc=hl,sc=Cu,lc=qr,uc=Ir,cc=((e=>{let{actionTypes:t,reducer:r}=e,n=Ru()})({actionTypes:{redo:Qt.type,undo:Nt.type,snapshot:Ht.type},reducer:Ys}),ou);function dc(e,t){let r=0,n=function(e,t,r){var n,a,i;void 0===t&&(t=50),void 0===r&&(r={});var o=null!=(n=r.isImmediate)&&n,s=null!=(a=r.callback)&&a,l=r.maxWait,u=Date.now(),c=[];function d(){if(void 0!==l){var e=Date.now()-u;if(e+t>=l)return l-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,a){var l=o&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout((function(){if(i=void 0,u=Date.now(),!o){var n=e.apply(r,t);s&&s(n),c.forEach((function(e){return(0,e.resolve)(n)})),c=[]}}),d()),l){var f=e.apply(r,t);return s&&s(f),n(f)}c.push({resolve:n,reject:a})}))};return f.cancel=function(e){void 0!==i&&clearTimeout(i),c.forEach((function(t){return(0,t.reject)(e)})),c=[]},f}((()=>r=0),500);return a=>i=>async o=>{if("function"!=typeof o)return i(o);let s=await i(o);if(!function(e){var t;return(null==(t=e.error)?void 0:t.name)===(new nr).name}(s))return s;if("function"!=typeof t)return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),s;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),s;r++,n();let l=await async function(e){try{return await e()}catch(t){return""}}(t);a.dispatch(Pt({accessToken:l})),a.dispatch(o)}}var fc=e=>t=>r=>{var n,a;let i=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==i&&(null==(a=r.payload)||delete a.analyticsAction);let o=t(r);return r.type===Fi.fulfilled.type&&void 0===i&&console.error("No analytics action associated with search:",r),r.type===au.fulfilled&&void 0===i&&console.error("No analytics action associated with recommendation:",r),r.type===Ol.fulfilled&&void 0===i&&console.error("No analytics action associated with product recommendation:",r),void 0!==i&&e.dispatch(i),o},pc={configuration:tc,version:uc};function hc(e,t){let r=function(e,t){let{reducers:r}=e,n=function(e){let t={...e};return{get combinedReducer(){return Pe(t)},containsAll:e=>Object.keys(e).every((e=>e in t)),add(e){Object.keys(e).filter((e=>!(e in t))).forEach((r=>t[r]=e[r]))}}}({...pc,...r}),a=t.logger,i=function(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=function(e,t){let{renewAccessToken:r}=e.configuration;return[dc(t,r),zt(t),fc].concat(e.middlewares||[])}(e,t.logger);return function({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return tt({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:a,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),Ut(n.logger)]})}({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}(e,t,n);return{addReducers(e){n.containsAll(e)||(n.add(e),i.replaceReducer(n.combinedReducer))},dispatch:i.dispatch,subscribe:i.subscribe,enableAnalytics(){i.dispatch(Mt())},disableAnalytics(){i.dispatch(_t())},get state(){return i.getState()},logger:a,store:i}}(e,t),{accessToken:n,organizationId:a,platformUrl:i,analytics:o}=e.configuration;if(r.dispatch(Pt({accessToken:n,organizationId:a,platformUrl:i})),o){let{analyticsClientMiddleware:e,...t}=o;r.dispatch(Vt(t))}return r}var gc={organizationId:xt,accessToken:xt,platformUrl:new vt({required:!1,emptyAllowed:!1}),name:new vt({required:!1,emptyAllowed:!1}),analytics:new wt({options:{required:!1},values:{enabled:new gt({required:!1}),originLevel2:new vt({required:!1}),originLevel3:new vt({required:!1})}})};var yc=new ut({...gc,pipeline:It,searchHub:It,locale:It,timezone:It});function mc(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",searchHub:"default"}}var vc=c(A());var bc=e=>e;function wc(e,t){let r=function(e){let{analytics:t}=e,r=(e,t)=>t;return(null==t?void 0:t.analyticsClientMiddleware)||r}(e),n=At,a=function(e){return e.preprocessRequest||bc}(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:a,logger:t}}var Sc=e=>e,Cc=e=>e,Oc=e=>e,qc={debug:lc,pipeline:oc,searchHub:sc,recommendation:cc};function xc(e){let t=function(e){return(0,vc.default)({name:"@coveo/headless",level:(null==e?void 0:e.level)||"warn",formatters:{log:null==e?void 0:e.logFormatter},browser:{transmit:{send:(null==e?void 0:e.browserPostLogHook)||(()=>{})}}})}(e.loggerOptions);!function(e,t){try{yc.validate(e)}catch(r){throw t.error(r,"Recommendation engine configuration error"),r}}(e.configuration,t);let r=function(e,t){return new class{constructor(e){this.options=e,this.searchAbortController=null}async plan(e){let t=await sr.call({...Fr(e,"POST","application/json","/plan"),requestParams:zr(e),...this.options});if(t instanceof Error)return kr(t);let r=await t.json();return void 0!==r.preprocessingOutput?{success:r}:{error:$r({response:t,body:r})}}async querySuggest(e){let t=await sr.call({...Fr(e,"POST","application/json","/querySuggest"),requestParams:zr(e),...this.options});if(t instanceof Error)return kr(t);let r=await t.json(),n={response:t,body:r};return void 0!==r.completions?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:$r(n)}}async search(e){var t;this.searchAbortController&&(this.options.logger.warn("Cancelling current pending search query"),this.searchAbortController.abort()),this.searchAbortController=this.getAbortControllerInstanceIfAvailable();let r=await sr.call({...Fr(e,"POST","application/json",""),requestParams:zr(e),...this.options,signal:null==(t=this.searchAbortController)?void 0:t.signal});if(r instanceof Error)return kr(r);this.searchAbortController=null;let n=await r.json(),a={response:r,body:n};return Lr(n)?(a.body=function(e){let t={answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0};return ft(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}(n),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:$r(a)}}async facetSearch(e){let t=await sr.call({...Fr(e,"POST","application/json","/facet"),requestParams:zr(e),...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await sr.call({...Fr(e,"POST","application/json",""),requestParams:zr(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return Lr(r)?{success:r}:{error:$r({response:t,body:r})}}async html(e){let t=await sr.call({...Fr(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:zr(e),...this.options});if(t instanceof Error)throw t;let r=((t.headers.get("content-type")||"").split(";").find((e=>-1!==e.indexOf("charset=")))||"").split("=")[1]||"UTF-8",n=await t.arrayBuffer(),a=new Pr(r).decode(n);return function(e){return"string"==typeof e}(a)?{success:a}:{error:$r({response:t,body:a})}}async productRecommendations(e){let t=await sr.call({...Fr(e,"POST","application/json",""),requestParams:zr(e),...this.options});if(t instanceof Error)throw t;let r=await t.json();return Lr(r)?{success:r}:{error:$r({response:t,body:r})}}async fieldDescriptions(e){let t=await sr.call({...Fr(e,"GET","application/json","/fields"),requestParams:{},...this.options});if(t instanceof Error)throw t;let r=await t.json();return void 0!==r.fields?{success:r}:{error:$r({response:t,body:r})}}getAbortControllerInstanceIfAvailable(){return"undefined"==typeof window?new(q()):"undefined"==typeof AbortController?null:new AbortController}}({logger:t,preprocessRequest:e.preprocessRequest||bc,postprocessSearchResponseMiddleware:Sc,postprocessFacetSearchResponseMiddleware:Cc,postprocessQuerySuggestResponseMiddleware:Oc})}(e.configuration,t),n={...wc(e.configuration,t),apiClient:r,searchAPIClient:r},a=hc({...e,reducers:qc},n),{pipeline:i,searchHub:o,timezone:s,locale:l}=e.configuration;return a.dispatch($t({timezone:s,locale:l})),ft(i)||a.dispatch(pl(i)),ft(o)||a.dispatch(Su(o)),{...a,get state(){return a.state}}}function Ic(e){return e.addReducers({configuration:tc}),{disableAnalytics:_t,enableAnalytics:Mt,setOriginLevel2:Dt,setOriginLevel3:Lt,updateAnalyticsConfiguration:Vt,updateBasicConfiguration:Pt}}function Ec(e){return e.addReducers({advancedSearchQueries:rc}),{updateAdvancedSearchQueries:Bt,registerAdvancedSearchQueries:Wt}}function jc(e){return e.addReducers({context:nc}),{addContext:br,removeContext:wr,setContext:vr}}function Ac(e){return e.addReducers({dictionaryFieldContext:ac}),{addContext:Vu,removeContext:_u,setContext:$u}}function Rc(e){return e.addReducers({fields:ic}),{registerFieldsToInclude:Fs,enableFetchAllFields:Ts,disableFetchAllFields:Ps,fetchFieldsDescription:$s}}function kc(e){return e.addReducers({pipeline:oc}),{setPipeline:pl}}function Fc(e){return e.addReducers({searchHub:sc}),{setSearchHub:Su}}function Tc(e){return e.addReducers({debug:lc}),{disableDebug:Or,enableDebug:Cr}}function Pc(e){return e.addReducers({recommendation:cc}),{getRecommendations:au,setRecommendationId:nu}}function $c(e){return e.addReducers({}),{logRecommendationOpen:ru}}function Vc(e){let t,r=new Map,n=()=>0===r.size;return{subscribe(a){a();let i,o=Symbol();return n()&&(t=JSON.stringify(this.state),i=e.subscribe((()=>{(e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(o){return console.warn('Could not detect if state has changed, check the controller "get state method"',o),!0}})(this.state)&&r.forEach((e=>e()))}))),r.set(o,a),()=>{r.delete(o),n()&&i&&i()}},get state(){return{}}}}var _c=new ut({id:new vt({emptyAllowed:!0,required:!1,default:""})});function Mc(e,t={}){if(!function(e){return e.addReducers({recommendation:cc,configuration:tc}),!0}(e))throw rr;let r=Vc(e),{dispatch:n}=e,a=((e,t,r,n)=>kt(e,t,r,`Check the options of ${n}`,"Controller initialization error"))(e,_c,t.options,"buildRecommendationList");return""!==a.id&&n(nu({id:a.id})),{...r,refresh(){n(au())},get state(){let t=e.state;return{recommendations:t.recommendation.recommendations,error:t.recommendation.error,isLoading:t.recommendation.isLoading}}}}function Dc(e){if(!function(e){return e.addReducers({context:nc}),!0}(e))throw rr;let t=Vc(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.context.contextValues}},set(e){r(vr(e))},add(e,t){r(br({contextKey:e,contextValue:t}))},remove(e){r(wr(e))}}}function Lc(e){if(!function(e){return e.addReducers({dictionaryFieldContext:ac}),!0}(e))throw rr;let t=Vc(e),{dispatch:r}=e;return{...t,get state(){return{values:e.state.dictionaryFieldContext.contextValues}},set(e){r($u(e))},add(e,t){r(Vu({field:e,key:t}))},remove(e){r(_u(e))}}}}}]);